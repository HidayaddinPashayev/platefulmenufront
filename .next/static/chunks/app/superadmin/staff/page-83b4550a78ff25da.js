(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[424],{1e3:function(e,a,t){Promise.resolve().then(t.bind(t,1609))},1609:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var l=t(7437),r=t(2265),s=t(8734),n=t(2285),o=t(6997),i=t(620);let d={email:"",staffType:"Waiter",firstName:"",lastName:"",phoneNumber:"",salary:"",salaryCycle:"Monthly",branchId:""},u={staffType:"Waiter",firstName:"",lastName:"",phoneNumber:"",salary:"",salaryCycle:"Monthly",branchId:""},c=[{label:"Waiter",value:"Waiter"},{label:"Cleaner",value:"Cleaner"}],m=[{label:"Daily",value:"Daily"},{label:"Weekly",value:"Weekly"},{label:"Monthly",value:"Monthly"}],f=new Set(["ROLE_WAITER","ROLE_KITCHEN"]);function b(){var e;let{user:a}=(0,s.a)(),t=(0,n.h)(),[b,x]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!1),[v,g]=(0,r.useState)(d),[w,j]=(0,r.useState)(u),[I,A]=(0,r.useState)(null),[C,E]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[L,M]=(0,r.useState)(null),[F,R]=(0,r.useState)(null),[P,T]=(0,r.useState)([]),[_,U]=(0,r.useState)(!1),[O,q]=(0,r.useState)(null),[D,W]=(0,r.useState)([]),[B,z]=(0,r.useState)(!1),H=null!==(e=null==a?void 0:a.restaurantId)&&void 0!==e?e:null,K=(0,r.useMemo)(()=>{let e=new Map;return P.forEach(a=>{e.set(a.id,a.name)}),e},[P]),J=(e,a)=>{q({message:e,type:a}),setTimeout(()=>{q(null)},5e3)};(0,r.useEffect)(()=>{H&&(b||N)&&(U(!0),(0,i.Pz)(t,H).then(e=>{T(e)}).catch(e=>{console.error("[SuperadminStaff] Failed to load branches",e),M("Failed to load branches.")}).finally(()=>{U(!1)}))},[t,H,b,N]),(0,r.useEffect)(()=>{H&&(async()=>{z(!0);try{let e=(await (0,i.UL)(t,H)).filter(e=>f.has(e.role));e.length>0&&console.log("[SuperadminStaff] Sample staff member from backend:",{id:e[0].id,email:e[0].email,fullName:e[0].fullName,firstName:e[0].firstName,lastName:e[0].lastName,phone:e[0].phone,phoneNumber:e[0].phoneNumber,salaryAmount:e[0].salaryAmount,salaryPeriod:e[0].salaryPeriod,allKeys:Object.keys(e[0])}),W(e)}catch(e){console.error("[SuperadminStaff] Failed to load staff",e)}finally{z(!1)}})()},[t,H]),(0,r.useEffect)(()=>{H&&(0,i.Pz)(t,H).then(e=>{T(e)}).catch(e=>{console.error("[SuperadminStaff] Failed to load branches for lookup",e)})},[t,H]);let Q=()=>{g(d),M(null)},V=()=>{j(u),R(null),A(null)},Y=()=>{C||(x(!1),Q())},Z=e=>{let a="",t="";if(e.firstName&&e.lastName)a=e.firstName,t=e.lastName;else if(e.fullName){let l=e.fullName.trim().split(/\s+/);a=l[0]||"",t=l.slice(1).join(" ")||""}let l="ROLE_WAITER"===e.role?"Waiter":"Cleaner",r=e.salaryPeriod?e.salaryPeriod.charAt(0)+e.salaryPeriod.slice(1).toLowerCase():"Monthly";j({staffType:l,firstName:a,lastName:t,phoneNumber:e.phoneNumber||e.phone||"",salary:null!=e.salaryAmount?String(e.salaryAmount):"",salaryCycle:r,branchId:e.branchId?String(e.branchId):""}),A(e.email),y(!0)},$=()=>{S||(y(!1),V())},G=async e=>{if(e.preventDefault(),M(null),!H){M("Restaurant ID is required.");return}let a=v.branchId?Number(v.branchId):null;if(!a||isNaN(a)||a<=0){M("Please select a valid branch.");return}E(!0);try{let e="Waiter"===v.staffType?"ROLE_WAITER":"ROLE_KITCHEN",l=v.salaryCycle.toUpperCase(),r=Number(parseFloat(v.salary).toFixed(2));if(isNaN(r)||r<=0)throw Error("Salary must be a positive number.");let s=v.email.trim().toLowerCase();if(!s)throw Error("Email is required.");let n=v.phoneNumber.trim();if(!n)throw Error("Phone number is required.");let d={email:s,role:e,firstName:v.firstName.trim(),lastName:v.lastName.trim(),phoneNumber:n,salaryAmount:r,salaryPeriod:l};console.log("[SuperadminStaff] Creating staff with payload:",{restaurantId:H,branchId:a,email:s,role:e,firstName:v.firstName.trim(),lastName:v.lastName.trim(),phoneNumber:n,salaryAmount:r,salaryPeriod:l}),await (0,o.jK)(t,H,a,d);try{let e=(await (0,i.UL)(t,H)).filter(e=>f.has(e.role));W(e)}catch(e){console.error("[SuperadminStaff] Failed to refresh staff list",e)}E(!1),x(!1),Q(),J("Staff member created successfully!","success")}catch(a){var l,r,s,n;console.error("[SuperadminStaff] create error",a);let e="Failed to create staff member.";(null==a?void 0:null===(r=a.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.message)?e=a.response.data.message:(null==a?void 0:null===(n=a.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.error)?e=a.response.data.error:(null==a?void 0:a.message)&&(e=a.message),M(e),J(e,"error"),E(!1)}},X=async e=>{if(e.preventDefault(),R(null),!I){R("No staff member selected for editing.");return}let a=w.branchId?Number(w.branchId):null;if(!a||isNaN(a)||a<=0){R("Please select a valid branch.");return}k(!0);try{let e="Waiter"===w.staffType?"ROLE_WAITER":"ROLE_KITCHEN",l=w.salaryCycle.toUpperCase(),r=Number(parseFloat(w.salary).toFixed(2));if(isNaN(r)||r<=0)throw Error("Salary must be a positive number.");let s=w.phoneNumber.trim();if(!s)throw Error("Phone number is required.");let n={role:e,firstName:w.firstName.trim(),lastName:w.lastName.trim(),phoneNumber:s,salaryAmount:r,salaryPeriod:l,branchId:a};await (0,o.Qf)(t,I,n);try{let e=(await (0,i.UL)(t,H)).filter(e=>f.has(e.role));W(e)}catch(e){console.error("[SuperadminStaff] Failed to refresh staff list",e)}k(!1),y(!1),V(),J("Staff member updated successfully!","success")}catch(a){var l,r,s,n;console.error("[SuperadminStaff] update error",a);let e="Failed to update staff member.";(null==a?void 0:null===(r=a.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.message)?e=a.response.data.message:(null==a?void 0:null===(n=a.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.error)?e=a.response.data.error:(null==a?void 0:a.message)&&(e=a.message),R(e),J(e,"error"),k(!1)}};return(0,l.jsxs)(l.Fragment,{children:[O&&(0,l.jsx)(p,{message:O.message,type:O.type}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Staff directory"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"View-only listing of all staff members across your restaurant branches."})]}),(0,l.jsx)("button",{type:"button",onClick:()=>{Q(),x(!0)},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700",children:"Add staff"})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-lg border border-slate-200 bg-white shadow-sm",children:B?(0,l.jsx)("div",{className:"px-6 py-8 text-center text-sm text-slate-500",children:"Loading staff members..."}):0===D.length?(0,l.jsx)("div",{className:"px-6 py-8 text-center text-sm text-slate-500",children:'No staff members found. Click "Add staff" to add your first staff member.'}):(0,l.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[(0,l.jsx)("thead",{className:"bg-slate-50",children:(0,l.jsxs)("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:[(0,l.jsx)("th",{className:"px-6 py-3",children:"EMAIL"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"FIRST NAME"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"LAST NAME"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"ROLE"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"BRANCH"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"PHONE"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"SALARY"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"SALARY CYCLE"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"ACTIONS"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-200 bg-white",children:D.map(e=>{let a=e.branchId?K.get(e.branchId):null,t=null,r=null;if(e.firstName&&e.lastName)t=e.firstName,r=e.lastName;else if(e.fullName){let a=e.fullName.trim().split(/\s+/);t=a[0]||null,r=a.slice(1).join(" ")||null}let s=e.phone||e.phoneNumber||null,n=null!=e.salaryAmount?Number(e.salaryAmount).toFixed(2):null,o=e.salaryPeriod||null;return(0,l.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900",children:e.email}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:t||"—"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:r||"—"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:e.role.replace("ROLE_","").toUpperCase()}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:a||"Unassigned"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:s||"—"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:n?"$".concat(n):"—"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:o?o.charAt(0)+o.slice(1).toLowerCase():"—"}),(0,l.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700",children:(0,l.jsx)("button",{type:"button",onClick:()=>Z(e),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"})})]},e.id)})})]})}),(0,l.jsx)(h,{title:"Add staff",open:b,onClose:Y,error:L,onSubmit:G,footer:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:Y,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",disabled:C,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",form:"staff-form",disabled:C,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:C?"Adding…":"Add staff"})]}),children:(0,l.jsxs)("form",{id:"staff-form",className:"space-y-4",onSubmit:G,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"email",children:["Email ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{id:"email",type:"email",required:!0,value:v.email,onChange:e=>g(a=>({...a,email:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"staff@example.com",disabled:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"branch",children:["Branch ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{id:"branch",required:!0,value:v.branchId,onChange:e=>g(a=>({...a,branchId:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:C||_,children:[(0,l.jsx)("option",{value:"",children:"Select a branch"}),P.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"staff-type",children:"Staff type"}),(0,l.jsx)("select",{id:"staff-type",required:!0,value:v.staffType,onChange:e=>g(a=>({...a,staffType:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:C,children:c.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"first-name",children:"First name"}),(0,l.jsx)("input",{id:"first-name",type:"text",required:!0,value:v.firstName,onChange:e=>g(a=>({...a,firstName:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter first name",disabled:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"last-name",children:"Last name"}),(0,l.jsx)("input",{id:"last-name",type:"text",required:!0,value:v.lastName,onChange:e=>g(a=>({...a,lastName:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter last name",disabled:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"phone-number",children:"Phone number"}),(0,l.jsx)("input",{id:"phone-number",type:"tel",required:!0,value:v.phoneNumber,onChange:e=>g(a=>({...a,phoneNumber:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1234567890",disabled:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"salary",children:"Salary"}),(0,l.jsx)("input",{id:"salary",type:"number",required:!0,min:"0",step:"0.01",value:v.salary,onChange:e=>g(a=>({...a,salary:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",disabled:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"salary-cycle",children:"Salary cycle"}),(0,l.jsx)("select",{id:"salary-cycle",required:!0,value:v.salaryCycle,onChange:e=>g(a=>({...a,salaryCycle:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:C,children:m.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})}),(0,l.jsx)(h,{title:"Edit staff",open:N,onClose:$,error:F,onSubmit:X,footer:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:$,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100",disabled:S,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",form:"edit-staff-form",disabled:S,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:S?"Updating…":"Update staff"})]}),children:(0,l.jsxs)("form",{id:"edit-staff-form",className:"space-y-4",onSubmit:X,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-branch",children:["Branch ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{id:"edit-branch",required:!0,value:w.branchId,onChange:e=>j(a=>({...a,branchId:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:S||_,children:[(0,l.jsx)("option",{value:"",children:"Select a branch"}),P.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-staff-type",children:"Staff type"}),(0,l.jsx)("select",{id:"edit-staff-type",required:!0,value:w.staffType,onChange:e=>j(a=>({...a,staffType:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:S,children:c.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-first-name",children:"First name"}),(0,l.jsx)("input",{id:"edit-first-name",type:"text",required:!0,value:w.firstName,onChange:e=>j(a=>({...a,firstName:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter first name",disabled:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-last-name",children:"Last name"}),(0,l.jsx)("input",{id:"edit-last-name",type:"text",required:!0,value:w.lastName,onChange:e=>j(a=>({...a,lastName:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter last name",disabled:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-phone-number",children:"Phone number"}),(0,l.jsx)("input",{id:"edit-phone-number",type:"tel",required:!0,value:w.phoneNumber,onChange:e=>j(a=>({...a,phoneNumber:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1234567890",disabled:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-salary",children:"Salary"}),(0,l.jsx)("input",{id:"edit-salary",type:"number",required:!0,min:"0",step:"0.01",value:w.salary,onChange:e=>j(a=>({...a,salary:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",disabled:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"edit-salary-cycle",children:"Salary cycle"}),(0,l.jsx)("select",{id:"edit-salary-cycle",required:!0,value:w.salaryCycle,onChange:e=>j(a=>({...a,salaryCycle:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:S,children:m.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})})]})]})}function h(e){let{title:a,open:t,onClose:r,children:s,error:n,footer:o,onSubmit:i}=e;return t?(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 px-4 py-4",children:(0,l.jsxs)("div",{className:"relative flex flex-col w-full max-w-lg max-h-[90vh] rounded-2xl bg-white shadow-2xl overflow-hidden",children:[n&&(0,l.jsx)("div",{className:"absolute top-0 left-0 right-0 z-[9999] rounded-t-2xl bg-red-50 border-b border-red-200 px-6 py-3 text-sm text-red-700",children:n}),(0,l.jsxs)("div",{className:"flex items-start justify-between gap-4 p-6 pb-4 flex-shrink-0",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:a}),(0,l.jsxs)("button",{type:"button",onClick:r,className:"rounded-full p-2 text-slate-500 transition hover:bg-slate-100 hover:text-slate-700",children:[(0,l.jsx)("span",{className:"sr-only",children:"Close"}),"\xd7"]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto px-6",style:{maxHeight:"70vh"},children:s}),o&&(0,l.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-slate-200",children:o})]})}):null}function p(e){let{message:a,type:t}=e;return(0,l.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:(0,l.jsx)("div",{className:"pointer-events-auto rounded-lg px-6 py-4 shadow-2xl transition-all duration-300 ".concat("success"===t?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("span",{className:"text-sm font-medium",children:a})})})})}},6997:function(e,a,t){"use strict";t.d(a,{Qf:function(){return d},T0:function(){return m},WQ:function(){return f},W_:function(){return c},Xn:function(){return u},Z6:function(){return o},aM:function(){return n},jK:function(){return i},l_:function(){return b}});var l=t(533),r=t(2911);let s=new Set(["ROLE_WAITER","ROLE_KITCHEN"]),n=async(e,a)=>{if(l.NA){console.log("[Mock] getBranch");let e=r.aE.find(e=>e.id===a);if(e)return e;throw Error("Branch not found")}let{data:t}=await e.get("/branches/".concat(a));return t},o=async(e,a)=>{if(l.NA)return console.log("[Mock] listStaff"),r.yv.filter(e=>e.branchId===a&&s.has(e.role));let{data:t}=await e.get("/users",{params:{branchId:a}});return(null!=t?t:[]).filter(e=>s.has(e.role))},i=async(e,a,t,s)=>{var n,o,i,d;if(l.NA){console.log("[Mock] createStaff");let e={id:Date.now(),email:s.email.toLowerCase(),role:s.role,restaurantId:a,branchId:t,fullName:"".concat(s.firstName||""," ").concat(s.lastName||"").trim()||"New Staff",firstName:s.firstName,lastName:s.lastName,phoneNumber:s.phoneNumber,salaryAmount:s.salaryAmount,salaryPeriod:s.salaryPeriod};return r.yv.push(e),e}let u={email:s.email.toLowerCase(),role:s.role,restaurantId:a,branchId:t};if(s.password&&(u.password=s.password),(null===(n=s.firstName)||void 0===n?void 0:n.trim())||(null===(o=s.lastName)||void 0===o?void 0:o.trim())){let e=(null===(i=s.firstName)||void 0===i?void 0:i.trim())||"",a=(null===(d=s.lastName)||void 0===d?void 0:d.trim())||"";u.fullName="".concat(e," ").concat(a).trim()}void 0!==s.phoneNumber&&null!==s.phoneNumber&&(u.phoneNumber=s.phoneNumber),void 0!==s.salaryAmount&&null!==s.salaryAmount&&(u.salaryAmount=Number(s.salaryAmount)),void 0!==s.salaryPeriod&&null!==s.salaryPeriod&&(u.salaryPeriod=s.salaryPeriod);let{data:c}=await e.post("/users",u);return c},d=async(e,a,t)=>{if(l.NA){console.log("[Mock] updateStaff");let e=r.yv.find(e=>e.email.toLowerCase()===a.toLowerCase());if(e)return t.role&&(e.role=t.role),t.firstName&&(e.firstName=t.firstName),t.lastName&&(e.lastName=t.lastName),(t.firstName||t.lastName)&&(e.fullName="".concat(t.firstName||e.firstName||""," ").concat(t.lastName||e.lastName||"").trim()),void 0!==t.phoneNumber&&(e.phoneNumber=t.phoneNumber),void 0!==t.salaryAmount&&(e.salaryAmount=t.salaryAmount),void 0!==t.salaryPeriod&&(e.salaryPeriod=t.salaryPeriod),void 0!==t.branchId&&(e.branchId=t.branchId),e;throw Error("Staff not found")}let s={};if(t.role&&(s.role=t.role),t.password&&(s.password=t.password),void 0!==t.firstName||void 0!==t.lastName){var n,o;let e=(null===(n=t.firstName)||void 0===n?void 0:n.trim())||"",a=(null===(o=t.lastName)||void 0===o?void 0:o.trim())||"";e&&(s.firstName=e),a&&(s.lastName=a),(e||a)&&(s.fullName="".concat(e," ").concat(a).trim())}void 0!==t.phoneNumber&&null!==t.phoneNumber&&(s.phoneNumber=t.phoneNumber),void 0!==t.salaryAmount&&null!==t.salaryAmount&&(s.salaryAmount=Number(t.salaryAmount)),void 0!==t.salaryPeriod&&null!==t.salaryPeriod&&(s.salaryPeriod=t.salaryPeriod),void 0!==t.branchId&&null!==t.branchId&&(s.branchId=t.branchId);let{data:i}=await e.patch("/users/".concat(encodeURIComponent(a.toLowerCase())),s);return i},u=async(e,a,t)=>{if(l.NA)return console.log("[Mock] listTables"),r.JF.filter(e=>e.branchId===t);let{data:s}=await e.get("/tables",{params:{restId:a}});return(null!=s?s:[]).filter(e=>e.branchId===t)},c=async(e,a,t,s)=>{var n,o,i,d,u,c;if(l.NA){console.log("[Mock] createTable");let e={id:Date.now(),restaurantId:a,branchId:t,name:null!==(n=s.name)&&void 0!==n?n:"New Table",tableNumber:null!==(o=s.tableNumber)&&void 0!==o?o:null,seatCount:null!==(i=s.seatCount)&&void 0!==i?i:null,active:!0,qrCode:"QR-".concat(Date.now())};return r.JF.push(e),e}let{data:m}=await e.post("/tables",{restaurantId:a,branchId:t,name:null!==(d=s.name)&&void 0!==d?d:"",tableNumber:null!==(u=s.tableNumber)&&void 0!==u?u:null,seatCount:null!==(c=s.seatCount)&&void 0!==c?c:null});return m},m=async(e,a,t)=>{var s,n,o,i;if(l.NA){console.log("[Mock] updateTable");let e=r.JF.find(e=>e.id===a);if(e)return void 0!==t.name&&(e.name=null!==(s=t.name)&&void 0!==s?s:""),void 0!==t.tableNumber&&(e.tableNumber=t.tableNumber),void 0!==t.seatCount&&(e.seatCount=t.seatCount),e;throw Error("Table not found")}let d={name:null!==(n=t.name)&&void 0!==n?n:"",tableNumber:null!==(o=t.tableNumber)&&void 0!==o?o:null,seatCount:null!==(i=t.seatCount)&&void 0!==i?i:null};void 0!==t.restaurantId&&(d.restaurantId=t.restaurantId),void 0!==t.branchId&&(d.branchId=t.branchId);let{data:u}=await e.put("/tables/".concat(a),d);return u},f=async(e,a)=>{if(l.NA){console.log("[Mock] deleteTable");let e=r.JF.findIndex(e=>e.id===a);-1!==e&&r.JF.splice(e,1);return}await e.delete("/tables/".concat(a))},b=async(e,a)=>{if(l.NA)return console.log("[Mock] listMenuItems"),r.LE.filter(e=>e.restaurantId===a);let{data:t}=await e.get("/menu/admin/all",{params:{restId:a}});return null!=t?t:[]}},620:function(e,a,t){"use strict";t.d(a,{$6:function(){return c},NA:function(){return u},Pz:function(){return o},Qj:function(){return i},RZ:function(){return h},UL:function(){return x},Vz:function(){return n},aq:function(){return b},jP:function(){return p},o_:function(){return d},uV:function(){return f},zu:function(){return m}});var l=t(533),r=t(2911);let s=e=>encodeURIComponent(e.toLowerCase()),n=async(e,a)=>{if(l.NA)return console.log("[Mock] getRestaurant"),r.Vu;let{data:t}=await e.get("/restaurants/".concat(a));return t},o=async(e,a)=>{if(l.NA)return console.log("[Mock] listBranches"),r.aE.filter(e=>e.restaurantId===a);let{data:t}=await e.get("/restaurants/".concat(a,"/branches"));return null!=t?t:[]},i=async(e,a,t)=>{if(l.NA){var s;console.log("[Mock] createBranch");let e={id:Date.now(),restaurantId:a,name:t.name,adminUserId:null!==(s=t.adminUserId)&&void 0!==s?s:null};return r.aE.push(e),e}let n={name:t.name,restaurantId:a};void 0!==t.adminUserId&&null!==t.adminUserId&&(n.adminUserId=t.adminUserId);let{data:o}=await e.post("/restaurants/".concat(a,"/branches"),n);return o},d=async(e,a,t)=>{if(l.NA){console.log("[Mock] updateBranch");let e=r.aE.find(e=>e.id===a);if(e)return t.name&&(e.name=t.name),void 0!==t.adminUserId&&(e.adminUserId=t.adminUserId),e;throw Error("Branch not found")}let{data:s}=await e.put("/branches/".concat(a),t);return s},u=async(e,a)=>{if(l.NA){console.log("[Mock] deleteBranch");let e=r.aE.findIndex(e=>e.id===a);-1!==e&&r.aE.splice(e,1);return}await e.delete("/branches/".concat(a))},c=async(e,a,t)=>{if(l.NA){console.log("[Mock] assignAdminToBranch");let e=r.aE.find(e=>e.id===a);e&&(e.adminUserId=t);return}await e.post("/branches/".concat(a,"/assign-admin"),{adminUserId:t})},m=async(e,a)=>{if(l.NA)return console.log("[Mock] listAdminsForRestaurant"),r.yv.filter(e=>e.restaurantId===a&&"ROLE_ADMIN"===e.role);let{data:t}=await e.get("/users",{params:{restaurantId:a}});return(null!=t?t:[]).filter(e=>"ROLE_ADMIN"===e.role)},f=async(e,a,t)=>{if(l.NA){var s;console.log("[Mock] createAdmin");let e={id:Date.now(),email:t.email.toLowerCase(),role:"ROLE_ADMIN",restaurantId:a,branchId:null!==(s=t.branchId)&&void 0!==s?s:null,fullName:"New Admin"};return r.yv.push(e),e}let{data:n}=await e.post("/superadmin/users",{email:t.email.toLowerCase(),password:t.password,role:"BRANCH_MANAGER",restaurantId:a,...void 0!==t.branchId&&null!==t.branchId?{branchId:t.branchId}:{}});return n},b=async(e,a,t)=>{if(l.NA){console.log("[Mock] updateAdmin");let e=r.yv.find(e=>e.email.toLowerCase()===a.toLowerCase());if(e)return void 0!==t.branchId&&(e.branchId=t.branchId),e;throw Error("Admin not found")}let{data:n}=await e.patch("/users/".concat(s(a)),{...t.password?{password:t.password}:{},...void 0!==t.branchId?{branchId:t.branchId}:{}});return n},h=async(e,a,t)=>{if(l.NA){var s;console.log("[Mock] resetAdminPassword");let e=r.yv.find(e=>e.id===a);return{status:"success",message:"Password reset successfully (mock)",newPassword:t,adminEmail:null!==(s=null==e?void 0:e.email)&&void 0!==s?s:"admin@mock.com",adminUserId:a}}let{data:n}=await e.post("/superadmin/admins/".concat(a,"/reset-password"),{newPassword:t});return n},p=async(e,a)=>{if(l.NA){console.log("[Mock] deleteAdmin");let e=r.yv.findIndex(e=>e.email.toLowerCase()===a.toLowerCase());-1!==e&&r.yv.splice(e,1);return}await e.delete("/users/".concat(s(a)))},x=async(e,a)=>{if(l.NA)return console.log("[Mock] listRestaurantStaff"),r.yv.filter(e=>e.restaurantId===a&&"ROLE_ADMIN"!==e.role&&"ROLE_SUPERADMIN"!==e.role);let{data:t}=await e.get("/users",{params:{restaurantId:a}});return(null!=t?t:[]).filter(e=>"ROLE_ADMIN"!==e.role)}}},function(e){e.O(0,[301,842,971,117,744],function(){return e(e.s=1e3)}),_N_E=e.O()}]);