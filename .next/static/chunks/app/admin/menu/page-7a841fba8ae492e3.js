(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{813:function(e,t,a){Promise.resolve().then(a.bind(a,4664))},4664:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(7437),l=a(2265),n=a(8734),s=a(2285),o=a(6997);function i(){var e;let{user:t}=(0,n.a)(),a=(0,s.h)(),[i,u]=(0,l.useState)([]),[d,m]=(0,l.useState)(!0),[c,N]=(0,l.useState)(null),[f,b]=(0,l.useState)(""),h=null!==(e=null==t?void 0:t.restaurantId)&&void 0!==e?e:null;(0,l.useEffect)(()=>{let e=!1,r=async()=>{if(!h){u([]),m(!1),N("Your profile is missing a restaurant assignment.");return}m(!0),N(null);try{let t=await (0,o.l_)(a,h);e||u(t)}catch(t){console.error("[AdminMenu] load error",t),e||N("Failed to load menu items.")}finally{e||m(!1)}};return(null==t?void 0:t.role)==="ROLE_ADMIN"?r():m(!1),()=>{e=!0}},[a,h,t]);let v=(0,l.useMemo)(()=>{let e=f.trim().toLowerCase();return e?i.filter(t=>{var a,r;return t.name.toLowerCase().includes(e)||(null!==(a=t.description)&&void 0!==a?a:"").toLowerCase().includes(e)||(null!==(r=t.category)&&void 0!==r?r:"").toLowerCase().includes(e)}):i},[i,f]);return(null==t?void 0:t.role)!=="ROLE_ADMIN"?(0,r.jsx)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-6 py-4 text-sm text-amber-900",children:"Access restricted to Admin role."}):h?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Menu"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Review the current menu catalog configured by your SuperAdmin. Menu items are read-only."})]}),c?(0,r.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:c}):null,(0,r.jsxs)("section",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:"Menu items"}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:[i.length," ",1===i.length?"item":"items"," available"]})]}),(0,r.jsx)("input",{type:"search",value:f,onChange:e=>b(e.target.value),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none sm:w-64",placeholder:"Search by name or category…"})]}),d?(0,r.jsx)("p",{className:"mt-4 text-sm text-slate-500",children:"Loading menu items…"}):0===v.length?(0,r.jsx)("p",{className:"mt-4 text-sm text-slate-500",children:"No menu items match your search."}):(0,r.jsx)("ul",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:v.map(e=>{var t;return(0,r.jsxs)("li",{className:"rounded-lg border border-slate-200 px-3 py-2 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,r.jsxs)("span",{className:"text-xs font-medium text-slate-500",children:["$",(null!==(t=e.priceCents)&&void 0!==t?t:0)/100]})]}),e.category?(0,r.jsx)("p",{className:"mt-1 text-xs uppercase tracking-wide text-blue-600",children:e.category}):null,e.description?(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-600",children:e.description}):null,(0,r.jsx)("p",{className:"mt-2 text-[11px] font-medium text-slate-500",children:e.isAvailable?"Available":"Unavailable"})]},e.id)})})]})]}):(0,r.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 px-6 py-4 text-sm text-red-700",children:"Your administrator profile is missing a restaurant assignment. Please contact your SuperAdmin."})}},6997:function(e,t,a){"use strict";a.d(t,{Qf:function(){return u},T0:function(){return c},WQ:function(){return N},W_:function(){return m},Xn:function(){return d},Z6:function(){return o},aM:function(){return s},jK:function(){return i},l_:function(){return f}});var r=a(533),l=a(2911);let n=new Set(["ROLE_WAITER","ROLE_KITCHEN"]),s=async(e,t)=>{if(r.NA){console.log("[Mock] getBranch");let e=l.aE.find(e=>e.id===t);if(e)return e;throw Error("Branch not found")}let{data:a}=await e.get("/branches/".concat(t));return a},o=async(e,t)=>{if(r.NA)return console.log("[Mock] listStaff"),l.yv.filter(e=>e.branchId===t&&n.has(e.role));let{data:a}=await e.get("/users",{params:{branchId:t}});return(null!=a?a:[]).filter(e=>n.has(e.role))},i=async(e,t,a,n)=>{var s,o,i,u;if(r.NA){console.log("[Mock] createStaff");let e={id:Date.now(),email:n.email.toLowerCase(),role:n.role,restaurantId:t,branchId:a,fullName:"".concat(n.firstName||""," ").concat(n.lastName||"").trim()||"New Staff",firstName:n.firstName,lastName:n.lastName,phoneNumber:n.phoneNumber,salaryAmount:n.salaryAmount,salaryPeriod:n.salaryPeriod};return l.yv.push(e),e}let d={email:n.email.toLowerCase(),role:n.role,restaurantId:t,branchId:a};if(n.password&&(d.password=n.password),(null===(s=n.firstName)||void 0===s?void 0:s.trim())||(null===(o=n.lastName)||void 0===o?void 0:o.trim())){let e=(null===(i=n.firstName)||void 0===i?void 0:i.trim())||"",t=(null===(u=n.lastName)||void 0===u?void 0:u.trim())||"";d.fullName="".concat(e," ").concat(t).trim()}void 0!==n.phoneNumber&&null!==n.phoneNumber&&(d.phoneNumber=n.phoneNumber),void 0!==n.salaryAmount&&null!==n.salaryAmount&&(d.salaryAmount=Number(n.salaryAmount)),void 0!==n.salaryPeriod&&null!==n.salaryPeriod&&(d.salaryPeriod=n.salaryPeriod);let{data:m}=await e.post("/users",d);return m},u=async(e,t,a)=>{if(r.NA){console.log("[Mock] updateStaff");let e=l.yv.find(e=>e.email.toLowerCase()===t.toLowerCase());if(e)return a.role&&(e.role=a.role),a.firstName&&(e.firstName=a.firstName),a.lastName&&(e.lastName=a.lastName),(a.firstName||a.lastName)&&(e.fullName="".concat(a.firstName||e.firstName||""," ").concat(a.lastName||e.lastName||"").trim()),void 0!==a.phoneNumber&&(e.phoneNumber=a.phoneNumber),void 0!==a.salaryAmount&&(e.salaryAmount=a.salaryAmount),void 0!==a.salaryPeriod&&(e.salaryPeriod=a.salaryPeriod),void 0!==a.branchId&&(e.branchId=a.branchId),e;throw Error("Staff not found")}let n={};if(a.role&&(n.role=a.role),a.password&&(n.password=a.password),void 0!==a.firstName||void 0!==a.lastName){var s,o;let e=(null===(s=a.firstName)||void 0===s?void 0:s.trim())||"",t=(null===(o=a.lastName)||void 0===o?void 0:o.trim())||"";e&&(n.firstName=e),t&&(n.lastName=t),(e||t)&&(n.fullName="".concat(e," ").concat(t).trim())}void 0!==a.phoneNumber&&null!==a.phoneNumber&&(n.phoneNumber=a.phoneNumber),void 0!==a.salaryAmount&&null!==a.salaryAmount&&(n.salaryAmount=Number(a.salaryAmount)),void 0!==a.salaryPeriod&&null!==a.salaryPeriod&&(n.salaryPeriod=a.salaryPeriod),void 0!==a.branchId&&null!==a.branchId&&(n.branchId=a.branchId);let{data:i}=await e.patch("/users/".concat(encodeURIComponent(t.toLowerCase())),n);return i},d=async(e,t,a)=>{if(r.NA)return console.log("[Mock] listTables"),l.JF.filter(e=>e.branchId===a);let{data:n}=await e.get("/tables",{params:{restId:t}});return(null!=n?n:[]).filter(e=>e.branchId===a)},m=async(e,t,a,n)=>{var s,o,i,u,d,m;if(r.NA){console.log("[Mock] createTable");let e={id:Date.now(),restaurantId:t,branchId:a,name:null!==(s=n.name)&&void 0!==s?s:"New Table",tableNumber:null!==(o=n.tableNumber)&&void 0!==o?o:null,seatCount:null!==(i=n.seatCount)&&void 0!==i?i:null,active:!0,qrCode:"QR-".concat(Date.now())};return l.JF.push(e),e}let{data:c}=await e.post("/tables",{restaurantId:t,branchId:a,name:null!==(u=n.name)&&void 0!==u?u:"",tableNumber:null!==(d=n.tableNumber)&&void 0!==d?d:null,seatCount:null!==(m=n.seatCount)&&void 0!==m?m:null});return c},c=async(e,t,a)=>{var n,s,o,i;if(r.NA){console.log("[Mock] updateTable");let e=l.JF.find(e=>e.id===t);if(e)return void 0!==a.name&&(e.name=null!==(n=a.name)&&void 0!==n?n:""),void 0!==a.tableNumber&&(e.tableNumber=a.tableNumber),void 0!==a.seatCount&&(e.seatCount=a.seatCount),e;throw Error("Table not found")}let u={name:null!==(s=a.name)&&void 0!==s?s:"",tableNumber:null!==(o=a.tableNumber)&&void 0!==o?o:null,seatCount:null!==(i=a.seatCount)&&void 0!==i?i:null};void 0!==a.restaurantId&&(u.restaurantId=a.restaurantId),void 0!==a.branchId&&(u.branchId=a.branchId);let{data:d}=await e.put("/tables/".concat(t),u);return d},N=async(e,t)=>{if(r.NA){console.log("[Mock] deleteTable");let e=l.JF.findIndex(e=>e.id===t);-1!==e&&l.JF.splice(e,1);return}await e.delete("/tables/".concat(t))},f=async(e,t)=>{if(r.NA)return console.log("[Mock] listMenuItems"),l.LE.filter(e=>e.restaurantId===t);let{data:a}=await e.get("/menu/admin/all",{params:{restId:t}});return null!=a?a:[]}}},function(e){e.O(0,[301,842,971,117,744],function(){return e(e.s=813)}),_N_E=e.O()}]);