"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{2911:function(e,t,a){a.d(t,{Ho:function(){return h},JF:function(){return o},KZ:function(){return I},LE:function(){return s},Vu:function(){return r},aE:function(){return n},yv:function(){return i}});let r={id:1,name:"Cozy Corner Caf\xe9",ownerSuperAdminId:1,timezone:"Europe/Baku",currency:"AZN",settingsJson:JSON.stringify({theme:"warm",logoUrl:"https://images.unsplash.com/photo-1559305616-3f99cd43e353?w=200&h=200&fit=crop"})},n=[{id:1,restaurantId:1,name:"Downtown Branch",adminUserId:2},{id:2,restaurantId:1,name:"Mall Branch",adminUserId:3}],i=[{id:1,email:"superadmin@cozycorner.com",role:"ROLE_SUPERADMIN",restaurantId:1,branchId:null,fullName:"Ali Mammadov",firstName:"Ali",lastName:"Mammadov",phone:"+994501234567"},{id:2,email:"admin@downtown.cozycorner.com",role:"ROLE_ADMIN",restaurantId:1,branchId:1,fullName:"Leyla Huseynova",firstName:"Leyla",lastName:"Huseynova",phone:"+994502345678"},{id:3,email:"kitchen1@cozycorner.com",role:"ROLE_KITCHEN",restaurantId:1,branchId:1,fullName:"Rashad Aliyev",firstName:"Rashad",lastName:"Aliyev",phone:"+994503456789",salaryAmount:800,salaryPeriod:"MONTHLY"},{id:4,email:"waiter1@cozycorner.com",role:"ROLE_WAITER",restaurantId:1,branchId:1,fullName:"Aysel Hasanova",firstName:"Aysel",lastName:"Hasanova",phone:"+994504567890",salaryAmount:600,salaryPeriod:"MONTHLY"},{id:5,email:"waiter2@cozycorner.com",role:"ROLE_WAITER",restaurantId:1,branchId:1,fullName:"Farid Guliyev",firstName:"Farid",lastName:"Guliyev",phone:"+994505678901",salaryAmount:50,salaryPeriod:"DAILY"}],s=[{id:1,restaurantId:1,name:"Hummus with Pita",description:"Creamy homemade hummus served with warm pita bread and olive oil drizzle",priceCents:890,category:"Appetizers",isAvailable:!0},{id:2,restaurantId:1,name:"Bruschetta",description:"Toasted bread topped with fresh tomatoes, basil, garlic, and balsamic glaze",priceCents:750,category:"Appetizers",isAvailable:!0},{id:3,restaurantId:1,name:"Soup of the Day",description:"Chef's daily special soup served with crusty bread",priceCents:650,category:"Appetizers",isAvailable:!0},{id:4,restaurantId:1,name:"Caesar Salad",description:"Crisp romaine lettuce, parmesan, croutons, and house-made Caesar dressing",priceCents:1100,category:"Appetizers",isAvailable:!0},{id:5,restaurantId:1,name:"Grilled Salmon",description:"Fresh Atlantic salmon with lemon butter sauce, served with seasonal vegetables",priceCents:2450,category:"Main Course",isAvailable:!0},{id:6,restaurantId:1,name:"Beef Steak",description:"250g premium beef steak cooked to your preference, with mashed potatoes",priceCents:2990,category:"Main Course",isAvailable:!0},{id:7,restaurantId:1,name:"Chicken Alfredo Pasta",description:"Creamy fettuccine pasta with grilled chicken breast and parmesan",priceCents:1650,category:"Main Course",isAvailable:!0},{id:8,restaurantId:1,name:"Vegetable Risotto",description:"Creamy arborio rice with seasonal vegetables and parmesan",priceCents:1450,category:"Main Course",isAvailable:!0},{id:9,restaurantId:1,name:"Lamb Chops",description:"Herb-crusted lamb chops with rosemary jus and roasted potatoes",priceCents:3250,category:"Main Course",isAvailable:!1},{id:10,restaurantId:1,name:"Classic Burger",description:"Angus beef patty with lettuce, tomato, cheese, and special sauce",priceCents:1450,category:"Burgers",isAvailable:!0},{id:11,restaurantId:1,name:"Chicken Club Sandwich",description:"Grilled chicken, bacon, avocado, lettuce, and mayo on toasted bread",priceCents:1250,category:"Burgers",isAvailable:!0},{id:12,restaurantId:1,name:"Fresh Orange Juice",description:"Freshly squeezed orange juice",priceCents:450,category:"Drinks",isAvailable:!0},{id:13,restaurantId:1,name:"Cappuccino",description:"Double espresso with steamed milk and foam",priceCents:550,category:"Drinks",isAvailable:!0},{id:14,restaurantId:1,name:"Iced Latte",description:"Cold espresso with milk over ice",priceCents:600,category:"Drinks",isAvailable:!0},{id:15,restaurantId:1,name:"Lemonade",description:"House-made fresh lemonade with mint",priceCents:400,category:"Drinks",isAvailable:!0},{id:16,restaurantId:1,name:"Chocolate Lava Cake",description:"Warm chocolate cake with molten center, served with vanilla ice cream",priceCents:850,category:"Desserts",isAvailable:!0},{id:17,restaurantId:1,name:"Tiramisu",description:"Classic Italian dessert with espresso-soaked ladyfingers and mascarpone",priceCents:750,category:"Desserts",isAvailable:!0},{id:18,restaurantId:1,name:"Cheesecake",description:"New York style cheesecake with berry compote",priceCents:800,category:"Desserts",isAvailable:!0}],o=[{id:1,restaurantId:1,branchId:1,name:"Window Seat 1",tableNumber:1,seatCount:2,active:!0,qrCode:"QR-TABLE-001"},{id:2,restaurantId:1,branchId:1,name:"Window Seat 2",tableNumber:2,seatCount:2,active:!0,qrCode:"QR-TABLE-002"},{id:3,restaurantId:1,branchId:1,name:"Center Table",tableNumber:3,seatCount:4,active:!0,qrCode:"QR-TABLE-003"},{id:4,restaurantId:1,branchId:1,name:"Family Booth",tableNumber:4,seatCount:6,active:!0,qrCode:"QR-TABLE-004"},{id:5,restaurantId:1,branchId:1,name:"Terrace 1",tableNumber:5,seatCount:4,active:!0,qrCode:"QR-TABLE-005"},{id:6,restaurantId:1,branchId:1,name:"VIP Room",tableNumber:6,seatCount:8,active:!1,qrCode:"QR-TABLE-006"}],d=new Date,u=new Date(d.getTime()-6e5),l=new Date(d.getTime()-12e5),c=new Date(d.getTime()-18e5),m=new Date(d.getTime()-36e5),I=[{id:1,restaurantId:1,branchId:1,tableId:1,tableName:"Window Seat 1",guestSessionId:"session-001",status:"ORDERED",items:[{id:1,menuItemId:1,qty:1,priceCents:890,menuItemName:"Hummus with Pita"},{id:2,menuItemId:5,qty:1,priceCents:2450,menuItemName:"Grilled Salmon"},{id:3,menuItemId:13,qty:2,priceCents:550,menuItemName:"Cappuccino"}],totalCents:4440,createdAt:u.toISOString(),updatedAt:u.toISOString(),notes:"No onions please"},{id:2,restaurantId:1,branchId:1,tableId:3,tableName:"Center Table",guestSessionId:"session-002",status:"PREPARING",items:[{id:4,menuItemId:10,qty:2,priceCents:1450,menuItemName:"Classic Burger"},{id:5,menuItemId:12,qty:2,priceCents:450,menuItemName:"Fresh Orange Juice"}],totalCents:3800,createdAt:l.toISOString(),updatedAt:u.toISOString()},{id:3,restaurantId:1,branchId:1,tableId:4,tableName:"Family Booth",guestSessionId:"session-003",status:"PREPARED_WAITING",items:[{id:6,menuItemId:7,qty:3,priceCents:1650,menuItemName:"Chicken Alfredo Pasta"},{id:7,menuItemId:4,qty:2,priceCents:1100,menuItemName:"Caesar Salad"},{id:8,menuItemId:16,qty:2,priceCents:850,menuItemName:"Chocolate Lava Cake"},{id:9,menuItemId:15,qty:4,priceCents:400,menuItemName:"Lemonade"}],totalCents:9550,createdAt:c.toISOString(),updatedAt:u.toISOString()},{id:4,restaurantId:1,branchId:1,tableId:2,tableName:"Window Seat 2",guestSessionId:"session-004",status:"SERVED",items:[{id:10,menuItemId:6,qty:1,priceCents:2990,menuItemName:"Beef Steak"},{id:11,menuItemId:14,qty:1,priceCents:600,menuItemName:"Iced Latte"}],totalCents:3590,createdAt:m.toISOString(),updatedAt:c.toISOString(),notes:"Medium-rare steak"},{id:5,restaurantId:1,branchId:1,tableId:5,tableName:"Terrace 1",guestSessionId:"session-005",status:"COMPLETED",items:[{id:12,menuItemId:2,qty:1,priceCents:750,menuItemName:"Bruschetta"},{id:13,menuItemId:17,qty:2,priceCents:750,menuItemName:"Tiramisu"},{id:14,menuItemId:13,qty:2,priceCents:550,menuItemName:"Cappuccino"}],totalCents:3350,createdAt:m.toISOString(),updatedAt:c.toISOString()}],p=[];function h(e,t){let a={id:Date.now(),guestSessionId:"mock-session-".concat(Date.now()),tableId:t,branchId:e,createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+144e5).toISOString()};return p.push(a),a}},2285:function(e,t,a){a.d(t,{h:function(){return d}});var r=a(2265),n=a(3464),i=a(533);let s=(e,t)=>{let a=n.Z.create({baseURL:i.CT,headers:{"Content-Type":"application/json"}});return a.interceptors.request.use(t=>{if(e){var a;t.headers=null!==(a=t.headers)&&void 0!==a?a:{},t.headers.Authorization="Bearer ".concat(e)}return t}),a.interceptors.response.use(e=>e,async e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&t&&await t(),Promise.reject(e)}),a};var o=a(8734);let d=()=>{let{token:e,logout:t}=(0,o.a)();return(0,r.useMemo)(()=>s(null!=e?e:void 0,()=>{t()}),[e,t])}},8734:function(e,t,a){a.d(t,{a:function(){return n}});var r=a(3896);let n=()=>(0,r.E)()},533:function(e,t,a){a.d(t,{CT:function(){return i},eg:function(){return o},NA:function(){return s}});var r,n=a(257);let i="http://localhost:8080/api".replace(/\/+$/,"")||(null===(r=n.env.NEXT_PUBLIC_API_URL)||void 0===r?void 0:r.replace(/\/+$/,""))||"http://localhost:8080/api",s=!0,o={ROLE_SUPERADMIN:"/superadmin/dashboard",ROLE_ADMIN:"/admin/dashboard",ROLE_WAITER:"/login",ROLE_KITCHEN:"/login"}},3896:function(e,t,a){a.d(t,{E:function(){return l},H:function(){return u}});var r=a(7437),n=a(2265),i=a(9376),s=a(533);let o=(0,n.createContext)(void 0),d=e=>{var t;return null!==(t=s.eg[e])&&void 0!==t?t:"/admin/dashboard"};function u(e){let{children:t}=e,a=(0,i.useRouter)(),[s,u]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[m,I]=(0,n.useState)(!0),p=(0,n.useCallback)(e=>{if(!e||!e.user||!e.token||"ROLE_WAITER"===e.user.role){u(null),c(null);return}u({...e.user,permissions:Array.isArray(e.user.permissions)?e.user.permissions:[]}),c(e.token)},[]),h=(0,n.useCallback)(async()=>{try{I(!0);let e=await fetch("/api/auth/session",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch session");let t=await e.json();p(t)}catch(e){console.error("[Auth] session error",e),u(null),c(null)}finally{I(!1)}},[p]);(0,n.useEffect)(()=>{h()},[h]);let C=(0,n.useCallback)(async e=>{var t,r;let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(403===n.status){let e=await n.json();throw Error(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Login restricted for this role")}if(!n.ok){let e=await n.json().catch(()=>void 0);throw Error(null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"Login failed")}let i=await n.json();if(!i.user||!i.token)throw Error("Invalid login response");if("ROLE_WAITER"===i.user.role)throw Error("Login not permitted for this role.");return p(i),a.replace(d(i.user.role)),i.user},[p,a]),b=(0,n.useCallback)(async()=>{await fetch("/api/auth/logout",{method:"POST"}),u(null),c(null),a.replace("/login")},[a]),y=(0,n.useMemo)(()=>({user:s,token:l,loading:m,login:C,logout:b,refreshSession:h}),[s,l,m,C,b,h]);return(0,r.jsx)(o.Provider,{value:y,children:t})}let l=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}}}]);