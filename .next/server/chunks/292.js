"use strict";exports.id=292,exports.ids=[292],exports.modules={7239:(e,a,r)=>{r.d(a,{I:()=>b});var t=r(326),s=r(7577),l=r(5047),n=r(4131),o=r(434),i=r(2591);let m={ROLE_SUPERADMIN:[{label:"Dashboard",href:"/superadmin/dashboard"},{label:"Branches",href:"/superadmin/branches"},{label:"Admins",href:"/superadmin/admins"},{label:"Staff",href:"/superadmin/staff"}],ROLE_ADMIN:[{label:"Dashboard",href:"/admin/dashboard"},{label:"Staff",href:"/admin/staff"},{label:"Tables",href:"/admin/tables"},{label:"Menu",href:"/admin/menu"},{label:"Kitchen settings",href:"/admin/kitchen"}],ROLE_WAITER:[],ROLE_KITCHEN:[{label:"Orders",href:"/kitchen/orders"}]},d=(e,a,r=!1)=>r?e===a:e===a||e.startsWith(`${a}/`);function u({isOpen:e,onClose:a}){let{user:r,logout:s}=(0,n.a)(),u=(0,l.usePathname)();if(!r)return null;let c=m[r.role]??[];return(0,t.jsxs)(t.Fragment,{children:[e&&t.jsx("div",{className:"fixed inset-0 z-20 bg-black/50 backdrop-blur-sm md:hidden",onClick:a}),(0,t.jsxs)("aside",{className:`
          fixed top-0 left-0 z-30 h-screen w-72 flex-col bg-white border-r border-warm-200 transition-transform duration-300 ease-in-out
          md:translate-x-0 md:static
          ${e?"translate-x-0":"-translate-x-full"}
        `,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-warm-100",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-warm-400 font-bold",children:"Signed in as"}),t.jsx("p",{className:"mt-1 text-lg font-bold text-warm-900 truncate max-w-[200px]",title:r.email,children:r.email}),t.jsx("p",{className:"text-sm capitalize text-warm-500",children:r.role.replace("ROLE_","").toLowerCase()})]}),t.jsx("button",{onClick:a,className:"md:hidden p-2 text-warm-500 hover:bg-warm-100 rounded-lg",children:t.jsx(i.Z,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"px-6 py-2",children:(0,t.jsxs)("p",{className:"text-xs text-warm-400 font-medium",children:[r.restaurantName??`Restaurant #${r.restaurantId}`,r.branchId?` â€¢ Branch #${r.branchId}`:""]})}),t.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-1",children:c.map(e=>{let r=d(u,e.href,e.exact);return t.jsx(o.default,{href:e.href,onClick:()=>a(),className:`
                  flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200
                  ${r?"bg-primary-50 text-primary-700 shadow-sm":"text-warm-600 hover:bg-warm-50 hover:text-warm-900"}
                `,children:e.label},e.href)})}),t.jsx("div",{className:"p-4 border-t border-warm-100",children:t.jsx("button",{type:"button",onClick:()=>s(),className:"w-full flex items-center justify-center gap-2 rounded-xl border border-warm-200 px-4 py-2.5 text-sm font-semibold text-warm-700 transition-all hover:bg-warm-50 hover:text-red-600 hover:border-red-200 active:scale-95",children:"Sign out"})})]})]})}var c=r(7477);function b({allowedRoles:e,children:a}){(0,l.useRouter)();let{user:r,loading:o}=(0,n.a)(),[i,m]=(0,s.useState)(!1);return o||!r?t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-warm-50",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary-200 border-t-primary-600"}),t.jsx("div",{className:"text-sm font-medium text-warm-600",children:"Checking session..."})]})}):e.includes(r.role)?(0,t.jsxs)("div",{className:"flex min-h-screen bg-warm-50",children:[t.jsx(u,{isOpen:i,onClose:()=>m(!1)}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 transition-all duration-300",children:[(0,t.jsxs)("header",{className:"md:hidden flex items-center justify-between bg-white border-b border-warm-200 px-4 py-3 sticky top-0 z-20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>m(!0),className:"p-2 -ml-2 text-warm-600 hover:bg-warm-100 rounded-lg transition-colors",children:t.jsx(c.Z,{className:"w-6 h-6"})}),t.jsx("span",{className:"font-bold text-warm-900",children:"Cozy Corner"})]}),t.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-xs",children:r.email.charAt(0).toUpperCase()})]}),t.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:t.jsx("div",{className:"mx-auto max-w-7xl",children:a})})]})]}):null}},3916:(e,a,r)=>{r.d(a,{h:()=>i});var t=r(7577),s=r(4464),l=r(4820);let n=(e,a)=>{let r=s.Z.create({baseURL:l.CT,headers:{"Content-Type":"application/json"}});return r.interceptors.request.use(a=>(e&&(a.headers=a.headers??{},a.headers.Authorization=`Bearer ${e}`),a)),r.interceptors.response.use(e=>e,async e=>(e.response?.status===401&&a&&await a(),Promise.reject(e))),r};var o=r(4131);let i=()=>{let{token:e,logout:a}=(0,o.a)();return(0,t.useMemo)(()=>n(e??void 0,()=>{a()}),[e,a])}},4131:(e,a,r)=>{r.d(a,{a:()=>s});var t=r(7048);let s=()=>(0,t.E)()},926:(e,a,r)=>{r.d(a,{Qf:()=>i,T0:()=>u,WQ:()=>c,W_:()=>d,Xn:()=>m,Z6:()=>n,jK:()=>o});var t=r(4820),s=r(3107);let l=new Set(["ROLE_WAITER","ROLE_KITCHEN"]),n=async(e,a)=>{if(t.NA)return console.log("[Mock] listStaff"),s.yv.filter(e=>e.branchId===a&&l.has(e.role));let{data:r}=await e.get("/users",{params:{branchId:a}});return(r??[]).filter(e=>l.has(e.role))},o=async(e,a,r,l)=>{if(t.NA){console.log("[Mock] createStaff");let e={id:Date.now(),email:l.email.toLowerCase(),role:l.role,restaurantId:a,branchId:r,fullName:`${l.firstName||""} ${l.lastName||""}`.trim()||"New Staff",firstName:l.firstName,lastName:l.lastName,phoneNumber:l.phoneNumber,salaryAmount:l.salaryAmount,salaryPeriod:l.salaryPeriod};return s.yv.push(e),e}let n={email:l.email.toLowerCase(),role:l.role,restaurantId:a,branchId:r};if(l.password&&(n.password=l.password),l.firstName?.trim()||l.lastName?.trim()){let e=l.firstName?.trim()||"",a=l.lastName?.trim()||"";n.fullName=`${e} ${a}`.trim()}void 0!==l.phoneNumber&&null!==l.phoneNumber&&(n.phoneNumber=l.phoneNumber),void 0!==l.salaryAmount&&null!==l.salaryAmount&&(n.salaryAmount=Number(l.salaryAmount)),void 0!==l.salaryPeriod&&null!==l.salaryPeriod&&(n.salaryPeriod=l.salaryPeriod);let{data:o}=await e.post("/users",n);return o},i=async(e,a,r)=>{if(t.NA){console.log("[Mock] updateStaff");let e=s.yv.find(e=>e.email.toLowerCase()===a.toLowerCase());if(e)return r.role&&(e.role=r.role),r.firstName&&(e.firstName=r.firstName),r.lastName&&(e.lastName=r.lastName),(r.firstName||r.lastName)&&(e.fullName=`${r.firstName||e.firstName||""} ${r.lastName||e.lastName||""}`.trim()),void 0!==r.phoneNumber&&(e.phoneNumber=r.phoneNumber),void 0!==r.salaryAmount&&(e.salaryAmount=r.salaryAmount),void 0!==r.salaryPeriod&&(e.salaryPeriod=r.salaryPeriod),void 0!==r.branchId&&(e.branchId=r.branchId),e;throw Error("Staff not found")}let l={};if(r.role&&(l.role=r.role),r.password&&(l.password=r.password),void 0!==r.firstName||void 0!==r.lastName){let e=r.firstName?.trim()||"",a=r.lastName?.trim()||"";e&&(l.firstName=e),a&&(l.lastName=a),(e||a)&&(l.fullName=`${e} ${a}`.trim())}void 0!==r.phoneNumber&&null!==r.phoneNumber&&(l.phoneNumber=r.phoneNumber),void 0!==r.salaryAmount&&null!==r.salaryAmount&&(l.salaryAmount=Number(r.salaryAmount)),void 0!==r.salaryPeriod&&null!==r.salaryPeriod&&(l.salaryPeriod=r.salaryPeriod),void 0!==r.branchId&&null!==r.branchId&&(l.branchId=r.branchId);let{data:n}=await e.patch(`/users/${encodeURIComponent(a.toLowerCase())}`,l);return n},m=async(e,a,r)=>{if(t.NA)return console.log("[Mock] listTables"),s.JF.filter(e=>e.branchId===r);let{data:l}=await e.get("/tables",{params:{restId:a}});return(l??[]).filter(e=>e.branchId===r)},d=async(e,a,r,l)=>{if(t.NA){console.log("[Mock] createTable");let e={id:Date.now(),restaurantId:a,branchId:r,name:l.name??"New Table",tableNumber:l.tableNumber??null,seatCount:l.seatCount??null,active:!0,qrCode:`QR-${Date.now()}`};return s.JF.push(e),e}let{data:n}=await e.post("/tables",{restaurantId:a,branchId:r,name:l.name??"",tableNumber:l.tableNumber??null,seatCount:l.seatCount??null});return n},u=async(e,a,r)=>{if(t.NA){console.log("[Mock] updateTable");let e=s.JF.find(e=>e.id===a);if(e)return void 0!==r.name&&(e.name=r.name??""),void 0!==r.tableNumber&&(e.tableNumber=r.tableNumber),void 0!==r.seatCount&&(e.seatCount=r.seatCount),e;throw Error("Table not found")}let l={name:r.name??"",tableNumber:r.tableNumber??null,seatCount:r.seatCount??null};void 0!==r.restaurantId&&(l.restaurantId=r.restaurantId),void 0!==r.branchId&&(l.branchId=r.branchId);let{data:n}=await e.put(`/tables/${a}`,l);return n},c=async(e,a)=>{if(t.NA){console.log("[Mock] deleteTable");let e=s.JF.findIndex(e=>e.id===a);-1!==e&&s.JF.splice(e,1);return}await e.delete(`/tables/${a}`)}}};