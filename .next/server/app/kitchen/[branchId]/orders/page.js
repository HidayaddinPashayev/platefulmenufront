(()=>{var e={};e.id=991,e.ids=[991],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8822:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(3589),s(5651),s(9773),s(4773),s(5866);var r=s(3191),a=s(8716),l=s(7922),n=s.n(l),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["kitchen",{children:["[branchId]",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3589)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\kitchen\\[branchId]\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5651)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\kitchen\\[branchId]\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9773)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\kitchen\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4773)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ismayila\\platefulmenufront\\src\\app\\kitchen\\[branchId]\\orders\\page.tsx"],m="/kitchen/[branchId]/orders/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/kitchen/[branchId]/orders/page",pathname:"/kitchen/[branchId]/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},786:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8667:(e,t,s)=>{Promise.resolve().then(s.bind(s,9395))},5567:(e,t,s)=>{Promise.resolve().then(s.bind(s,1607))},4762:(e,t,s)=>{Promise.resolve().then(s.bind(s,6228))},7798:(e,t,s)=>{Promise.resolve().then(s.bind(s,3567))},1607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),a=s(7577);function l({children:e}){let[t,s]=(0,a.useState)(!1);return t?r.jsx(r.Fragment,{children:e}):null}},6228:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(326),a=s(7577),l=s(5047);function n(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),s=Number(e.branchId),[n,i]=(0,a.useState)(!1);(0,a.useRef)(!1);let[d,o]=(0,a.useState)({ORDERED:[],PREPARING:[],PREPARED_WAITING:[]}),[c,m]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(null);if((0,a.useCallback)(async()=>{},[s,t,n]),!n)return null;let b=async e=>{},g=async e=>{},f=e=>e?`$${(e/100).toFixed(2)}`:"$0.00",N=e=>{if(!e)return"";try{return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return""}};return isNaN(s)?r.jsx("main",{className:"min-h-screen bg-slate-900 p-4",children:r.jsx("div",{className:"mx-auto max-w-7xl",children:r.jsx("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-4 text-red-300",children:"Invalid branch ID"})})}):c&&0===d.ORDERED.length&&0===d.PREPARING.length&&0===d.PREPARED_WAITING.length?r.jsx("main",{className:"min-h-screen bg-slate-900 p-4",children:r.jsx("div",{className:"mx-auto max-w-7xl",children:r.jsx("div",{className:"text-center text-white",children:"Loading orders..."})})}):r.jsx("main",{className:"min-h-screen bg-slate-900 p-4",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Kitchen - Branch ",s]}),r.jsx("button",{onClick:()=>{t.replace(`/kitchen/${s}`)},className:"rounded-lg bg-slate-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-600",children:"Logout"})]}),u&&r.jsx("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-red-300",children:u}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("section",{className:"rounded-lg bg-slate-800 p-4",children:[r.jsx("h2",{className:"mb-4 border-b-2 border-yellow-500 pb-2 text-xl font-bold text-white",children:"New Orders"}),0===d.ORDERED.length?r.jsx("p",{className:"text-center text-slate-400",children:"No orders"}):r.jsx("div",{className:"space-y-3",children:d.ORDERED.map(e=>(0,r.jsxs)("div",{className:"rounded-lg border border-slate-600 bg-slate-700 p-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-white",children:["Order #",e.id]}),(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["Table: ",e.tableName||e.tableId]}),e.createdAt&&r.jsx("p",{className:"text-xs text-slate-400",children:N(e.createdAt)})]}),e.totalCents&&r.jsx("p",{className:"text-sm font-medium text-white",children:f(e.totalCents)})]}),r.jsx("div",{className:"mb-3 space-y-1",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-slate-300",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.qty,"x"]})," ",e.menuItemName||`Item ${e.menuItemId}`]},t))}),e.notes&&(0,r.jsxs)("p",{className:"mb-3 text-xs text-yellow-400",children:["Note: ",e.notes]}),r.jsx("button",{onClick:()=>b(e.id),disabled:h===e.id,className:"w-full rounded-lg bg-green-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-green-700 disabled:cursor-not-allowed disabled:opacity-50",children:h===e.id?"Processing...":"Accept Order"})]},e.id))})]}),(0,r.jsxs)("section",{className:"rounded-lg bg-slate-800 p-4",children:[r.jsx("h2",{className:"mb-4 border-b-2 border-yellow-500 pb-2 text-xl font-bold text-white",children:"Preparing"}),0===d.PREPARING.length?r.jsx("p",{className:"text-center text-slate-400",children:"No orders"}):r.jsx("div",{className:"space-y-3",children:d.PREPARING.map(e=>(0,r.jsxs)("div",{className:"rounded-lg border border-slate-600 bg-slate-700 p-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-white",children:["Order #",e.id]}),(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["Table: ",e.tableName||e.tableId]}),e.createdAt&&r.jsx("p",{className:"text-xs text-slate-400",children:N(e.createdAt)})]}),e.totalCents&&r.jsx("p",{className:"text-sm font-medium text-white",children:f(e.totalCents)})]}),r.jsx("div",{className:"mb-3 space-y-1",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-slate-300",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.qty,"x"]})," ",e.menuItemName||`Item ${e.menuItemId}`]},t))}),e.notes&&(0,r.jsxs)("p",{className:"mb-3 text-xs text-yellow-400",children:["Note: ",e.notes]}),r.jsx("button",{onClick:()=>g(e.id),disabled:h===e.id,className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:h===e.id?"Processing...":"Mark Ready"})]},e.id))})]}),(0,r.jsxs)("section",{className:"rounded-lg bg-slate-800 p-4",children:[r.jsx("h2",{className:"mb-4 border-b-2 border-yellow-500 pb-2 text-xl font-bold text-white",children:"Ready"}),0===d.PREPARED_WAITING.length?r.jsx("p",{className:"text-center text-slate-400",children:"No orders"}):r.jsx("div",{className:"space-y-3",children:d.PREPARED_WAITING.map(e=>(0,r.jsxs)("div",{className:"rounded-lg border border-slate-600 bg-slate-700 p-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-white",children:["Order #",e.id]}),(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["Table: ",e.tableName||e.tableId]}),e.createdAt&&r.jsx("p",{className:"text-xs text-slate-400",children:N(e.createdAt)})]}),e.totalCents&&r.jsx("p",{className:"text-sm font-medium text-white",children:f(e.totalCents)})]}),r.jsx("div",{className:"mb-3 space-y-1",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-slate-300",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.qty,"x"]})," ",e.menuItemName||`Item ${e.menuItemId}`]},t))}),e.notes&&(0,r.jsxs)("p",{className:"mb-3 text-xs text-yellow-400",children:["Note: ",e.notes]}),r.jsx("div",{className:"rounded-lg bg-green-500/20 border border-green-500/50 px-3 py-2 text-center text-sm font-medium text-green-300",children:"Ready for Pickup"})]},e.id))})]})]})]})})}s(4820)},3567:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),a=s(7577);function l({children:e}){let[t,s]=(0,a.useState)(!1);return t?r.jsx(r.Fragment,{children:e}):null}},9395:(e,t,s)=>{"use strict";s.d(t,{ConditionalAuthProvider:()=>n});var r=s(326),a=s(5047),l=s(7048);function n({children:e}){let t=(0,a.usePathname)();return t?.startsWith("/kitchen/")?r.jsx(r.Fragment,{children:e}):r.jsx(l.H,{children:e})}},4820:(e,t,s)=>{"use strict";s.d(t,{CT:()=>r,eg:()=>l,NA:()=>a});let r="http://localhost:8080/api".replace(/\/+$/,"")||0,a=!0,l={ROLE_SUPERADMIN:"/superadmin/dashboard",ROLE_ADMIN:"/admin/dashboard",ROLE_WAITER:"/login",ROLE_KITCHEN:"/login"}},7048:(e,t,s)=>{"use strict";s.d(t,{E:()=>c,H:()=>o});var r=s(326),a=s(7577),l=s(5047),n=s(4820);let i=(0,a.createContext)(void 0),d=e=>n.eg[e]??"/admin/dashboard";function o({children:e}){let t=(0,l.useRouter)(),[s,n]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),x=(0,a.useCallback)(e=>{if(!e||!e.user||!e.token||"ROLE_WAITER"===e.user.role){n(null),c(null);return}n({...e.user,permissions:Array.isArray(e.user.permissions)?e.user.permissions:[]}),c(e.token)},[]),h=(0,a.useCallback)(async()=>{try{u(!0);let e=await fetch("/api/auth/session",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch session");let t=await e.json();x(t)}catch(e){console.error("[Auth] session error",e),n(null),c(null)}finally{u(!1)}},[x]),p=(0,a.useCallback)(async e=>{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(403===s.status){let e=await s.json();throw Error(e?.message??"Login restricted for this role")}if(!s.ok){let e=await s.json().catch(()=>void 0);throw Error(e?.message??"Login failed")}let r=await s.json();if(!r.user||!r.token)throw Error("Invalid login response");if("ROLE_WAITER"===r.user.role)throw Error("Login not permitted for this role.");return x(r),t.replace(d(r.user.role)),r.user},[x,t]),b=(0,a.useCallback)(async()=>{await fetch("/api/auth/logout",{method:"POST"}),n(null),c(null),t.replace("/login")},[t]),g=(0,a.useMemo)(()=>({user:s,token:o,loading:m,login:p,logout:b,refreshSession:h}),[s,o,m,p,b,h]);return r.jsx(i.Provider,{value:g,children:e})}let c=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useAuthContext must be used within AuthProvider");return e}},5651:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\app\kitchen\[branchId]\layout.tsx#default`)},3589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\app\kitchen\[branchId]\orders\page.tsx#default`)},9773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\app\kitchen\layout.tsx#default`)},4773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>i});var r=s(9510),a=s(5384),l=s.n(a);s(5023);let n=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\components\ConditionalAuthProvider.tsx#ConditionalAuthProvider`),i={title:"PlatefulMenu",description:"Role-based POS management for PlatefulMenu"};function d({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${l().className} bg-slate-50 text-slate-900`,children:r.jsx(n,{children:e})})})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,985],()=>s(8822));module.exports=r})();