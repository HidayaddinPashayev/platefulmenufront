"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Hidayaddin_Desktop_platefulmenufront_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/login/route.ts */ \"(rsc)/./src/app/api/auth/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Hidayaddin\\\\Desktop\\\\platefulmenufront\\\\src\\\\app\\\\api\\\\auth\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Hidayaddin_Desktop_platefulmenufront_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIaWRheWFkZGluJTVDRGVza3RvcCU1Q3BsYXRlZnVsbWVudWZyb250JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNIaWRheWFkZGluJTVDRGVza3RvcCU1Q3BsYXRlZnVsbWVudWZyb250JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QztBQUNwSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Lz8xNTFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEhpZGF5YWRkaW5cXFxcRGVza3RvcFxcXFxwbGF0ZWZ1bG1lbnVmcm9udFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9sb2dpblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEhpZGF5YWRkaW5cXFxcRGVza3RvcFxcXFxwbGF0ZWZ1bG1lbnVmcm9udFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/login/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/auth/login/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_token__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/token */ \"(rsc)/./src/lib/token.ts\");\n\n\n\n\n\nconst cookieOptions = {\n    httpOnly: true,\n    sameSite: \"lax\",\n    secure: \"development\" === \"production\",\n    path: \"/\"\n};\nconst extractAuthResponse = (data)=>{\n    const token = data?.token ?? data?.accessToken ?? data?.jwt ?? data?.access_token;\n    if (!token) {\n        console.error(\"[Auth] No token found in response. Response keys:\", Object.keys(data || {}));\n        console.error(\"[Auth] Response data:\", JSON.stringify(data, null, 2));\n        throw new Error(\"No authentication token found in backend response\");\n    }\n    let claims;\n    try {\n        claims = (0,_lib_token__WEBPACK_IMPORTED_MODULE_4__.parseJwt)(token);\n    } catch (error) {\n        console.error(\"[Auth] Failed to parse JWT token:\", error);\n        throw new Error(\"Invalid JWT token format\");\n    }\n    let user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildAuthUser)(data?.user, claims);\n    if (!user) {\n        user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildAuthUser)(data, claims);\n    }\n    if (!user) {\n        user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildUserFromClaims)(claims);\n    }\n    if (!user) {\n        console.error(\"[Auth] Unable to build user from response. Response data:\", JSON.stringify(data, null, 2));\n        console.error(\"[Auth] JWT claims:\", JSON.stringify(claims, null, 2));\n        throw new Error(\"Unable to extract user information from backend response\");\n    }\n    (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.applyClaimsToUser)(user, claims);\n    return {\n        token,\n        user\n    };\n};\nasync function POST(request) {\n    const payload = await request.json();\n    const loginUrl = `${_lib_env__WEBPACK_IMPORTED_MODULE_2__.API_BASE_URL}/auth/login`;\n    console.log(\"[Auth] Attempting login to:\", loginUrl);\n    console.log(\"[Auth] Login payload:\", {\n        email: payload.email,\n        password: \"***\"\n    });\n    let response;\n    try {\n        response = await fetch(loginUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n    } catch (error) {\n        console.error(\"[Auth] Network error connecting to backend:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: `Cannot connect to backend server at ${loginUrl}. Please ensure the backend is running.`\n        }, {\n            status: 503\n        });\n    }\n    console.log(\"[Auth] Backend response status:\", response.status);\n    if (response.status === 401) {\n        const errorBody = await response.json().catch(()=>({}));\n        console.error(\"[Auth] Authentication failed (401):\", errorBody);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Invalid email or password\"\n        }, {\n            status: 401\n        });\n    }\n    if (!response.ok) {\n        const errorBody = await response.json().catch(()=>({}));\n        console.error(\"[Auth] Backend error response:\", {\n            status: response.status,\n            statusText: response.statusText,\n            body: errorBody\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: errorBody?.message ?? `Login failed: ${response.statusText}`\n        }, {\n            status: response.status\n        });\n    }\n    const data = await response.json();\n    console.log(\"[Auth] Backend response received. Keys:\", Object.keys(data || {}));\n    let session;\n    try {\n        session = extractAuthResponse(data);\n    } catch (error) {\n        console.error(\"[Auth] Unable to parse login response:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unexpected login response from backend\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: errorMessage\n        }, {\n            status: 500\n        });\n    }\n    if (!session.user || !session.token) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Unable to determine user role\"\n        }, {\n            status: 500\n        });\n    }\n    if (session.user.role === \"ROLE_WAITER\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Login restricted for this role\"\n        }, {\n            status: 403\n        });\n    }\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.set(\"token\", session.token, cookieOptions);\n    cookieStore.set(\"role\", session.user.role, {\n        ...cookieOptions,\n        httpOnly: false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyQztBQUNKO0FBQ0U7QUFFMEM7QUFDNUM7QUFPdkMsTUFBTU8sZ0JBQWdCO0lBQ3BCQyxVQUFVO0lBQ1ZDLFVBQVU7SUFDVkMsUUFBUUMsa0JBQXlCO0lBQ2pDQyxNQUFNO0FBQ1I7QUFFQSxNQUFNQyxzQkFBc0IsQ0FBQ0M7SUFDM0IsTUFBTUMsUUFDSkQsTUFBTUMsU0FBU0QsTUFBTUUsZUFBZUYsTUFBTUcsT0FBT0gsTUFBTUk7SUFFekQsSUFBSSxDQUFDSCxPQUFPO1FBQ1ZJLFFBQVFDLEtBQUssQ0FBQyxxREFBcURDLE9BQU9DLElBQUksQ0FBQ1IsUUFBUSxDQUFDO1FBQ3hGSyxRQUFRQyxLQUFLLENBQUMseUJBQXlCRyxLQUFLQyxTQUFTLENBQUNWLE1BQU0sTUFBTTtRQUNsRSxNQUFNLElBQUlXLE1BQU07SUFDbEI7SUFFQSxJQUFJQztJQUNKLElBQUk7UUFDRkEsU0FBU3BCLG9EQUFRQSxDQUFDUztJQUNwQixFQUFFLE9BQU9LLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0lBRUEsSUFBSUUsT0FBNkJ2Qix3REFBYUEsQ0FBQ1UsTUFBTWEsTUFBTUQ7SUFFM0QsSUFBSSxDQUFDQyxNQUFNO1FBQ1RBLE9BQU92Qix3REFBYUEsQ0FBQ1UsTUFBTVk7SUFDN0I7SUFFQSxJQUFJLENBQUNDLE1BQU07UUFDVEEsT0FBT3RCLDhEQUFtQkEsQ0FBQ3FCO0lBQzdCO0lBRUEsSUFBSSxDQUFDQyxNQUFNO1FBQ1RSLFFBQVFDLEtBQUssQ0FBQyw2REFBNkRHLEtBQUtDLFNBQVMsQ0FBQ1YsTUFBTSxNQUFNO1FBQ3RHSyxRQUFRQyxLQUFLLENBQUMsc0JBQXNCRyxLQUFLQyxTQUFTLENBQUNFLFFBQVEsTUFBTTtRQUNqRSxNQUFNLElBQUlELE1BQU07SUFDbEI7SUFFQXRCLDREQUFp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SUFDeEMyQyxZQUFZQyxHQUFHLENBQUMsUUFBUUosUUFBUXBCLElBQUksQ0FBQ3NCLElBQUksRUFBRTtRQUFFLEdBQUcxQyxhQUFhO1FBQUVDLFVBQVU7SUFBTTtJQUUvRSxPQUFPUixxREFBWUEsQ0FBQytCLElBQUksQ0FBQ2dCO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzP2QzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcclxuaW1wb3J0IHsgQVBJX0JBU0VfVVJMIH0gZnJvbSAnQC9saWIvZW52JztcclxuaW1wb3J0IHR5cGUgeyBBdXRoU2Vzc2lvbiwgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5pbXBvcnQgeyBhcHBseUNsYWltc1RvVXNlciwgYnVpbGRBdXRoVXNlciwgYnVpbGRVc2VyRnJvbUNsYWltcyB9IGZyb20gJ0AvbGliL2F1dGgnO1xyXG5pbXBvcnQgeyBwYXJzZUp3dCB9IGZyb20gJ0AvbGliL3Rva2VuJztcclxuXHJcbmludGVyZmFjZSBMb2dpblBheWxvYWQge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuY29uc3QgY29va2llT3B0aW9ucyA9IHtcclxuICBodHRwT25seTogdHJ1ZSxcclxuICBzYW1lU2l0ZTogJ2xheCcgYXMgY29uc3QsXHJcbiAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG4gIHBhdGg6ICcvJyxcclxufTtcclxuXHJcbmNvbnN0IGV4dHJhY3RBdXRoUmVzcG9uc2UgPSAoZGF0YTogYW55KTogQXV0aFNlc3Npb24gPT4ge1xyXG4gIGNvbnN0IHRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQgPVxyXG4gICAgZGF0YT8udG9rZW4gPz8gZGF0YT8uYWNjZXNzVG9rZW4gPz8gZGF0YT8uand0ID8/IGRhdGE/LmFjY2Vzc190b2tlbjtcclxuXHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIE5vIHRva2VuIGZvdW5kIGluIHJlc3BvbnNlLiBSZXNwb25zZSBrZXlzOicsIE9iamVjdC5rZXlzKGRhdGEgfHwge30pKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBSZXNwb25zZSBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcclxuICAgIHRocm93IG5ldyBFcnJvcignTm8gYXV0aGVudGljYXRpb24gdG9rZW4gZm91bmQgaW4gYmFja2VuZCByZXNwb25zZScpO1xyXG4gIH1cclxuXHJcbiAgbGV0IGNsYWltcztcclxuICB0cnkge1xyXG4gICAgY2xhaW1zID0gcGFyc2VKd3QodG9rZW4pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gRmFpbGVkIHRvIHBhcnNlIEpXVCB0b2tlbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSldUIHRva2VuIGZvcm1hdCcpO1xyXG4gIH1cclxuXHJcbiAgbGV0IHVzZXI6IEF1dGhVc2VyIHwgdW5kZWZpbmVkID0gYnVpbGRBdXRoVXNlcihkYXRhPy51c2VyLCBjbGFpbXMpO1xyXG5cclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHVzZXIgPSBidWlsZEF1dGhVc2VyKGRhdGEsIGNsYWltcyk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHVzZXIgPSBidWlsZFVzZXJGcm9tQ2xhaW1zKGNsYWltcyk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXVzZXIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBVbmFibGUgdG8gYnVpbGQgdXNlciBmcm9tIHJlc3BvbnNlLiBSZXNwb25zZSBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBKV1QgY2xhaW1zOicsIEpTT04uc3RyaW5naWZ5KGNsYWltcywgbnVsbCwgMikpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZXh0cmFjdCB1c2VyIGluZm9ybWF0aW9uIGZyb20gYmFja2VuZCByZXNwb25zZScpO1xyXG4gIH1cclxuXHJcbiAgYXBwbHlDbGFpbXNUb1VzZXIodXNlciwgY2xhaW1zKTtcclxuXHJcbiAgcmV0dXJuIHsgdG9rZW4sIHVzZXIgfTtcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICBjb25zdCBwYXlsb2FkOiBMb2dpblBheWxvYWQgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICBjb25zdCBsb2dpblVybCA9IGAke0FQSV9CQVNFX1VSTH0vYXV0aC9sb2dpbmA7XHJcblxyXG4gIGNvbnNvbGUubG9nKCdbQXV0aF0gQXR0ZW1wdGluZyBsb2dpbiB0bzonLCBsb2dpblVybCk7XHJcbiAgY29uc29sZS5sb2coJ1tBdXRoXSBMb2dpbiBwYXlsb2FkOicsIHsgZW1haWw6IHBheWxvYWQuZW1haWwsIHBhc3N3b3JkOiAnKioqJyB9KTtcclxuXHJcbiAgbGV0IHJlc3BvbnNlOiBSZXNwb25zZTtcclxuICB0cnkge1xyXG4gICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChsb2dpblVybCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBOZXR3b3JrIGVycm9yIGNvbm5lY3RpbmcgdG8gYmFja2VuZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgbWVzc2FnZTogYENhbm5vdCBjb25uZWN0IHRvIGJhY2tlbmQgc2VydmVyIGF0ICR7bG9naW5Vcmx9LiBQbGVhc2UgZW5zdXJlIHRoZSBiYWNrZW5kIGlzIHJ1bm5pbmcuYCB9LFxyXG4gICAgICB7IHN0YXR1czogNTAzIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygnW0F1dGhdIEJhY2tlbmQgcmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblxyXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgY29uc3QgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIEF1dGhlbnRpY2F0aW9uIGZhaWxlZCAoNDAxKTonLCBlcnJvckJvZHkpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICBjb25zdCBlcnJvckJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gQmFja2VuZCBlcnJvciByZXNwb25zZTonLCB7XHJcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxyXG4gICAgICBib2R5OiBlcnJvckJvZHksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiBlcnJvckJvZHk/Lm1lc3NhZ2UgPz8gYExvZ2luIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAgfSxcclxuICAgICAgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICBjb25zb2xlLmxvZygnW0F1dGhdIEJhY2tlbmQgcmVzcG9uc2UgcmVjZWl2ZWQuIEtleXM6JywgT2JqZWN0LmtleXMoZGF0YSB8fCB7fSkpO1xyXG4gIFxyXG4gIGxldCBzZXNzaW9uOiBBdXRoU2Vzc2lvbjtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHNlc3Npb24gPSBleHRyYWN0QXV0aFJlc3BvbnNlKGRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gVW5hYmxlIHRvIHBhcnNlIGxvZ2luIHJlc3BvbnNlOicsIGVycm9yKTtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1VuZXhwZWN0ZWQgbG9naW4gcmVzcG9uc2UgZnJvbSBiYWNrZW5kJztcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFzZXNzaW9uLnVzZXIgfHwgIXNlc3Npb24udG9rZW4pIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiAnVW5hYmxlIHRvIGRldGVybWluZSB1c2VyIHJvbGUnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChzZXNzaW9uLnVzZXIucm9sZSA9PT0gJ1JPTEVfV0FJVEVSJykge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IG1lc3NhZ2U6ICdMb2dpbiByZXN0cmljdGVkIGZvciB0aGlzIHJvbGUnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xyXG4gIGNvb2tpZVN0b3JlLnNldCgndG9rZW4nLCBzZXNzaW9uLnRva2VuLCBjb29raWVPcHRpb25zKTtcclxuICBjb29raWVTdG9yZS5zZXQoJ3JvbGUnLCBzZXNzaW9uLnVzZXIucm9sZSwgeyAuLi5jb29raWVPcHRpb25zLCBodHRwT25seTogZmFsc2UgfSk7XHJcblxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzZXNzaW9uKTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNvb2tpZXMiLCJBUElfQkFTRV9VUkwiLCJhcHBseUNsYWltc1RvVXNlciIsImJ1aWxkQXV0aFVzZXIiLCJidWlsZFVzZXJGcm9tQ2xhaW1zIiwicGFyc2VKd3QiLCJjb29raWVPcHRpb25zIiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInNlY3VyZSIsInByb2Nlc3MiLCJwYXRoIiwiZXh0cmFjdEF1dGhSZXNwb25zZSIsImRhdGEiLCJ0b2tlbiIsImFjY2Vzc1Rva2VuIiwiand0IiwiYWNjZXNzX3Rva2VuIiwiY29uc29sZSIsImVycm9yIiwiT2JqZWN0Iiwia2V5cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJFcnJvciIsImNsYWltcyIsInVzZXIiLCJQT1NUIiwicmVxdWVzdCIsInBheWxvYWQiLCJqc29uIiwibG9naW5VcmwiLCJsb2ciLCJlbWFpbCIsInBhc3N3b3JkIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwibWVzc2FnZSIsInN0YXR1cyIsImVycm9yQm9keSIsImNhdGNoIiwib2siLCJzdGF0dXNUZXh0Iiwic2Vzc2lvbiIsImVycm9yTWVzc2FnZSIsInJvbGUiLCJjb29raWVTdG9yZSIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyClaimsToUser: () => (/* binding */ applyClaimsToUser),\n/* harmony export */   buildAuthUser: () => (/* binding */ buildAuthUser),\n/* harmony export */   buildUserFromClaims: () => (/* binding */ buildUserFromClaims)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\n\nconst coerceNumber = (value, fallback = null)=>{\n    if (value === undefined || value === null) return fallback;\n    const num = Number(value);\n    return Number.isFinite(num) ? num : fallback;\n};\nconst resolveRole = (value)=>(0,_roles__WEBPACK_IMPORTED_MODULE_0__.normalizeUserRole)(value ?? undefined);\nconst ensurePermissions = (permissions)=>Array.isArray(permissions) ? permissions.map(String) : [];\nconst applyClaimsToUser = (user, claims)=>{\n    if (!user || !claims) return;\n    const claimRole = resolveRole(claims.role ?? null);\n    if (claimRole) {\n        user.role = claimRole;\n    }\n    const restaurantId = coerceNumber(claims.restaurantId);\n    if (restaurantId !== null) {\n        user.restaurantId = restaurantId;\n    }\n    const branchId = coerceNumber(claims.branchId, null);\n    if (branchId !== null || claims.branchId === null) {\n        user.branchId = branchId;\n    }\n    if (claims.email) {\n        user.email = claims.email;\n    }\n    if (claims.restaurantName !== undefined) {\n        user.restaurantName = claims.restaurantName ?? null;\n    }\n    if (claims.permissions) {\n        user.permissions = ensurePermissions(claims.permissions);\n    }\n    if (!user.id && claims.userId) {\n        user.id = Number(claims.userId);\n    }\n};\nconst buildUserFromClaims = (claims)=>{\n    if (!claims) return undefined;\n    const role = resolveRole(claims.role ?? null);\n    if (!role) return undefined;\n    return {\n        id: coerceNumber(claims.userId, 0) ?? 0,\n        email: claims.email ?? \"\",\n        role,\n        restaurantId: coerceNumber(claims.restaurantId, 0) ?? 0,\n        branchId: coerceNumber(claims.branchId, null),\n        restaurantName: claims.restaurantName ?? null,\n        permissions: ensurePermissions(claims.permissions)\n    };\n};\nconst buildAuthUser = (payload, claims)=>{\n    if (!payload && !claims) return undefined;\n    let user;\n    if (payload) {\n        const role = resolveRole(payload.role ?? payload.authority ?? payload.authorities?.[0]?.authority ?? payload.authorities?.[0]?.role);\n        if (role) {\n            user = {\n                id: Number(payload.id ?? payload.userId ?? payload.user?.id ?? 0),\n                email: payload.email ?? payload.username ?? payload.user?.email ?? \"\",\n                role,\n                restaurantId: Number(payload.restaurantId ?? payload.restaurant?.id ?? payload.user?.restaurantId ?? 0) || 0,\n                branchId: coerceNumber(payload.branchId ?? payload.branch?.id ?? payload.user?.branchId ?? payload.user?.branch?.id, null),\n                restaurantName: payload.restaurantName ?? payload.restaurant?.name ?? null,\n                permissions: ensurePermissions(payload.permissions)\n            };\n        }\n    }\n    if (!user && claims) {\n        user = buildUserFromClaims(claims);\n    }\n    if (user && claims) {\n        applyClaimsToUser(user, claims);\n    }\n    if (user) {\n        user.permissions = Array.isArray(user.permissions) ? user.permissions : [];\n    }\n    return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVNLFNBQVM7Z0JBQ25FSDtnQkFDQUMsY0FDRWQsT0FBT3NCLFFBQVFSLFlBQVksSUFBSVEsUUFBUUksVUFBVSxFQUFFUixNQUFNSSxRQUFRWixJQUFJLEVBQUVJLGdCQUFnQixNQUFNO2dCQUMvRkMsVUFDRXBCLGFBQ0UyQixRQUFRUCxRQUFRLElBQ2RPLFFBQVFLLE1BQU0sRUFBRVQsTUFDaEJJLFFBQVFaLElBQUksRUFBRUssWUFDZE8sUUFBUVosSUFBSSxFQUFFaUIsUUFBUVQsSUFDeEI7Z0JBRUpELGdCQUFnQkssUUFBUUwsY0FBYyxJQUFJSyxRQUFRSSxVQUFVLEVBQUVFLFFBQVE7Z0JBQ3RFeEIsYUFBYUQsa0JBQWtCbUIsUUFBUWxCLFdBQVc7WUFDcEQ7UUFDRjtJQUNGO0lBRUEsSUFBSSxDQUFDTSxRQUFRQyxRQUFRO1FBQ25CRCxPQUFPVSxvQkFBb0JUO0lBQzdCO0lBRUEsSUFBSUQsUUFBUUMsUUFBUTtRQUNsQkYsa0JBQWtCQyxNQUFNQztJQUMxQjtJQUVBLElBQUlELE1BQU07UUFDUkEsS0FBS04sV0FBVyxHQUFHQyxNQUFNQyxPQUFPLENBQUNJLEtBQUtOLFdBQVcsSUFBSU0sS0FBS04sV0FBVyxHQUFHLEVBQUU7SUFDNUU7SUFFQSxPQUFPTTtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5pbXBvcnQgeyBub3JtYWxpemVVc2VyUm9sZSB9IGZyb20gJy4vcm9sZXMnO1xyXG5pbXBvcnQgdHlwZSB7IFRva2VuQ2xhaW1zIH0gZnJvbSAnLi90b2tlbic7XHJcblxyXG5jb25zdCBjb2VyY2VOdW1iZXIgPSAodmFsdWU6IHVua25vd24sIGZhbGxiYWNrOiBudW1iZXIgfCBudWxsID0gbnVsbCk6IG51bWJlciB8IG51bGwgPT4ge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm4gZmFsbGJhY2s7XHJcbiAgY29uc3QgbnVtID0gTnVtYmVyKHZhbHVlKTtcclxuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bSkgPyBudW0gOiBmYWxsYmFjaztcclxufTtcclxuXHJcbmNvbnN0IHJlc29sdmVSb2xlID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT4gbm9ybWFsaXplVXNlclJvbGUodmFsdWUgPz8gdW5kZWZpbmVkKTtcclxuXHJcbmNvbnN0IGVuc3VyZVBlcm1pc3Npb25zID0gKHBlcm1pc3Npb25zOiB1bmtub3duKTogc3RyaW5nW10gPT5cclxuICBBcnJheS5pc0FycmF5KHBlcm1pc3Npb25zKSA/IHBlcm1pc3Npb25zLm1hcChTdHJpbmcpIDogW107XHJcblxyXG5leHBvcnQgY29uc3QgYXBwbHlDbGFpbXNUb1VzZXIgPSAodXNlcjogQXV0aFVzZXIsIGNsYWltczogVG9rZW5DbGFpbXMpID0+IHtcclxuICBpZiAoIXVzZXIgfHwgIWNsYWltcykgcmV0dXJuO1xyXG4gIGNvbnN0IGNsYWltUm9sZSA9IHJlc29sdmVSb2xlKGNsYWltcy5yb2xlID8/IG51bGwpO1xyXG4gIGlmIChjbGFpbVJvbGUpIHtcclxuICAgIHVzZXIucm9sZSA9IGNsYWltUm9sZTtcclxuICB9XHJcbiAgY29uc3QgcmVzdGF1cmFudElkID0gY29lcmNlTnVtYmVyKGNsYWltcy5yZXN0YXVyYW50SWQpO1xyXG4gIGlmIChyZXN0YXVyYW50SWQgIT09IG51bGwpIHtcclxuICAgIHVzZXIucmVzdGF1cmFudElkID0gcmVzdGF1cmFudElkO1xyXG4gIH1cclxuICBjb25zdCBicmFuY2hJZCA9IGNvZXJjZU51bWJlcihjbGFpbXMuYnJhbmNoSWQsIG51bGwpO1xyXG4gIGlmIChicmFuY2hJZCAhPT0gbnVsbCB8fCBjbGFpbXMuYnJhbmNoSWQgPT09IG51bGwpIHtcclxuICAgIHVzZXIuYnJhbmNoSWQgPSBicmFuY2hJZDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5lbWFpbCkge1xyXG4gICAgdXNlci5lbWFpbCA9IGNsYWltcy5lbWFpbDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5yZXN0YXVyYW50TmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICB1c2VyLnJlc3RhdXJhbnROYW1lID0gY2xhaW1zLnJlc3RhdXJhbnROYW1lID8/IG51bGw7XHJcbiAgfVxyXG4gIGlmIChjbGFpbXMucGVybWlzc2lvbnMpIHtcclxuICAgIHVzZXIucGVybWlzc2lvbnMgPSBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpO1xyXG4gIH1cclxuICBpZiAoIXVzZXIuaWQgJiYgY2xhaW1zLnVzZXJJZCkge1xyXG4gICAgdXNlci5pZCA9IE51bWJlcihjbGFpbXMudXNlcklkKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRVc2VyRnJvbUNsYWltcyA9IChjbGFpbXM6IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShjbGFpbXMucm9sZSA/PyBudWxsKTtcclxuICBpZiAoIXJvbGUpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnVzZXJJZCwgMCkgPz8gMCxcclxuICAgIGVtYWlsOiBjbGFpbXMuZW1haWwgPz8gJycsXHJcbiAgICByb2xlLFxyXG4gICAgcmVzdGF1cmFudElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnJlc3RhdXJhbnRJZCwgMCkgPz8gMCxcclxuICAgIGJyYW5jaElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLmJyYW5jaElkLCBudWxsKSxcclxuICAgIHJlc3RhdXJhbnROYW1lOiBjbGFpbXMucmVzdGF1cmFudE5hbWUgPz8gbnVsbCxcclxuICAgIHBlcm1pc3Npb25zOiBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRBdXRoVXNlciA9IChwYXlsb2FkOiBhbnksIGNsYWltcz86IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcGF5bG9hZCAmJiAhY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGxldCB1c2VyOiBBdXRoVXNlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgaWYgKHBheWxvYWQpIHtcclxuICAgIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShcclxuICAgICAgcGF5bG9hZC5yb2xlID8/XHJcbiAgICAgICAgcGF5bG9hZC5hdXRob3JpdHkgPz9cclxuICAgICAgICBwYXlsb2FkLmF1dGhvcml0aWVzPy5bMF0/LmF1dGhvcml0eSA/P1xyXG4gICAgICAgIHBheWxvYWQuYXV0aG9yaXRpZXM/LlswXT8ucm9sZVxyXG4gICAgKTtcclxuICAgIGlmIChyb2xlKSB7XHJcbiAgICAgIHVzZXIgPSB7XHJcbiAgICAgICAgaWQ6IE51bWJlcihwYXlsb2FkLmlkID8/IHBheWxvYWQudXNlcklkID8/IHBheWxvYWQudXNlcj8uaWQgPz8gMCksXHJcbiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwgPz8gcGF5bG9hZC51c2VybmFtZSA/PyBwYXlsb2FkLnVzZXI/LmVtYWlsID8/ICcnLFxyXG4gICAgICAgIHJvbGUsXHJcbiAgICAgICAgcmVzdGF1cmFudElkOlxyXG4gICAgICAgICAgTnVtYmVyKHBheWxvYWQucmVzdGF1cmFudElkID8/IHBheWxvYWQucmVzdGF1cmFudD8uaWQgPz8gcGF5bG9hZC51c2VyPy5yZXN0YXVyYW50SWQgPz8gMCkgfHwgMCxcclxuICAgICAgICBicmFuY2hJZDpcclxuICAgICAgICAgIGNvZXJjZU51bWJlcihcclxuICAgICAgICAgICAgcGF5bG9hZC5icmFuY2hJZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQuYnJhbmNoPy5pZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQudXNlcj8uYnJhbmNoSWQgPz9cclxuICAgICAgICAgICAgICBwYXlsb2FkLnVzZXI/LmJyYW5jaD8uaWQsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgcmVzdGF1cmFudE5hbWU6IHBheWxvYWQucmVzdGF1cmFudE5hbWUgPz8gcGF5bG9hZC5yZXN0YXVyYW50Py5uYW1lID8/IG51bGwsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IGVuc3VyZVBlcm1pc3Npb25zKHBheWxvYWQucGVybWlzc2lvbnMpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCF1c2VyICYmIGNsYWltcykge1xyXG4gICAgdXNlciA9IGJ1aWxkVXNlckZyb21DbGFpbXMoY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyICYmIGNsYWltcykge1xyXG4gICAgYXBwbHlDbGFpbXNUb1VzZXIodXNlciwgY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyKSB7XHJcbiAgICB1c2VyLnBlcm1pc3Npb25zID0gQXJyYXkuaXNBcnJheSh1c2VyLnBlcm1pc3Npb25zKSA/IHVzZXIucGVybWlzc2lvbnMgOiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiB1c2VyO1xyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVVzZXJSb2xlIiwiY29lcmNlTnVtYmVyIiwidmFsdWUiLCJmYWxsYmFjayIsInVuZGVmaW5lZCIsIm51bSIsIk51bWJlciIsImlzRmluaXRlIiwicmVzb2x2ZVJvbGUiLCJlbnN1cmVQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiU3RyaW5nIiwiYXBwbHlDbGFpbXNUb1VzZXIiLCJ1c2VyIiwiY2xhaW1zIiwiY2xhaW1Sb2xlIiwicm9sZSIsInJlc3RhdXJhbnRJZCIsImJyYW5jaElkIiwiZW1haWwiLCJyZXN0YXVyYW50TmFtZSIsImlkIiwidXNlcklkIiwiYnVpbGRVc2VyRnJvbUNsYWltcyIsImJ1aWxkQXV0aFVzZXIiLCJwYXlsb2FkIiwiYXV0aG9yaXR5IiwiYXV0aG9yaXRpZXMiLCJ1c2VybmFtZSIsInJlc3RhdXJhbnQiLCJicmFuY2giLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_BASE_URL: () => (/* binding */ API_BASE_URL),\n/* harmony export */   DASHBOARD_REDIRECTS: () => (/* binding */ DASHBOARD_REDIRECTS)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL?.replace(/\\/+$/, \"\") || \"http://localhost:8080/api\";\n\nconst DASHBOARD_REDIRECTS = _roles__WEBPACK_IMPORTED_MODULE_0__.rolePathMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxlQUNYQyxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQixFQUFFQyxRQUFRLFFBQVEsT0FBTyw0QkFBNEI7QUFHaEQ7QUFFL0IsTUFBTUUsc0JBQWdERCwrQ0FBV0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Ly4vc3JjL2xpYi9lbnYudHM/ODQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQVBJX0JBU0VfVVJMID1cclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMPy5yZXBsYWNlKC9cXC8rJC8sICcnKSB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaSc7XHJcblxyXG5pbXBvcnQgdHlwZSB7IFVzZXJSb2xlIH0gZnJvbSAnQC90eXBlcy9hdXRoJztcclxuaW1wb3J0IHsgcm9sZVBhdGhNYXAgfSBmcm9tICcuL3JvbGVzJztcclxuXHJcbmV4cG9ydCBjb25zdCBEQVNIQk9BUkRfUkVESVJFQ1RTOiBSZWNvcmQ8VXNlclJvbGUsIHN0cmluZz4gPSByb2xlUGF0aE1hcDtcclxuXHJcbiJdLCJuYW1lcyI6WyJBUElfQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInJlcGxhY2UiLCJyb2xlUGF0aE1hcCIsIkRBU0hCT0FSRF9SRURJUkVDVFMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/roles.ts":
/*!**************************!*\
  !*** ./src/lib/roles.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeUserRole: () => (/* binding */ normalizeUserRole),\n/* harmony export */   rolePathMap: () => (/* binding */ rolePathMap)\n/* harmony export */ });\nconst ROLE_MAP = {\n    ROLE_SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ROLE_ADMIN: \"ROLE_ADMIN\",\n    ROLE_WAITER: \"ROLE_WAITER\",\n    SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ADMIN: \"ROLE_ADMIN\",\n    WAITER: \"ROLE_WAITER\"\n};\nconst normalizeUserRole = (role)=>{\n    if (!role) return undefined;\n    const key = role.toUpperCase();\n    return ROLE_MAP[key];\n};\nconst rolePathMap = {\n    ROLE_SUPERADMIN: \"/superadmin/dashboard\",\n    ROLE_ADMIN: \"/admin/dashboard\",\n    ROLE_WAITER: \"/login\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JvbGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsTUFBTUEsV0FBcUM7SUFDekNDLGlCQUFpQjtJQUNqQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsT0FBTztJQUNQQyxRQUFRO0FBQ1Y7QUFFTyxNQUFNQyxvQkFBb0IsQ0FBQ0M7SUFDaEMsSUFBSSxDQUFDQSxNQUFNLE9BQU9DO0lBQ2xCLE1BQU1DLE1BQU1GLEtBQUtHLFdBQVc7SUFDNUIsT0FBT1gsUUFBUSxDQUFDVSxJQUFJO0FBQ3RCLEVBQUU7QUFFSyxNQUFNRSxjQUF3QztJQUNuRFgsaUJBQWlCO0lBQ2pCQyxZQUFZO0lBQ1pDLGFBQWE7QUFDZixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvbGliL3JvbGVzLnRzPzc3ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBVc2VyUm9sZSB9IGZyb20gJ0AvdHlwZXMvYXV0aCc7XHJcblxyXG5jb25zdCBST0xFX01BUDogUmVjb3JkPHN0cmluZywgVXNlclJvbGU+ID0ge1xyXG4gIFJPTEVfU1VQRVJBRE1JTjogJ1JPTEVfU1VQRVJBRE1JTicsXHJcbiAgUk9MRV9BRE1JTjogJ1JPTEVfQURNSU4nLFxyXG4gIFJPTEVfV0FJVEVSOiAnUk9MRV9XQUlURVInLFxyXG4gIFNVUEVSQURNSU46ICdST0xFX1NVUEVSQURNSU4nLFxyXG4gIEFETUlOOiAnUk9MRV9BRE1JTicsXHJcbiAgV0FJVEVSOiAnUk9MRV9XQUlURVInLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVVzZXJSb2xlID0gKHJvbGU/OiBzdHJpbmcgfCBudWxsKTogVXNlclJvbGUgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcm9sZSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICBjb25zdCBrZXkgPSByb2xlLnRvVXBwZXJDYXNlKCk7XHJcbiAgcmV0dXJuIFJPTEVfTUFQW2tleV07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgcm9sZVBhdGhNYXA6IFJlY29yZDxVc2VyUm9sZSwgc3RyaW5nPiA9IHtcclxuICBST0xFX1NVUEVSQURNSU46ICcvc3VwZXJhZG1pbi9kYXNoYm9hcmQnLFxyXG4gIFJPTEVfQURNSU46ICcvYWRtaW4vZGFzaGJvYXJkJyxcclxuICBST0xFX1dBSVRFUjogJy9sb2dpbicsXHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiUk9MRV9NQVAiLCJST0xFX1NVUEVSQURNSU4iLCJST0xFX0FETUlOIiwiUk9MRV9XQUlURVIiLCJTVVBFUkFETUlOIiwiQURNSU4iLCJXQUlURVIiLCJub3JtYWxpemVVc2VyUm9sZSIsInJvbGUiLCJ1bmRlZmluZWQiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsInJvbGVQYXRoTWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/roles.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/token.ts":
/*!**************************!*\
  !*** ./src/lib/token.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJwt: () => (/* binding */ parseJwt)\n/* harmony export */ });\nconst decodeBase64Url = (value)=>{\n    try {\n        const base64 = value.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        if (true) {\n            return Buffer.from(base64, \"base64\").toString(\"utf8\");\n        }\n        // Browser\n        return decodeURIComponent(atob(base64).split(\"\").map((c)=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(\"\"));\n    } catch  {\n        return \"\";\n    }\n};\nconst parseJwt = (token)=>{\n    if (!token) return {};\n    const parts = token.split(\".\");\n    if (parts.length < 2) return {};\n    const payloadRaw = decodeBase64Url(parts[1]);\n    if (!payloadRaw) return {};\n    try {\n        const payload = JSON.parse(payloadRaw);\n        return {\n            userId: payload.userId ?? payload.sub ?? payload.id ?? null,\n            role: payload.role ?? payload.authority ?? null,\n            restaurantId: payload.restaurantId ?? payload.restId ?? null,\n            branchId: payload.branchId ?? null,\n            email: payload.email ?? payload.username ?? null,\n            restaurantName: payload.restaurantName ?? null,\n            permissions: Array.isArray(payload.permissions) ? payload.permissions : undefined\n        };\n    } catch (error) {\n        console.error(\"[token] Unable to parse JWT payload\", error);\n        return {};\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Rva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFVQSxNQUFNQSxrQkFBa0IsQ0FBQ0M7SUFDdkIsSUFBSTtRQUNGLE1BQU1DLFNBQVNELE1BQU1FLE9BQU8sQ0FBQyxNQUFNLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO1FBQ3RELElBQUksSUFBa0IsRUFBYTtZQUNqQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNILFFBQVEsVUFBVUksUUFBUSxDQUFDO1FBQ2hEO1FBQ0EsVUFBVTtRQUNWLE9BQU9DLG1CQUNMQyxLQUFLTixRQUNGTyxLQUFLLENBQUMsSUFDTkMsR0FBRyxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVBLEVBQUVDLFVBQVUsQ0FBQyxHQUFHTixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUNPLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUM5REMsSUFBSSxDQUFDO0lBRVosRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxNQUFNQyxXQUFXLENBQUNDO0lBQ3ZCLElBQUksQ0FBQ0EsT0FBTyxPQUFPLENBQUM7SUFDcEIsTUFBTUMsUUFBUUQsTUFBTVAsS0FBSyxDQUFDO0lBQzFCLElBQUlRLE1BQU1DLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQztJQUM5QixNQUFNQyxhQUFhbkIsZ0JBQWdCaUIsS0FBSyxDQUFDLEVBQUU7SUFDM0MsSUFBSSxDQUFDRSxZQUFZLE9BQU8sQ0FBQztJQUN6QixJQUFJO1FBQ0YsTUFBTUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDSDtRQUMzQixPQUFPO1lBQ0xJLFFBQVFILFFBQVFHLE1BQU0sSUFBSUgsUUFBUUksR0FBRyxJQUFJSixRQUFRSyxFQUFFLElBQUk7WUFDdkRDLE1BQU1OLFFBQVFNLElBQUksSUFBSU4sUUFBUU8sU0FBUyxJQUFJO1lBQzNDQyxjQUFjUixRQUFRUSxZQUFZLElBQUlSLFFBQVFTLE1BQU0sSUFBSTtZQUN4REMsVUFBVVYsUUFBUVUsUUFBUSxJQUFJO1lBQzlCQyxPQUFPWCxRQUFRVyxLQUFLLElBQUlYLFFBQVFZLFFBQVEsSUFBSTtZQUM1Q0MsZ0JBQWdCYixRQUFRYSxjQUFjLElBQUk7WUFDMUNDLGFBQWFDLE1BQU1DLE9BQU8sQ0FBQ2hCLFFBQVFjLFdBQVcsSUFBSWQsUUFBUWMsV0FBVyxHQUFHRztRQUMxRTtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsdUNBQXVDQTtRQUNyRCxPQUFPLENBQUM7SUFDVjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvdG9rZW4udHM/MDgzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFRva2VuQ2xhaW1zIHtcclxuICB1c2VySWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIHJvbGU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlc3RhdXJhbnRJZD86IG51bWJlciB8IG51bGw7XHJcbiAgYnJhbmNoSWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcclxuICByZXN0YXVyYW50TmFtZT86IHN0cmluZyB8IG51bGw7XHJcbiAgcGVybWlzc2lvbnM/OiBzdHJpbmdbXSB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGRlY29kZUJhc2U2NFVybCA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYmFzZTY0ID0gdmFsdWUucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4gQnVmZmVyLmZyb20oYmFzZTY0LCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0ZjgnKTtcclxuICAgIH1cclxuICAgIC8vIEJyb3dzZXJcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXHJcbiAgICAgIGF0b2IoYmFzZTY0KVxyXG4gICAgICAgIC5zcGxpdCgnJylcclxuICAgICAgICAubWFwKChjKSA9PiBgJSR7YDAwJHtjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfWAuc2xpY2UoLTIpfWApXHJcbiAgICAgICAgLmpvaW4oJycpXHJcbiAgICApO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZUp3dCA9ICh0b2tlbj86IHN0cmluZyB8IG51bGwpOiBUb2tlbkNsYWltcyA9PiB7XHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBheWxvYWRSYXcgPSBkZWNvZGVCYXNlNjRVcmwocGFydHNbMV0pO1xyXG4gIGlmICghcGF5bG9hZFJhdykgcmV0dXJuIHt9O1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkUmF3KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZDogcGF5bG9hZC51c2VySWQgPz8gcGF5bG9hZC5zdWIgPz8gcGF5bG9hZC5pZCA/PyBudWxsLFxyXG4gICAgICByb2xlOiBwYXlsb2FkLnJvbGUgPz8gcGF5bG9hZC5hdXRob3JpdHkgPz8gbnVsbCxcclxuICAgICAgcmVzdGF1cmFudElkOiBwYXlsb2FkLnJlc3RhdXJhbnRJZCA/PyBwYXlsb2FkLnJlc3RJZCA/PyBudWxsLFxyXG4gICAgICBicmFuY2hJZDogcGF5bG9hZC5icmFuY2hJZCA/PyBudWxsLFxyXG4gICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCA/PyBwYXlsb2FkLnVzZXJuYW1lID8/IG51bGwsXHJcbiAgICAgIHJlc3RhdXJhbnROYW1lOiBwYXlsb2FkLnJlc3RhdXJhbnROYW1lID8/IG51bGwsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBBcnJheS5pc0FycmF5KHBheWxvYWQucGVybWlzc2lvbnMpID8gcGF5bG9hZC5wZXJtaXNzaW9ucyA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1t0b2tlbl0gVW5hYmxlIHRvIHBhcnNlIEpXVCBwYXlsb2FkJywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHt9O1xyXG4gIH1cclxufTtcclxuXHJcbiJdLCJuYW1lcyI6WyJkZWNvZGVCYXNlNjRVcmwiLCJ2YWx1ZSIsImJhc2U2NCIsInJlcGxhY2UiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwic3BsaXQiLCJtYXAiLCJjIiwiY2hhckNvZGVBdCIsInNsaWNlIiwiam9pbiIsInBhcnNlSnd0IiwidG9rZW4iLCJwYXJ0cyIsImxlbmd0aCIsInBheWxvYWRSYXciLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwidXNlcklkIiwic3ViIiwiaWQiLCJyb2xlIiwiYXV0aG9yaXR5IiwicmVzdGF1cmFudElkIiwicmVzdElkIiwiYnJhbmNoSWQiLCJlbWFpbCIsInVzZXJuYW1lIiwicmVzdGF1cmFudE5hbWUiLCJwZXJtaXNzaW9ucyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/token.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHidayaddin%5CDesktop%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();