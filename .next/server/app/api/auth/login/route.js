"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ismayila_platefulmenufront_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/login/route.ts */ \"(rsc)/./src/app/api/auth/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ismayila\\\\platefulmenufront\\\\src\\\\app\\\\api\\\\auth\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ismayila_platefulmenufront_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNpc21heWlsYSU1Q3BsYXRlZnVsbWVudWZyb250JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNpc21heWlsYSU1Q3BsYXRlZnVsbWVudWZyb250JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Lz8xZWQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGlzbWF5aWxhXFxcXHBsYXRlZnVsbWVudWZyb250XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcbG9naW5cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvbG9naW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL2xvZ2luXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcaXNtYXlpbGFcXFxccGxhdGVmdWxtZW51ZnJvbnRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxsb2dpblxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/login/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/auth/login/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_token__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/token */ \"(rsc)/./src/lib/token.ts\");\n\n\n\n\n\n// Mock authentication data\nconst MOCK_USERS = {\n    \"superadmin@cozycorner.com\": {\n        password: \"admin123\",\n        user: {\n            id: 1,\n            email: \"superadmin@cozycorner.com\",\n            role: \"ROLE_SUPERADMIN\",\n            restaurantId: 1,\n            branchId: null,\n            fullName: \"Cavidan  Mammadov\",\n            permissions: []\n        },\n        token: \"mock-token-superadmin-12345\"\n    },\n    \"admin@downtown.cozycorner.com\": {\n        password: \"admin123\",\n        user: {\n            id: 2,\n            email: \"admin@downtown.cozycorner.com\",\n            role: \"ROLE_ADMIN\",\n            restaurantId: 1,\n            branchId: 1,\n            fullName: \"Leyla Huseynova\",\n            permissions: []\n        },\n        token: \"mock-token-admin-67890\"\n    },\n    \"kitchen1@cozycorner.com\": {\n        password: \"kitchen123\",\n        user: {\n            id: 3,\n            email: \"kitchen1@cozycorner.com\",\n            role: \"ROLE_KITCHEN\",\n            restaurantId: 1,\n            branchId: 1,\n            fullName: \"Rashad Aliyev\",\n            permissions: []\n        },\n        token: \"mock-token-kitchen-11111\"\n    }\n};\nconst cookieOptions = {\n    httpOnly: true,\n    sameSite: \"lax\",\n    secure: \"development\" === \"production\",\n    path: \"/\"\n};\nconst extractAuthResponse = (data)=>{\n    const token = data?.token ?? data?.accessToken ?? data?.jwt ?? data?.access_token;\n    if (!token) {\n        console.error(\"[Auth] No token found in response. Response keys:\", Object.keys(data || {}));\n        console.error(\"[Auth] Response data:\", JSON.stringify(data, null, 2));\n        throw new Error(\"No authentication token found in backend response\");\n    }\n    let claims;\n    try {\n        claims = (0,_lib_token__WEBPACK_IMPORTED_MODULE_4__.parseJwt)(token);\n    } catch (error) {\n        console.error(\"[Auth] Failed to parse JWT token:\", error);\n        throw new Error(\"Invalid JWT token format\");\n    }\n    let user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildAuthUser)(data?.user, claims);\n    if (!user) {\n        user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildAuthUser)(data, claims);\n    }\n    if (!user) {\n        user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildUserFromClaims)(claims);\n    }\n    if (!user) {\n        console.error(\"[Auth] Unable to build user from response. Response data:\", JSON.stringify(data, null, 2));\n        console.error(\"[Auth] JWT claims:\", JSON.stringify(claims, null, 2));\n        throw new Error(\"Unable to extract user information from backend response\");\n    }\n    (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.applyClaimsToUser)(user, claims);\n    return {\n        token,\n        user\n    };\n};\nasync function POST(request) {\n    const payload = await request.json();\n    // Mock mode: return fake authentication\n    if (_lib_env__WEBPACK_IMPORTED_MODULE_2__.USE_MOCK_DATA) {\n        console.log(\"[Auth] Mock mode enabled - using mock authentication\");\n        const mockAuth = MOCK_USERS[payload.email.toLowerCase()];\n        if (!mockAuth || mockAuth.password !== payload.password) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Invalid email or password\"\n            }, {\n                status: 401\n            });\n        }\n        if (mockAuth.user.role === \"ROLE_WAITER\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Login restricted for this role\"\n            }, {\n                status: 403\n            });\n        }\n        const session = {\n            token: mockAuth.token,\n            user: mockAuth.user\n        };\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n        cookieStore.set(\"token\", session.token, cookieOptions);\n        cookieStore.set(\"role\", session.user.role, {\n            ...cookieOptions,\n            httpOnly: false\n        });\n        console.log(\"[Auth] Mock login successful for:\", payload.email);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    }\n    // Real API mode\n    const loginUrl = `${_lib_env__WEBPACK_IMPORTED_MODULE_2__.API_BASE_URL}/auth/login`;\n    console.log(\"[Auth] Attempting login to:\", loginUrl);\n    console.log(\"[Auth] Login payload:\", {\n        email: payload.email,\n        password: \"***\"\n    });\n    let response;\n    try {\n        response = await fetch(loginUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n    } catch (error) {\n        console.error(\"[Auth] Network error connecting to backend:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: `Cannot connect to backend server at ${loginUrl}. Please ensure the backend is running.`\n        }, {\n            status: 503\n        });\n    }\n    console.log(\"[Auth] Backend response status:\", response.status);\n    if (response.status === 401) {\n        const errorBody = await response.json().catch(()=>({}));\n        console.error(\"[Auth] Authentication failed (401):\", errorBody);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Invalid email or password\"\n        }, {\n            status: 401\n        });\n    }\n    if (!response.ok) {\n        const errorBody = await response.json().catch(()=>({}));\n        console.error(\"[Auth] Backend error response:\", {\n            status: response.status,\n            statusText: response.statusText,\n            body: errorBody\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: errorBody?.message ?? `Login failed: ${response.statusText}`\n        }, {\n            status: response.status\n        });\n    }\n    const data = await response.json();\n    console.log(\"[Auth] Backend response received. Keys:\", Object.keys(data || {}));\n    let session;\n    try {\n        session = extractAuthResponse(data);\n    } catch (error) {\n        console.error(\"[Auth] Unable to parse login response:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unexpected login response from backend\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: errorMessage\n        }, {\n            status: 500\n        });\n    }\n    if (!session.user || !session.token) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Unable to determine user role or token\"\n        }, {\n            status: 500\n        });\n    }\n    if (session.user.role === \"ROLE_WAITER\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Login restricted for this role\"\n        }, {\n            status: 403\n        });\n    }\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.set(\"token\", session.token, cookieOptions);\n    cookieStore.set(\"role\", session.user.role, {\n        ...cookieOptions,\n        httpOnly: false\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyQztBQUNKO0FBQ2lCO0FBRTJCO0FBQzVDO0FBT3ZDLDJCQUEyQjtBQUMzQixNQUFNUSxhQUFrRjtJQUN0Riw2QkFBNkI7UUFDM0JDLFVBQVU7UUFDVkMsTUFBTTtZQUNKQyxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsTUFBTTtZQUNOQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsVUFBVTtZQUNWQyxhQUFhLEVBQUU7UUFDakI7UUFDQUMsT0FBTztJQUNUO0lBQ0EsaUNBQWlDO1FBQy9CVCxVQUFVO1FBQ1ZDLE1BQU07WUFDSkMsSUFBSTtZQUNKQyxPQUFPO1lBQ1BDLE1BQU07WUFDTkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLFVBQVU7WUFDVkMsYUFBYSxFQUFFO1FBQ2pCO1FBQ0FDLE9BQU87SUFDVDtJQUNBLDJCQUEyQjtRQUN6QlQsVUFBVTtRQUNWQyxNQUFNO1lBQ0pDLElBQUk7WUFDSkMsT0FBTztZQUNQQyxNQUFNO1lBQ05DLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZDLGFBQWEsRUFBRTtRQUNqQjtRQUNBQyxPQUFPO0lBQ1Q7QUFDRjtBQUVBLE1BQU1DLGdCQUFnQjtJQUNwQkMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLFFBQVFDLGtCQUF5QjtJQUNqQ0MsTUFBTTtBQUNSO0FBRUEsTUFBTUMsc0JBQXNCLENBQUNDO0lBQzNCLE1BQU1SLFFBQ0pRLE1BQU1SLFNBQVNRLE1BQU1DLGVBQWVELE1BQU1FLE9BQU9GLE1BQU1HO0lBRXpELElBQUksQ0FBQ1gsT0FBTztRQUNWWSxRQUFRQyxLQUFLLENBQUMscURBQXFEQyxPQUFPQyxJQUFJLENBQUNQLFFBQVEsQ0FBQztRQUN4RkksUUFBUUMsS0FBSyxDQUFDLHlCQUF5QkcsS0FBS0MsU0FBUyxDQUFDVCxNQUFNLE1BQU07UUFDbEUsTUFBTSxJQUFJVSxNQUFNO0lBQ2xCO0lBRUEsSUFB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UTdCLEtBQUssRUFBRTtRQUNuQyxPQUFPbEIscURBQVlBLENBQUN5QyxJQUFJLENBQ3RCO1lBQUVJLFNBQVM7UUFBeUMsR0FDcEQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsSUFBSUMsUUFBUXJDLElBQUksQ0FBQ0csSUFBSSxLQUFLLGVBQWU7UUFDdkMsT0FBT2IscURBQVlBLENBQUN5QyxJQUFJLENBQ3RCO1lBQUVJLFNBQVM7UUFBaUMsR0FDNUM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsTUFBTUUsY0FBYy9DLHFEQUFPQTtJQUMzQitDLFlBQVlDLEdBQUcsQ0FBQyxTQUFTRixRQUFRN0IsS0FBSyxFQUFFQztJQUN4QzZCLFlBQVlDLEdBQUcsQ0FBQyxRQUFRRixRQUFRckMsSUFBSSxDQUFDRyxJQUFJLEVBQUU7UUFBRSxHQUFHTSxhQUFhO1FBQUVDLFVBQVU7SUFBTTtJQUUvRSxPQUFPcEIscURBQVlBLENBQUN5QyxJQUFJLENBQUNNO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzP2QzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcclxuaW1wb3J0IHsgQVBJX0JBU0VfVVJMLCBVU0VfTU9DS19EQVRBIH0gZnJvbSAnQC9saWIvZW52JztcclxuaW1wb3J0IHR5cGUgeyBBdXRoU2Vzc2lvbiwgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5pbXBvcnQgeyBhcHBseUNsYWltc1RvVXNlciwgYnVpbGRBdXRoVXNlciwgYnVpbGRVc2VyRnJvbUNsYWltcyB9IGZyb20gJ0AvbGliL2F1dGgnO1xyXG5pbXBvcnQgeyBwYXJzZUp3dCB9IGZyb20gJ0AvbGliL3Rva2VuJztcclxuXHJcbmludGVyZmFjZSBMb2dpblBheWxvYWQge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuLy8gTW9jayBhdXRoZW50aWNhdGlvbiBkYXRhXHJcbmNvbnN0IE1PQ0tfVVNFUlM6IFJlY29yZDxzdHJpbmcsIHsgcGFzc3dvcmQ6IHN0cmluZzsgdXNlcjogQXV0aFVzZXI7IHRva2VuOiBzdHJpbmcgfT4gPSB7XHJcbiAgJ3N1cGVyYWRtaW5AY296eWNvcm5lci5jb20nOiB7XHJcbiAgICBwYXNzd29yZDogJ2FkbWluMTIzJyxcclxuICAgIHVzZXI6IHtcclxuICAgICAgaWQ6IDEsXHJcbiAgICAgIGVtYWlsOiAnc3VwZXJhZG1pbkBjb3p5Y29ybmVyLmNvbScsXHJcbiAgICAgIHJvbGU6ICdST0xFX1NVUEVSQURNSU4nLFxyXG4gICAgICByZXN0YXVyYW50SWQ6IDEsXHJcbiAgICAgIGJyYW5jaElkOiBudWxsLFxyXG4gICAgICBmdWxsTmFtZTogJ0NhdmlkYW4gIE1hbW1hZG92JyxcclxuICAgICAgcGVybWlzc2lvbnM6IFtdLFxyXG4gICAgfSxcclxuICAgIHRva2VuOiAnbW9jay10b2tlbi1zdXBlcmFkbWluLTEyMzQ1JyxcclxuICB9LFxyXG4gICdhZG1pbkBkb3dudG93bi5jb3p5Y29ybmVyLmNvbSc6IHtcclxuICAgIHBhc3N3b3JkOiAnYWRtaW4xMjMnLFxyXG4gICAgdXNlcjoge1xyXG4gICAgICBpZDogMixcclxuICAgICAgZW1haWw6ICdhZG1pbkBkb3dudG93bi5jb3p5Y29ybmVyLmNvbScsXHJcbiAgICAgIHJvbGU6ICdST0xFX0FETUlOJyxcclxuICAgICAgcmVzdGF1cmFudElkOiAxLFxyXG4gICAgICBicmFuY2hJZDogMSxcclxuICAgICAgZnVsbE5hbWU6ICdMZXlsYSBIdXNleW5vdmEnLFxyXG4gICAgICBwZXJtaXNzaW9uczogW10sXHJcbiAgICB9LFxyXG4gICAgdG9rZW46ICdtb2NrLXRva2VuLWFkbWluLTY3ODkwJyxcclxuICB9LFxyXG4gICdraXRjaGVuMUBjb3p5Y29ybmVyLmNvbSc6IHtcclxuICAgIHBhc3N3b3JkOiAna2l0Y2hlbjEyMycsXHJcbiAgICB1c2VyOiB7XHJcbiAgICAgIGlkOiAzLFxyXG4gICAgICBlbWFpbDogJ2tpdGNoZW4xQGNvenljb3JuZXIuY29tJyxcclxuICAgICAgcm9sZTogJ1JPTEVfS0lUQ0hFTicsXHJcbiAgICAgIHJlc3RhdXJhbnRJZDogMSxcclxuICAgICAgYnJhbmNoSWQ6IDEsXHJcbiAgICAgIGZ1bGxOYW1lOiAnUmFzaGFkIEFsaXlldicsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBbXSxcclxuICAgIH0sXHJcbiAgICB0b2tlbjogJ21vY2stdG9rZW4ta2l0Y2hlbi0xMTExMScsXHJcbiAgfSxcclxufTtcclxuXHJcbmNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7XHJcbiAgaHR0cE9ubHk6IHRydWUsXHJcbiAgc2FtZVNpdGU6ICdsYXgnIGFzIGNvbnN0LFxyXG4gIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICBwYXRoOiAnLycsXHJcbn07XHJcblxyXG5jb25zdCBleHRyYWN0QXV0aFJlc3BvbnNlID0gKGRhdGE6IGFueSk6IEF1dGhTZXNzaW9uID0+IHtcclxuICBjb25zdCB0b2tlbjogc3RyaW5nIHwgdW5kZWZpbmVkID1cclxuICAgIGRhdGE/LnRva2VuID8/IGRhdGE/LmFjY2Vzc1Rva2VuID8/IGRhdGE/Lmp3dCA/PyBkYXRhPy5hY2Nlc3NfdG9rZW47XHJcblxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBObyB0b2tlbiBmb3VuZCBpbiByZXNwb25zZS4gUmVzcG9uc2Uga2V5czonLCBPYmplY3Qua2V5cyhkYXRhIHx8IHt9KSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gUmVzcG9uc2UgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvdW5kIGluIGJhY2tlbmQgcmVzcG9uc2UnKTtcclxuICB9XHJcblxyXG4gIGxldCBjbGFpbXM7XHJcbiAgdHJ5IHtcclxuICAgIGNsYWltcyA9IHBhcnNlSnd0KHRva2VuKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIEZhaWxlZCB0byBwYXJzZSBKV1QgdG9rZW46JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpXVCB0b2tlbiBmb3JtYXQnKTtcclxuICB9XHJcblxyXG4gIGxldCB1c2VyOiBBdXRoVXNlciB8IHVuZGVmaW5lZCA9IGJ1aWxkQXV0aFVzZXIoZGF0YT8udXNlciwgY2xhaW1zKTtcclxuXHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICB1c2VyID0gYnVpbGRBdXRoVXNlcihkYXRhLCBjbGFpbXMpO1xyXG4gIH1cclxuXHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICB1c2VyID0gYnVpbGRVc2VyRnJvbUNsYWltcyhjbGFpbXMpO1xyXG4gIH1cclxuXHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gVW5hYmxlIHRvIGJ1aWxkIHVzZXIgZnJvbSByZXNwb25zZS4gUmVzcG9uc2UgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gSldUIGNsYWltczonLCBKU09OLnN0cmluZ2lmeShjbGFpbXMsIG51bGwsIDIpKTtcclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGV4dHJhY3QgdXNlciBpbmZvcm1hdGlvbiBmcm9tIGJhY2tlbmQgcmVzcG9uc2UnKTtcclxuICB9XHJcblxyXG4gIGFwcGx5Q2xhaW1zVG9Vc2VyKHVzZXIsIGNsYWltcyk7XHJcblxyXG4gIHJldHVybiB7IHRva2VuLCB1c2VyIH07XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgY29uc3QgcGF5bG9hZDogTG9naW5QYXlsb2FkID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgXHJcbiAgLy8gTW9jayBtb2RlOiByZXR1cm4gZmFrZSBhdXRoZW50aWNhdGlvblxyXG4gIGlmIChVU0VfTU9DS19EQVRBKSB7XHJcbiAgICBjb25zb2xlLmxvZygnW0F1dGhdIE1vY2sgbW9kZSBlbmFibGVkIC0gdXNpbmcgbW9jayBhdXRoZW50aWNhdGlvbicpO1xyXG4gICAgY29uc3QgbW9ja0F1dGggPSBNT0NLX1VTRVJTW3BheWxvYWQuZW1haWwudG9Mb3dlckNhc2UoKV07XHJcbiAgICBcclxuICAgIGlmICghbW9ja0F1dGggfHwgbW9ja0F1dGgucGFzc3dvcmQgIT09IHBheWxvYWQucGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChtb2NrQXV0aC51c2VyLnJvbGUgPT09ICdST0xFX1dBSVRFUicpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgbWVzc2FnZTogJ0xvZ2luIHJlc3RyaWN0ZWQgZm9yIHRoaXMgcm9sZScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgc2Vzc2lvbjogQXV0aFNlc3Npb24gPSB7XHJcbiAgICAgIHRva2VuOiBtb2NrQXV0aC50b2tlbixcclxuICAgICAgdXNlcjogbW9ja0F1dGgudXNlcixcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xyXG4gICAgY29va2llU3RvcmUuc2V0KCd0b2tlbicsIHNlc3Npb24udG9rZW4sIGNvb2tpZU9wdGlvbnMpO1xyXG4gICAgY29va2llU3RvcmUuc2V0KCdyb2xlJywgc2Vzc2lvbi51c2VyLnJvbGUsIHsgLi4uY29va2llT3B0aW9ucywgaHR0cE9ubHk6IGZhbHNlIH0pO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnW0F1dGhdIE1vY2sgbG9naW4gc3VjY2Vzc2Z1bCBmb3I6JywgcGF5bG9hZC5lbWFpbCk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oc2Vzc2lvbik7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFJlYWwgQVBJIG1vZGVcclxuICBjb25zdCBsb2dpblVybCA9IGAke0FQSV9CQVNFX1VSTH0vYXV0aC9sb2dpbmA7XHJcblxyXG4gIGNvbnNvbGUubG9nKCdbQXV0aF0gQXR0ZW1wdGluZyBsb2dpbiB0bzonLCBsb2dpblVybCk7XHJcbiAgY29uc29sZS5sb2coJ1tBdXRoXSBMb2dpbiBwYXlsb2FkOicsIHsgZW1haWw6IHBheWxvYWQuZW1haWwsIHBhc3N3b3JkOiAnKioqJyB9KTtcclxuXHJcbiAgbGV0IHJlc3BvbnNlOiBSZXNwb25zZTtcclxuICB0cnkge1xyXG4gICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChsb2dpblVybCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBOZXR3b3JrIGVycm9yIGNvbm5lY3RpbmcgdG8gYmFja2VuZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgbWVzc2FnZTogYENhbm5vdCBjb25uZWN0IHRvIGJhY2tlbmQgc2VydmVyIGF0ICR7bG9naW5Vcmx9LiBQbGVhc2UgZW5zdXJlIHRoZSBiYWNrZW5kIGlzIHJ1bm5pbmcuYCB9LFxyXG4gICAgICB7IHN0YXR1czogNTAzIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygnW0F1dGhdIEJhY2tlbmQgcmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblxyXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgY29uc3QgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xyXG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIEF1dGhlbnRpY2F0aW9uIGZhaWxlZCAoNDAxKTonLCBlcnJvckJvZHkpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICBjb25zdCBlcnJvckJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gQmFja2VuZCBlcnJvciByZXNwb25zZTonLCB7XHJcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LFxyXG4gICAgICBib2R5OiBlcnJvckJvZHksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiBlcnJvckJvZHk/Lm1lc3NhZ2UgPz8gYExvZ2luIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAgfSxcclxuICAgICAgeyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICBjb25zb2xlLmxvZygnW0F1dGhdIEJhY2tlbmQgcmVzcG9uc2UgcmVjZWl2ZWQuIEtleXM6JywgT2JqZWN0LmtleXMoZGF0YSB8fCB7fSkpO1xyXG4gIFxyXG4gIGxldCBzZXNzaW9uOiBBdXRoU2Vzc2lvbjtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHNlc3Npb24gPSBleHRyYWN0QXV0aFJlc3BvbnNlKGRhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gVW5hYmxlIHRvIHBhcnNlIGxvZ2luIHJlc3BvbnNlOicsIGVycm9yKTtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1VuZXhwZWN0ZWQgbG9naW4gcmVzcG9uc2UgZnJvbSBiYWNrZW5kJztcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFzZXNzaW9uLnVzZXIgfHwgIXNlc3Npb24udG9rZW4pIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBtZXNzYWdlOiAnVW5hYmxlIHRvIGRldGVybWluZSB1c2VyIHJvbGUgb3IgdG9rZW4nIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChzZXNzaW9uLnVzZXIucm9sZSA9PT0gJ1JPTEVfV0FJVEVSJykge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IG1lc3NhZ2U6ICdMb2dpbiByZXN0cmljdGVkIGZvciB0aGlzIHJvbGUnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xyXG4gIGNvb2tpZVN0b3JlLnNldCgndG9rZW4nLCBzZXNzaW9uLnRva2VuLCBjb29raWVPcHRpb25zKTtcclxuICBjb29raWVTdG9yZS5zZXQoJ3JvbGUnLCBzZXNzaW9uLnVzZXIucm9sZSwgeyAuLi5jb29raWVPcHRpb25zLCBodHRwT25seTogZmFsc2UgfSk7XHJcblxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzZXNzaW9uKTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNvb2tpZXMiLCJBUElfQkFTRV9VUkwiLCJVU0VfTU9DS19EQVRBIiwiYXBwbHlDbGFpbXNUb1VzZXIiLCJidWlsZEF1dGhVc2VyIiwiYnVpbGRVc2VyRnJvbUNsYWltcyIsInBhcnNlSnd0IiwiTU9DS19VU0VSUyIsInBhc3N3b3JkIiwidXNlciIsImlkIiwiZW1haWwiLCJyb2xlIiwicmVzdGF1cmFudElkIiwiYnJhbmNoSWQiLCJmdWxsTmFtZSIsInBlcm1pc3Npb25zIiwidG9rZW4iLCJjb29raWVPcHRpb25zIiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInNlY3VyZSIsInByb2Nlc3MiLCJwYXRoIiwiZXh0cmFjdEF1dGhSZXNwb25zZSIsImRhdGEiLCJhY2Nlc3NUb2tlbiIsImp3dCIsImFjY2Vzc190b2tlbiIsImNvbnNvbGUiLCJlcnJvciIsIk9iamVjdCIsImtleXMiLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJjbGFpbXMiLCJQT1NUIiwicmVxdWVzdCIsInBheWxvYWQiLCJqc29uIiwibG9nIiwibW9ja0F1dGgiLCJ0b0xvd2VyQ2FzZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzZXNzaW9uIiwiY29va2llU3RvcmUiLCJzZXQiLCJsb2dpblVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImVycm9yQm9keSIsImNhdGNoIiwib2siLCJzdGF0dXNUZXh0IiwiZXJyb3JNZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyClaimsToUser: () => (/* binding */ applyClaimsToUser),\n/* harmony export */   buildAuthUser: () => (/* binding */ buildAuthUser),\n/* harmony export */   buildUserFromClaims: () => (/* binding */ buildUserFromClaims)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\n\nconst coerceNumber = (value, fallback = null)=>{\n    if (value === undefined || value === null) return fallback;\n    const num = Number(value);\n    return Number.isFinite(num) ? num : fallback;\n};\nconst resolveRole = (value)=>(0,_roles__WEBPACK_IMPORTED_MODULE_0__.normalizeUserRole)(value ?? undefined);\nconst ensurePermissions = (permissions)=>Array.isArray(permissions) ? permissions.map(String) : [];\nconst applyClaimsToUser = (user, claims)=>{\n    if (!user || !claims) return;\n    const claimRole = resolveRole(claims.role ?? null);\n    if (claimRole) {\n        user.role = claimRole;\n    }\n    const restaurantId = coerceNumber(claims.restaurantId);\n    if (restaurantId !== null) {\n        user.restaurantId = restaurantId;\n    }\n    const branchId = coerceNumber(claims.branchId, null);\n    if (branchId !== null || claims.branchId === null) {\n        user.branchId = branchId;\n    }\n    if (claims.email) {\n        user.email = claims.email;\n    }\n    if (claims.restaurantName !== undefined) {\n        user.restaurantName = claims.restaurantName ?? null;\n    }\n    if (claims.permissions) {\n        user.permissions = ensurePermissions(claims.permissions);\n    }\n    if (!user.id && claims.userId) {\n        user.id = Number(claims.userId);\n    }\n};\nconst buildUserFromClaims = (claims)=>{\n    if (!claims) return undefined;\n    const role = resolveRole(claims.role ?? null);\n    if (!role) return undefined;\n    return {\n        id: coerceNumber(claims.userId, 0) ?? 0,\n        email: claims.email ?? \"\",\n        role,\n        restaurantId: coerceNumber(claims.restaurantId, 0) ?? 0,\n        branchId: coerceNumber(claims.branchId, null),\n        restaurantName: claims.restaurantName ?? null,\n        permissions: ensurePermissions(claims.permissions)\n    };\n};\nconst buildAuthUser = (payload, claims)=>{\n    if (!payload && !claims) return undefined;\n    let user;\n    if (payload) {\n        const role = resolveRole(payload.role ?? payload.authority ?? payload.authorities?.[0]?.authority ?? payload.authorities?.[0]?.role);\n        if (role) {\n            user = {\n                id: Number(payload.id ?? payload.userId ?? payload.user?.id ?? 0),\n                email: payload.email ?? payload.username ?? payload.user?.email ?? \"\",\n                role,\n                restaurantId: Number(payload.restaurantId ?? payload.restaurant?.id ?? payload.user?.restaurantId ?? 0) || 0,\n                branchId: coerceNumber(payload.branchId ?? payload.branch?.id ?? payload.user?.branchId ?? payload.user?.branch?.id, null),\n                restaurantName: payload.restaurantName ?? payload.restaurant?.name ?? null,\n                permissions: ensurePermissions(payload.permissions)\n            };\n        }\n    }\n    if (!user && claims) {\n        user = buildUserFromClaims(claims);\n    }\n    if (user && claims) {\n        applyClaimsToUser(user, claims);\n    }\n    if (user) {\n        user.permissions = Array.isArray(user.permissions) ? user.permissions : [];\n    }\n    return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVNLFNBQVM7Z0JBQ25FSDtnQkFDQUMsY0FDRWQsT0FBT3NCLFFBQVFSLFlBQVksSUFBSVEsUUFBUUksVUFBVSxFQUFFUixNQUFNSSxRQUFRWixJQUFJLEVBQUVJLGdCQUFnQixNQUFNO2dCQUMvRkMsVUFDRXBCLGFBQ0UyQixRQUFRUCxRQUFRLElBQ2RPLFFBQVFLLE1BQU0sRUFBRVQsTUFDaEJJLFFBQVFaLElBQUksRUFBRUssWUFDZE8sUUFBUVosSUFBSSxFQUFFaUIsUUFBUVQsSUFDeEI7Z0JBRUpELGdCQUFnQkssUUFBUUwsY0FBYyxJQUFJSyxRQUFRSSxVQUFVLEVBQUVFLFFBQVE7Z0JBQ3RFeEIsYUFBYUQsa0JBQWtCbUIsUUFBUWxCLFdBQVc7WUFDcEQ7UUFDRjtJQUNGO0lBRUEsSUFBSSxDQUFDTSxRQUFRQyxRQUFRO1FBQ25CRCxPQUFPVSxvQkFBb0JUO0lBQzdCO0lBRUEsSUFBSUQsUUFBUUMsUUFBUTtRQUNsQkYsa0JBQWtCQyxNQUFNQztJQUMxQjtJQUVBLElBQUlELE1BQU07UUFDUkEsS0FBS04sV0FBVyxHQUFHQyxNQUFNQyxPQUFPLENBQUNJLEtBQUtOLFdBQVcsSUFBSU0sS0FBS04sV0FBVyxHQUFHLEVBQUU7SUFDNUU7SUFFQSxPQUFPTTtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5pbXBvcnQgeyBub3JtYWxpemVVc2VyUm9sZSB9IGZyb20gJy4vcm9sZXMnO1xyXG5pbXBvcnQgdHlwZSB7IFRva2VuQ2xhaW1zIH0gZnJvbSAnLi90b2tlbic7XHJcblxyXG5jb25zdCBjb2VyY2VOdW1iZXIgPSAodmFsdWU6IHVua25vd24sIGZhbGxiYWNrOiBudW1iZXIgfCBudWxsID0gbnVsbCk6IG51bWJlciB8IG51bGwgPT4ge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm4gZmFsbGJhY2s7XHJcbiAgY29uc3QgbnVtID0gTnVtYmVyKHZhbHVlKTtcclxuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bSkgPyBudW0gOiBmYWxsYmFjaztcclxufTtcclxuXHJcbmNvbnN0IHJlc29sdmVSb2xlID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT4gbm9ybWFsaXplVXNlclJvbGUodmFsdWUgPz8gdW5kZWZpbmVkKTtcclxuXHJcbmNvbnN0IGVuc3VyZVBlcm1pc3Npb25zID0gKHBlcm1pc3Npb25zOiB1bmtub3duKTogc3RyaW5nW10gPT5cclxuICBBcnJheS5pc0FycmF5KHBlcm1pc3Npb25zKSA/IHBlcm1pc3Npb25zLm1hcChTdHJpbmcpIDogW107XHJcblxyXG5leHBvcnQgY29uc3QgYXBwbHlDbGFpbXNUb1VzZXIgPSAodXNlcjogQXV0aFVzZXIsIGNsYWltczogVG9rZW5DbGFpbXMpID0+IHtcclxuICBpZiAoIXVzZXIgfHwgIWNsYWltcykgcmV0dXJuO1xyXG4gIGNvbnN0IGNsYWltUm9sZSA9IHJlc29sdmVSb2xlKGNsYWltcy5yb2xlID8/IG51bGwpO1xyXG4gIGlmIChjbGFpbVJvbGUpIHtcclxuICAgIHVzZXIucm9sZSA9IGNsYWltUm9sZTtcclxuICB9XHJcbiAgY29uc3QgcmVzdGF1cmFudElkID0gY29lcmNlTnVtYmVyKGNsYWltcy5yZXN0YXVyYW50SWQpO1xyXG4gIGlmIChyZXN0YXVyYW50SWQgIT09IG51bGwpIHtcclxuICAgIHVzZXIucmVzdGF1cmFudElkID0gcmVzdGF1cmFudElkO1xyXG4gIH1cclxuICBjb25zdCBicmFuY2hJZCA9IGNvZXJjZU51bWJlcihjbGFpbXMuYnJhbmNoSWQsIG51bGwpO1xyXG4gIGlmIChicmFuY2hJZCAhPT0gbnVsbCB8fCBjbGFpbXMuYnJhbmNoSWQgPT09IG51bGwpIHtcclxuICAgIHVzZXIuYnJhbmNoSWQgPSBicmFuY2hJZDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5lbWFpbCkge1xyXG4gICAgdXNlci5lbWFpbCA9IGNsYWltcy5lbWFpbDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5yZXN0YXVyYW50TmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICB1c2VyLnJlc3RhdXJhbnROYW1lID0gY2xhaW1zLnJlc3RhdXJhbnROYW1lID8/IG51bGw7XHJcbiAgfVxyXG4gIGlmIChjbGFpbXMucGVybWlzc2lvbnMpIHtcclxuICAgIHVzZXIucGVybWlzc2lvbnMgPSBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpO1xyXG4gIH1cclxuICBpZiAoIXVzZXIuaWQgJiYgY2xhaW1zLnVzZXJJZCkge1xyXG4gICAgdXNlci5pZCA9IE51bWJlcihjbGFpbXMudXNlcklkKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRVc2VyRnJvbUNsYWltcyA9IChjbGFpbXM6IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShjbGFpbXMucm9sZSA/PyBudWxsKTtcclxuICBpZiAoIXJvbGUpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnVzZXJJZCwgMCkgPz8gMCxcclxuICAgIGVtYWlsOiBjbGFpbXMuZW1haWwgPz8gJycsXHJcbiAgICByb2xlLFxyXG4gICAgcmVzdGF1cmFudElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnJlc3RhdXJhbnRJZCwgMCkgPz8gMCxcclxuICAgIGJyYW5jaElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLmJyYW5jaElkLCBudWxsKSxcclxuICAgIHJlc3RhdXJhbnROYW1lOiBjbGFpbXMucmVzdGF1cmFudE5hbWUgPz8gbnVsbCxcclxuICAgIHBlcm1pc3Npb25zOiBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRBdXRoVXNlciA9IChwYXlsb2FkOiBhbnksIGNsYWltcz86IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcGF5bG9hZCAmJiAhY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGxldCB1c2VyOiBBdXRoVXNlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgaWYgKHBheWxvYWQpIHtcclxuICAgIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShcclxuICAgICAgcGF5bG9hZC5yb2xlID8/XHJcbiAgICAgICAgcGF5bG9hZC5hdXRob3JpdHkgPz9cclxuICAgICAgICBwYXlsb2FkLmF1dGhvcml0aWVzPy5bMF0/LmF1dGhvcml0eSA/P1xyXG4gICAgICAgIHBheWxvYWQuYXV0aG9yaXRpZXM/LlswXT8ucm9sZVxyXG4gICAgKTtcclxuICAgIGlmIChyb2xlKSB7XHJcbiAgICAgIHVzZXIgPSB7XHJcbiAgICAgICAgaWQ6IE51bWJlcihwYXlsb2FkLmlkID8/IHBheWxvYWQudXNlcklkID8/IHBheWxvYWQudXNlcj8uaWQgPz8gMCksXHJcbiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwgPz8gcGF5bG9hZC51c2VybmFtZSA/PyBwYXlsb2FkLnVzZXI/LmVtYWlsID8/ICcnLFxyXG4gICAgICAgIHJvbGUsXHJcbiAgICAgICAgcmVzdGF1cmFudElkOlxyXG4gICAgICAgICAgTnVtYmVyKHBheWxvYWQucmVzdGF1cmFudElkID8/IHBheWxvYWQucmVzdGF1cmFudD8uaWQgPz8gcGF5bG9hZC51c2VyPy5yZXN0YXVyYW50SWQgPz8gMCkgfHwgMCxcclxuICAgICAgICBicmFuY2hJZDpcclxuICAgICAgICAgIGNvZXJjZU51bWJlcihcclxuICAgICAgICAgICAgcGF5bG9hZC5icmFuY2hJZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQuYnJhbmNoPy5pZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQudXNlcj8uYnJhbmNoSWQgPz9cclxuICAgICAgICAgICAgICBwYXlsb2FkLnVzZXI/LmJyYW5jaD8uaWQsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgcmVzdGF1cmFudE5hbWU6IHBheWxvYWQucmVzdGF1cmFudE5hbWUgPz8gcGF5bG9hZC5yZXN0YXVyYW50Py5uYW1lID8/IG51bGwsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IGVuc3VyZVBlcm1pc3Npb25zKHBheWxvYWQucGVybWlzc2lvbnMpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCF1c2VyICYmIGNsYWltcykge1xyXG4gICAgdXNlciA9IGJ1aWxkVXNlckZyb21DbGFpbXMoY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyICYmIGNsYWltcykge1xyXG4gICAgYXBwbHlDbGFpbXNUb1VzZXIodXNlciwgY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyKSB7XHJcbiAgICB1c2VyLnBlcm1pc3Npb25zID0gQXJyYXkuaXNBcnJheSh1c2VyLnBlcm1pc3Npb25zKSA/IHVzZXIucGVybWlzc2lvbnMgOiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiB1c2VyO1xyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVVzZXJSb2xlIiwiY29lcmNlTnVtYmVyIiwidmFsdWUiLCJmYWxsYmFjayIsInVuZGVmaW5lZCIsIm51bSIsIk51bWJlciIsImlzRmluaXRlIiwicmVzb2x2ZVJvbGUiLCJlbnN1cmVQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiU3RyaW5nIiwiYXBwbHlDbGFpbXNUb1VzZXIiLCJ1c2VyIiwiY2xhaW1zIiwiY2xhaW1Sb2xlIiwicm9sZSIsInJlc3RhdXJhbnRJZCIsImJyYW5jaElkIiwiZW1haWwiLCJyZXN0YXVyYW50TmFtZSIsImlkIiwidXNlcklkIiwiYnVpbGRVc2VyRnJvbUNsYWltcyIsImJ1aWxkQXV0aFVzZXIiLCJwYXlsb2FkIiwiYXV0aG9yaXR5IiwiYXV0aG9yaXRpZXMiLCJ1c2VybmFtZSIsInJlc3RhdXJhbnQiLCJicmFuY2giLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_BASE_URL: () => (/* binding */ API_BASE_URL),\n/* harmony export */   DASHBOARD_REDIRECTS: () => (/* binding */ DASHBOARD_REDIRECTS),\n/* harmony export */   USE_MOCK_DATA: () => (/* binding */ USE_MOCK_DATA)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\nconst API_BASE_URL = \"http://localhost:8080/api\"?.replace(/\\/+$/, \"\") || 0 || 0;\n/**\r\n * Enable mock data mode for development without a backend.\r\n * Set NEXT_PUBLIC_USE_MOCK_DATA=true in .env.local to enable.\r\n */ const USE_MOCK_DATA = \"true\" === \"true\";\n\nconst DASHBOARD_REDIRECTS = _roles__WEBPACK_IMPORTED_MODULE_0__.rolePathMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU8sTUFBTUEsZUFDWEMsMkJBQW9DLEVBQUVHLFFBQVEsUUFBUSxPQUN0REgsQ0FBaUQsSUFDakQsRUFBNEI7QUFFOUI7OztDQUdDLEdBQ00sTUFBTUssZ0JBQWdCTCxNQUFxQyxLQUFLLE9BQU87QUFHeEM7QUFFL0IsTUFBTVEsc0JBQWdERCwrQ0FBV0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Ly4vc3JjL2xpYi9lbnYudHM/ODQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQVBJX0JBU0VfVVJMID1cclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfQkFTRV9VUkw/LnJlcGxhY2UoL1xcLyskLywgJycpIHx8XHJcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTD8ucmVwbGFjZSgvXFwvKyQvLCAnJykgfHxcclxuICAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaSc7XHJcblxyXG4vKipcclxuICogRW5hYmxlIG1vY2sgZGF0YSBtb2RlIGZvciBkZXZlbG9wbWVudCB3aXRob3V0IGEgYmFja2VuZC5cclxuICogU2V0IE5FWFRfUFVCTElDX1VTRV9NT0NLX0RBVEE9dHJ1ZSBpbiAuZW52LmxvY2FsIHRvIGVuYWJsZS5cclxuICovXHJcbmV4cG9ydCBjb25zdCBVU0VfTU9DS19EQVRBID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gJ3RydWUnO1xyXG5cclxuaW1wb3J0IHR5cGUgeyBVc2VyUm9sZSB9IGZyb20gJ0AvdHlwZXMvYXV0aCc7XHJcbmltcG9ydCB7IHJvbGVQYXRoTWFwIH0gZnJvbSAnLi9yb2xlcyc7XHJcblxyXG5leHBvcnQgY29uc3QgREFTSEJPQVJEX1JFRElSRUNUUzogUmVjb3JkPFVzZXJSb2xlLCBzdHJpbmc+ID0gcm9sZVBhdGhNYXA7XHJcblxyXG4iXSwibmFtZXMiOlsiQVBJX0JBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9CQVNFX1VSTCIsInJlcGxhY2UiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiVVNFX01PQ0tfREFUQSIsIk5FWFRfUFVCTElDX1VTRV9NT0NLX0RBVEEiLCJyb2xlUGF0aE1hcCIsIkRBU0hCT0FSRF9SRURJUkVDVFMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/roles.ts":
/*!**************************!*\
  !*** ./src/lib/roles.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeUserRole: () => (/* binding */ normalizeUserRole),\n/* harmony export */   rolePathMap: () => (/* binding */ rolePathMap)\n/* harmony export */ });\nconst ROLE_MAP = {\n    ROLE_SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ROLE_ADMIN: \"ROLE_ADMIN\",\n    ROLE_WAITER: \"ROLE_WAITER\",\n    SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ADMIN: \"ROLE_ADMIN\",\n    WAITER: \"ROLE_WAITER\"\n};\nconst normalizeUserRole = (role)=>{\n    if (!role) return undefined;\n    const key = role.toUpperCase();\n    return ROLE_MAP[key];\n};\nconst rolePathMap = {\n    ROLE_SUPERADMIN: \"/superadmin/dashboard\",\n    ROLE_ADMIN: \"/admin/dashboard\",\n    ROLE_WAITER: \"/login\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JvbGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsTUFBTUEsV0FBcUM7SUFDekNDLGlCQUFpQjtJQUNqQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsT0FBTztJQUNQQyxRQUFRO0FBQ1Y7QUFFTyxNQUFNQyxvQkFBb0IsQ0FBQ0M7SUFDaEMsSUFBSSxDQUFDQSxNQUFNLE9BQU9DO0lBQ2xCLE1BQU1DLE1BQU1GLEtBQUtHLFdBQVc7SUFDNUIsT0FBT1gsUUFBUSxDQUFDVSxJQUFJO0FBQ3RCLEVBQUU7QUFFSyxNQUFNRSxjQUF3QztJQUNuRFgsaUJBQWlCO0lBQ2pCQyxZQUFZO0lBQ1pDLGFBQWE7QUFDZixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvbGliL3JvbGVzLnRzPzc3ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBVc2VyUm9sZSB9IGZyb20gJ0AvdHlwZXMvYXV0aCc7XHJcblxyXG5jb25zdCBST0xFX01BUDogUmVjb3JkPHN0cmluZywgVXNlclJvbGU+ID0ge1xyXG4gIFJPTEVfU1VQRVJBRE1JTjogJ1JPTEVfU1VQRVJBRE1JTicsXHJcbiAgUk9MRV9BRE1JTjogJ1JPTEVfQURNSU4nLFxyXG4gIFJPTEVfV0FJVEVSOiAnUk9MRV9XQUlURVInLFxyXG4gIFNVUEVSQURNSU46ICdST0xFX1NVUEVSQURNSU4nLFxyXG4gIEFETUlOOiAnUk9MRV9BRE1JTicsXHJcbiAgV0FJVEVSOiAnUk9MRV9XQUlURVInLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVVzZXJSb2xlID0gKHJvbGU/OiBzdHJpbmcgfCBudWxsKTogVXNlclJvbGUgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcm9sZSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICBjb25zdCBrZXkgPSByb2xlLnRvVXBwZXJDYXNlKCk7XHJcbiAgcmV0dXJuIFJPTEVfTUFQW2tleV07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgcm9sZVBhdGhNYXA6IFJlY29yZDxVc2VyUm9sZSwgc3RyaW5nPiA9IHtcclxuICBST0xFX1NVUEVSQURNSU46ICcvc3VwZXJhZG1pbi9kYXNoYm9hcmQnLFxyXG4gIFJPTEVfQURNSU46ICcvYWRtaW4vZGFzaGJvYXJkJyxcclxuICBST0xFX1dBSVRFUjogJy9sb2dpbicsXHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiUk9MRV9NQVAiLCJST0xFX1NVUEVSQURNSU4iLCJST0xFX0FETUlOIiwiUk9MRV9XQUlURVIiLCJTVVBFUkFETUlOIiwiQURNSU4iLCJXQUlURVIiLCJub3JtYWxpemVVc2VyUm9sZSIsInJvbGUiLCJ1bmRlZmluZWQiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsInJvbGVQYXRoTWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/roles.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/token.ts":
/*!**************************!*\
  !*** ./src/lib/token.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJwt: () => (/* binding */ parseJwt)\n/* harmony export */ });\nconst decodeBase64Url = (value)=>{\n    try {\n        const base64 = value.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        if (true) {\n            return Buffer.from(base64, \"base64\").toString(\"utf8\");\n        }\n        // Browser\n        return decodeURIComponent(atob(base64).split(\"\").map((c)=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(\"\"));\n    } catch  {\n        return \"\";\n    }\n};\nconst parseJwt = (token)=>{\n    if (!token) return {};\n    const parts = token.split(\".\");\n    if (parts.length < 2) return {};\n    const payloadRaw = decodeBase64Url(parts[1]);\n    if (!payloadRaw) return {};\n    try {\n        const payload = JSON.parse(payloadRaw);\n        return {\n            userId: payload.userId ?? payload.sub ?? payload.id ?? null,\n            role: payload.role ?? payload.authority ?? null,\n            restaurantId: payload.restaurantId ?? payload.restId ?? null,\n            branchId: payload.branchId ?? null,\n            email: payload.email ?? payload.username ?? null,\n            restaurantName: payload.restaurantName ?? null,\n            permissions: Array.isArray(payload.permissions) ? payload.permissions : undefined\n        };\n    } catch (error) {\n        console.error(\"[token] Unable to parse JWT payload\", error);\n        return {};\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Rva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFVQSxNQUFNQSxrQkFBa0IsQ0FBQ0M7SUFDdkIsSUFBSTtRQUNGLE1BQU1DLFNBQVNELE1BQU1FLE9BQU8sQ0FBQyxNQUFNLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO1FBQ3RELElBQUksSUFBa0IsRUFBYTtZQUNqQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNILFFBQVEsVUFBVUksUUFBUSxDQUFDO1FBQ2hEO1FBQ0EsVUFBVTtRQUNWLE9BQU9DLG1CQUNMQyxLQUFLTixRQUNGTyxLQUFLLENBQUMsSUFDTkMsR0FBRyxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVBLEVBQUVDLFVBQVUsQ0FBQyxHQUFHTixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUNPLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUM5REMsSUFBSSxDQUFDO0lBRVosRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxNQUFNQyxXQUFXLENBQUNDO0lBQ3ZCLElBQUksQ0FBQ0EsT0FBTyxPQUFPLENBQUM7SUFDcEIsTUFBTUMsUUFBUUQsTUFBTVAsS0FBSyxDQUFDO0lBQzFCLElBQUlRLE1BQU1DLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQztJQUM5QixNQUFNQyxhQUFhbkIsZ0JBQWdCaUIsS0FBSyxDQUFDLEVBQUU7SUFDM0MsSUFBSSxDQUFDRSxZQUFZLE9BQU8sQ0FBQztJQUN6QixJQUFJO1FBQ0YsTUFBTUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDSDtRQUMzQixPQUFPO1lBQ0xJLFFBQVFILFFBQVFHLE1BQU0sSUFBSUgsUUFBUUksR0FBRyxJQUFJSixRQUFRSyxFQUFFLElBQUk7WUFDdkRDLE1BQU1OLFFBQVFNLElBQUksSUFBSU4sUUFBUU8sU0FBUyxJQUFJO1lBQzNDQyxjQUFjUixRQUFRUSxZQUFZLElBQUlSLFFBQVFTLE1BQU0sSUFBSTtZQUN4REMsVUFBVVYsUUFBUVUsUUFBUSxJQUFJO1lBQzlCQyxPQUFPWCxRQUFRVyxLQUFLLElBQUlYLFFBQVFZLFFBQVEsSUFBSTtZQUM1Q0MsZ0JBQWdCYixRQUFRYSxjQUFjLElBQUk7WUFDMUNDLGFBQWFDLE1BQU1DLE9BQU8sQ0FBQ2hCLFFBQVFjLFdBQVcsSUFBSWQsUUFBUWMsV0FBVyxHQUFHRztRQUMxRTtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsdUNBQXVDQTtRQUNyRCxPQUFPLENBQUM7SUFDVjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvdG9rZW4udHM/MDgzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFRva2VuQ2xhaW1zIHtcclxuICB1c2VySWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIHJvbGU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlc3RhdXJhbnRJZD86IG51bWJlciB8IG51bGw7XHJcbiAgYnJhbmNoSWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcclxuICByZXN0YXVyYW50TmFtZT86IHN0cmluZyB8IG51bGw7XHJcbiAgcGVybWlzc2lvbnM/OiBzdHJpbmdbXSB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGRlY29kZUJhc2U2NFVybCA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYmFzZTY0ID0gdmFsdWUucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4gQnVmZmVyLmZyb20oYmFzZTY0LCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0ZjgnKTtcclxuICAgIH1cclxuICAgIC8vIEJyb3dzZXJcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXHJcbiAgICAgIGF0b2IoYmFzZTY0KVxyXG4gICAgICAgIC5zcGxpdCgnJylcclxuICAgICAgICAubWFwKChjKSA9PiBgJSR7YDAwJHtjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfWAuc2xpY2UoLTIpfWApXHJcbiAgICAgICAgLmpvaW4oJycpXHJcbiAgICApO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZUp3dCA9ICh0b2tlbj86IHN0cmluZyB8IG51bGwpOiBUb2tlbkNsYWltcyA9PiB7XHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBheWxvYWRSYXcgPSBkZWNvZGVCYXNlNjRVcmwocGFydHNbMV0pO1xyXG4gIGlmICghcGF5bG9hZFJhdykgcmV0dXJuIHt9O1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkUmF3KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZDogcGF5bG9hZC51c2VySWQgPz8gcGF5bG9hZC5zdWIgPz8gcGF5bG9hZC5pZCA/PyBudWxsLFxyXG4gICAgICByb2xlOiBwYXlsb2FkLnJvbGUgPz8gcGF5bG9hZC5hdXRob3JpdHkgPz8gbnVsbCxcclxuICAgICAgcmVzdGF1cmFudElkOiBwYXlsb2FkLnJlc3RhdXJhbnRJZCA/PyBwYXlsb2FkLnJlc3RJZCA/PyBudWxsLFxyXG4gICAgICBicmFuY2hJZDogcGF5bG9hZC5icmFuY2hJZCA/PyBudWxsLFxyXG4gICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCA/PyBwYXlsb2FkLnVzZXJuYW1lID8/IG51bGwsXHJcbiAgICAgIHJlc3RhdXJhbnROYW1lOiBwYXlsb2FkLnJlc3RhdXJhbnROYW1lID8/IG51bGwsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBBcnJheS5pc0FycmF5KHBheWxvYWQucGVybWlzc2lvbnMpID8gcGF5bG9hZC5wZXJtaXNzaW9ucyA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1t0b2tlbl0gVW5hYmxlIHRvIHBhcnNlIEpXVCBwYXlsb2FkJywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHt9O1xyXG4gIH1cclxufTtcclxuXHJcbiJdLCJuYW1lcyI6WyJkZWNvZGVCYXNlNjRVcmwiLCJ2YWx1ZSIsImJhc2U2NCIsInJlcGxhY2UiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwic3BsaXQiLCJtYXAiLCJjIiwiY2hhckNvZGVBdCIsInNsaWNlIiwiam9pbiIsInBhcnNlSnd0IiwidG9rZW4iLCJwYXJ0cyIsImxlbmd0aCIsInBheWxvYWRSYXciLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwidXNlcklkIiwic3ViIiwiaWQiLCJyb2xlIiwiYXV0aG9yaXR5IiwicmVzdGF1cmFudElkIiwicmVzdElkIiwiYnJhbmNoSWQiLCJlbWFpbCIsInVzZXJuYW1lIiwicmVzdGF1cmFudE5hbWUiLCJwZXJtaXNzaW9ucyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/token.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();