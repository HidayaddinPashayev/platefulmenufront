"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/session/route";
exports.ids = ["app/api/auth/session/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsession%2Froute&page=%2Fapi%2Fauth%2Fsession%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsession%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsession%2Froute&page=%2Fapi%2Fauth%2Fsession%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsession%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ismayila_platefulmenufront_src_app_api_auth_session_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/session/route.ts */ \"(rsc)/./src/app/api/auth/session/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/session/route\",\n        pathname: \"/api/auth/session\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/session/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ismayila\\\\platefulmenufront\\\\src\\\\app\\\\api\\\\auth\\\\session\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ismayila_platefulmenufront_src_app_api_auth_session_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/session/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGc2Vzc2lvbiUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXV0aCUyRnNlc3Npb24lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhdXRoJTJGc2Vzc2lvbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNpc21heWlsYSU1Q3BsYXRlZnVsbWVudWZyb250JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNpc21heWlsYSU1Q3BsYXRlZnVsbWVudWZyb250JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM4QjtBQUMzRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Lz9hMWE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGlzbWF5aWxhXFxcXHBsYXRlZnVsbWVudWZyb250XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcc2Vzc2lvblxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9zZXNzaW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9zZXNzaW9uXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL3Nlc3Npb24vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxpc21heWlsYVxcXFxwbGF0ZWZ1bG1lbnVmcm9udFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXHNlc3Npb25cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvc2Vzc2lvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsession%2Froute&page=%2Fapi%2Fauth%2Fsession%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsession%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/session/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/auth/session/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_token__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/token */ \"(rsc)/./src/lib/token.ts\");\n\n\n\n\n\n// Mock token to user mapping\nconst MOCK_TOKENS = {\n    \"mock-token-superadmin-12345\": {\n        id: 1,\n        email: \"superadmin@cozycorner.com\",\n        role: \"ROLE_SUPERADMIN\",\n        restaurantId: 1,\n        branchId: null,\n        permissions: []\n    },\n    \"mock-token-admin-67890\": {\n        id: 2,\n        email: \"admin@downtown.cozycorner.com\",\n        role: \"ROLE_ADMIN\",\n        restaurantId: 1,\n        branchId: 1,\n        permissions: []\n    },\n    \"mock-token-kitchen-11111\": {\n        id: 3,\n        email: \"kitchen1@cozycorner.com\",\n        role: \"ROLE_KITCHEN\",\n        restaurantId: 1,\n        branchId: 1,\n        permissions: []\n    }\n};\nasync function GET() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(\"token\")?.value;\n    if (!token) {\n        const session = {\n            token: null,\n            user: null\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    }\n    // Mock mode\n    if (_lib_env__WEBPACK_IMPORTED_MODULE_2__.USE_MOCK_DATA) {\n        const user = MOCK_TOKENS[token];\n        if (!user) {\n            const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                token: null,\n                user: null\n            }, {\n                status: 200\n            });\n            response.cookies.set(\"token\", \"\", {\n                httpOnly: true,\n                path: \"/\",\n                maxAge: 0\n            });\n            response.cookies.set(\"role\", \"\", {\n                path: \"/\",\n                maxAge: 0\n            });\n            return response;\n        }\n        const session = {\n            token,\n            user\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    }\n    // Real API mode\n    const profileResponse = await fetch(`${_lib_env__WEBPACK_IMPORTED_MODULE_2__.API_BASE_URL}/auth/me`, {\n        headers: {\n            Authorization: `Bearer ${token}`\n        },\n        cache: \"no-store\"\n    }).catch((error)=>{\n        console.error(\"[Auth] profile fetch failed\", error);\n        return undefined;\n    });\n    if (!profileResponse || !profileResponse.ok) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            token: null,\n            user: null\n        }, {\n            status: 200\n        });\n        response.cookies.set(\"token\", \"\", {\n            httpOnly: true,\n            path: \"/\",\n            maxAge: 0\n        });\n        response.cookies.set(\"role\", \"\", {\n            path: \"/\",\n            maxAge: 0\n        });\n        return response;\n    }\n    const rawUser = await profileResponse.json();\n    const claims = (0,_lib_token__WEBPACK_IMPORTED_MODULE_4__.parseJwt)(token);\n    let user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildAuthUser)(rawUser, claims) ?? (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.buildUserFromClaims)(claims) ?? null;\n    if (user) {\n        (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.applyClaimsToUser)(user, claims);\n    }\n    const session = {\n        token,\n        user\n    };\n    if (!user) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            token: null,\n            user: null\n        }, {\n            status: 200\n        });\n        response.cookies.set(\"token\", \"\", {\n            httpOnly: true,\n            path: \"/\",\n            maxAge: 0\n        });\n        response.cookies.set(\"role\", \"\", {\n            path: \"/\",\n            maxAge: 0\n        });\n        return response;\n    }\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    response.cookies.set(\"role\", user.role, {\n        httpOnly: false,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        path: \"/\"\n    });\n    return response;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL3Nlc3Npb24vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ0o7QUFDaUI7QUFFMkI7QUFDNUM7QUFFdkMsNkJBQTZCO0FBQzdCLE1BQU1RLGNBQXdDO0lBQzVDLCtCQUErQjtRQUM3QkMsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsY0FBYztRQUNkQyxVQUFVO1FBQ1ZDLGFBQWEsRUFBRTtJQUNqQjtJQUNBLDBCQUEwQjtRQUN4QkwsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsY0FBYztRQUNkQyxVQUFVO1FBQ1ZDLGFBQWEsRUFBRTtJQUNqQjtJQUNBLDRCQUE0QjtRQUMxQkwsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsY0FBYztRQUNkQyxVQUFVO1FBQ1ZDLGFBQWEsRUFBRTtJQUNqQjtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUMsUUFBUWYscURBQU9BLEdBQUdnQixHQUFHLENBQUMsVUFBVUM7SUFFdEMsSUFBSSxDQUFDRixPQUFPO1FBQ1YsTUFBTUcsVUFBdUI7WUFBRUgsT0FBTztZQUFNSSxNQUFNO1FBQUs7UUFDdkQsT0FBT3BCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDRjtJQUMzQjtJQUVBLFlBQVk7SUFDWixJQUFJaEIsbURBQWFBLEVBQUU7UUFDakIsTUFBTWlCLE9BQU9aLFdBQVcsQ0FBQ1EsTUFBTTtRQUUvQixJQUFJLENBQUNJLE1BQU07WUFDVCxNQUFNRSxXQUFXdEIscURBQVlBLENBQUNxQixJQUFJLENBQWM7Z0JBQUVMLE9BQU87Z0JBQU1JLE1BQU07WUFBSyxHQUFHO2dCQUFFRyxRQUFRO1lBQUk7WUFDM0ZELFNBQVNyQixPQUFPLENBQUN1QixHQUFHLENBQUMsU0FBUyxJQUFJO2dCQUFFQyxVQUFVO2dCQUFNQyxNQUFNO2dCQUFLQyxRQUFRO1lBQUU7WUFDekVMLFNBQVNyQixPQUFPLENBQUN1QixHQUFHLENBQUMsUUFBUSxJQUFJO2dCQUFFRSxNQUFNO2dCQUFLQyxRQUFRO1lBQUU7WUFDeEQsT0FBT0w7UUFDVDtRQUVBLE1BQU1ILFVBQXVCO1lBQUVIO1lBQU9JO1FBQUs7UUFDM0MsT0FBT3BCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDRjtJQUMzQjtJQUVBLGdCQUFnQjtJQUNoQixNQUFNUyxrQkFBa0IsTUFBTUMsTUFBTSxDQUFDLEVBQUUzQixrREFBWUEsQ0FBQyxRQUFRLENBQUMsRUFBRTtRQUM3RDRCLFNBQVM7WUFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRWYsTUFBTSxDQUFDO1FBQ2xDO1FBQ0FnQixPQUFPO0lBQ1QsR0FBR0MsS0FBSyxDQUFDLENBQUNDO1FBQ1JDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU9FO0lBQ1Q7SUFFQSxJQUFJLENBQUNSLG1CQUFtQixDQUFDQSxnQkFBZ0JTLEVBQUUsRUFBRTtRQUMzQyxNQUFNZixXQUFXdEIscURBQVlBLENBQUNxQixJQUFJLENBQWM7WUFBRUwsT0FBTztZQUFNSSxNQUFNO1FBQUssR0FBRztZQUFFRyxRQUFRO1FBQUk7UUFDM0ZELFNBQVNyQixPQUFPLENBQUN1QixHQUFHLENBQUMsU0FBUyxJQUFJO1lBQUVDLFVBQVU7WUFBTUMsTUFBTTtZQUFLQyxRQUFRO1FBQUU7UUFDekVMLFNBQVNyQixPQUFPLENBQUN1QixHQUFHLENBQUMsUUFBUSxJQUFJO1lBQUVFLE1BQU07WUFBS0MsUUFBUTtRQUFFO1FBQ3hELE9BQU9MO0lBQ1Q7SUFFQSxNQUFNZ0IsVUFBVSxNQUFNVixnQkFBZ0JQLElBQUk7SUFDMUMsTUFBTWtCLFNBQVNoQyxvREFBUUEsQ0FBQ1M7SUFDeEIsSUFBSUksT0FBT2Ysd0RBQWFBLENBQUNpQyxTQUFTQyxXQUFXakMsOERBQW1CQSxDQUFDaUMsV0FBVztJQUU1RSxJQUFJbkIsTUFBTTtRQUNSaEIsNERBQWlCQSxDQUFDZ0IsTUFBTW1CO0lBQzFCO0lBRUEsTUFBTXBCLFVBQXVCO1FBQUVIO1FBQU9JO0lBQUs7SUFFM0MsSUFBSSxDQUFDQSxNQUFNO1FBQ1QsTUFBTUUsV0FBV3RCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFjO1lBQUVMLE9BQU87WUFBTUksTUFBTTtRQUFLLEdBQUc7WUFBRUcsUUFBUTtRQUFJO1FBQzNGRCxTQUFTckIsT0FBTyxDQUFDdUIsR0FBRyxDQUFDLFNBQVMsSUFBSTtZQUFFQyxVQUFVO1lBQU1DLE1BQU07WUFBS0MsUUFBUTtRQUFFO1FBQ3pFTCxTQUFTckIsT0FBTyxDQUFDdUIsR0FBRyxDQUFDLFFBQVEsSUFBSTtZQUFFRSxNQUFNO1lBQUtDLFFBQVE7UUFBRTtRQUN4RCxPQUFPTDtJQUNUO0lBRUEsTUFBTUEsV0FBV3RCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDRjtJQUNuQ0csU0FBU3JCLE9BQU8sQ0FBQ3VCLEdBQUcsQ0FBQyxRQUFRSixLQUFLVCxJQUFJLEVBQUU7UUFDdENjLFVBQVU7UUFDVmUsVUFBVTtRQUNWQyxRQUFRQyxrQkFBeUI7UUFDakNoQixNQUFNO0lBQ1I7SUFDQSxPQUFPSjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvYXBwL2FwaS9hdXRoL3Nlc3Npb24vcm91dGUudHM/YzJiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5pbXBvcnQgeyBBUElfQkFTRV9VUkwsIFVTRV9NT0NLX0RBVEEgfSBmcm9tICdAL2xpYi9lbnYnO1xyXG5pbXBvcnQgdHlwZSB7IEF1dGhTZXNzaW9uLCBBdXRoVXNlciB9IGZyb20gJ0AvdHlwZXMvYXV0aCc7XHJcbmltcG9ydCB7IGFwcGx5Q2xhaW1zVG9Vc2VyLCBidWlsZEF1dGhVc2VyLCBidWlsZFVzZXJGcm9tQ2xhaW1zIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcbmltcG9ydCB7IHBhcnNlSnd0IH0gZnJvbSAnQC9saWIvdG9rZW4nO1xyXG5cclxuLy8gTW9jayB0b2tlbiB0byB1c2VyIG1hcHBpbmdcclxuY29uc3QgTU9DS19UT0tFTlM6IFJlY29yZDxzdHJpbmcsIEF1dGhVc2VyPiA9IHtcclxuICAnbW9jay10b2tlbi1zdXBlcmFkbWluLTEyMzQ1Jzoge1xyXG4gICAgaWQ6IDEsXHJcbiAgICBlbWFpbDogJ3N1cGVyYWRtaW5AY296eWNvcm5lci5jb20nLFxyXG4gICAgcm9sZTogJ1JPTEVfU1VQRVJBRE1JTicsXHJcbiAgICByZXN0YXVyYW50SWQ6IDEsXHJcbiAgICBicmFuY2hJZDogbnVsbCxcclxuICAgIHBlcm1pc3Npb25zOiBbXSxcclxuICB9LFxyXG4gICdtb2NrLXRva2VuLWFkbWluLTY3ODkwJzoge1xyXG4gICAgaWQ6IDIsXHJcbiAgICBlbWFpbDogJ2FkbWluQGRvd250b3duLmNvenljb3JuZXIuY29tJyxcclxuICAgIHJvbGU6ICdST0xFX0FETUlOJyxcclxuICAgIHJlc3RhdXJhbnRJZDogMSxcclxuICAgIGJyYW5jaElkOiAxLFxyXG4gICAgcGVybWlzc2lvbnM6IFtdLFxyXG4gIH0sXHJcbiAgJ21vY2stdG9rZW4ta2l0Y2hlbi0xMTExMSc6IHtcclxuICAgIGlkOiAzLFxyXG4gICAgZW1haWw6ICdraXRjaGVuMUBjb3p5Y29ybmVyLmNvbScsXHJcbiAgICByb2xlOiAnUk9MRV9LSVRDSEVOJyxcclxuICAgIHJlc3RhdXJhbnRJZDogMSxcclxuICAgIGJyYW5jaElkOiAxLFxyXG4gICAgcGVybWlzc2lvbnM6IFtdLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIGNvbnN0IHRva2VuID0gY29va2llcygpLmdldCgndG9rZW4nKT8udmFsdWU7XHJcblxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIGNvbnN0IHNlc3Npb246IEF1dGhTZXNzaW9uID0geyB0b2tlbjogbnVsbCwgdXNlcjogbnVsbCB9O1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHNlc3Npb24pO1xyXG4gIH1cclxuXHJcbiAgLy8gTW9jayBtb2RlXHJcbiAgaWYgKFVTRV9NT0NLX0RBVEEpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBNT0NLX1RPS0VOU1t0b2tlbl07XHJcbiAgICBcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uPEF1dGhTZXNzaW9uPih7IHRva2VuOiBudWxsLCB1c2VyOiBudWxsIH0sIHsgc3RhdHVzOiAyMDAgfSk7XHJcbiAgICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCd0b2tlbicsICcnLCB7IGh0dHBPbmx5OiB0cnVlLCBwYXRoOiAnLycsIG1heEFnZTogMCB9KTtcclxuICAgICAgcmVzcG9uc2UuY29va2llcy5zZXQoJ3JvbGUnLCAnJywgeyBwYXRoOiAnLycsIG1heEFnZTogMCB9KTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlc3Npb246IEF1dGhTZXNzaW9uID0geyB0b2tlbiwgdXNlciB9O1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHNlc3Npb24pO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVhbCBBUEkgbW9kZVxyXG4gIGNvbnN0IHByb2ZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFX1VSTH0vYXV0aC9tZWAsIHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICB9LFxyXG4gICAgY2FjaGU6ICduby1zdG9yZScsXHJcbiAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gcHJvZmlsZSBmZXRjaCBmYWlsZWQnLCBlcnJvcik7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH0pO1xyXG5cclxuICBpZiAoIXByb2ZpbGVSZXNwb25zZSB8fCAhcHJvZmlsZVJlc3BvbnNlLm9rKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uPEF1dGhTZXNzaW9uPih7IHRva2VuOiBudWxsLCB1c2VyOiBudWxsIH0sIHsgc3RhdHVzOiAyMDAgfSk7XHJcbiAgICByZXNwb25zZS5jb29raWVzLnNldCgndG9rZW4nLCAnJywgeyBodHRwT25seTogdHJ1ZSwgcGF0aDogJy8nLCBtYXhBZ2U6IDAgfSk7XHJcbiAgICByZXNwb25zZS5jb29raWVzLnNldCgncm9sZScsICcnLCB7IHBhdGg6ICcvJywgbWF4QWdlOiAwIH0pO1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmF3VXNlciA9IGF3YWl0IHByb2ZpbGVSZXNwb25zZS5qc29uKCk7XHJcbiAgY29uc3QgY2xhaW1zID0gcGFyc2VKd3QodG9rZW4pO1xyXG4gIGxldCB1c2VyID0gYnVpbGRBdXRoVXNlcihyYXdVc2VyLCBjbGFpbXMpID8/IGJ1aWxkVXNlckZyb21DbGFpbXMoY2xhaW1zKSA/PyBudWxsO1xyXG5cclxuICBpZiAodXNlcikge1xyXG4gICAgYXBwbHlDbGFpbXNUb1VzZXIodXNlciwgY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHNlc3Npb246IEF1dGhTZXNzaW9uID0geyB0b2tlbiwgdXNlciB9O1xyXG5cclxuICBpZiAoIXVzZXIpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb248QXV0aFNlc3Npb24+KHsgdG9rZW46IG51bGwsIHVzZXI6IG51bGwgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCd0b2tlbicsICcnLCB7IGh0dHBPbmx5OiB0cnVlLCBwYXRoOiAnLycsIG1heEFnZTogMCB9KTtcclxuICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCdyb2xlJywgJycsIHsgcGF0aDogJy8nLCBtYXhBZ2U6IDAgfSk7XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHNlc3Npb24pO1xyXG4gIHJlc3BvbnNlLmNvb2tpZXMuc2V0KCdyb2xlJywgdXNlci5yb2xlLCB7XHJcbiAgICBodHRwT25seTogZmFsc2UsXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBwYXRoOiAnLycsXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY29va2llcyIsIkFQSV9CQVNFX1VSTCIsIlVTRV9NT0NLX0RBVEEiLCJhcHBseUNsYWltc1RvVXNlciIsImJ1aWxkQXV0aFVzZXIiLCJidWlsZFVzZXJGcm9tQ2xhaW1zIiwicGFyc2VKd3QiLCJNT0NLX1RPS0VOUyIsImlkIiwiZW1haWwiLCJyb2xlIiwicmVzdGF1cmFudElkIiwiYnJhbmNoSWQiLCJwZXJtaXNzaW9ucyIsIkdFVCIsInRva2VuIiwiZ2V0IiwidmFsdWUiLCJzZXNzaW9uIiwidXNlciIsImpzb24iLCJyZXNwb25zZSIsInN0YXR1cyIsInNldCIsImh0dHBPbmx5IiwicGF0aCIsIm1heEFnZSIsInByb2ZpbGVSZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJjYWNoZSIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwidW5kZWZpbmVkIiwib2siLCJyYXdVc2VyIiwiY2xhaW1zIiwic2FtZVNpdGUiLCJzZWN1cmUiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/session/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyClaimsToUser: () => (/* binding */ applyClaimsToUser),\n/* harmony export */   buildAuthUser: () => (/* binding */ buildAuthUser),\n/* harmony export */   buildUserFromClaims: () => (/* binding */ buildUserFromClaims)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\n\nconst coerceNumber = (value, fallback = null)=>{\n    if (value === undefined || value === null) return fallback;\n    const num = Number(value);\n    return Number.isFinite(num) ? num : fallback;\n};\nconst resolveRole = (value)=>(0,_roles__WEBPACK_IMPORTED_MODULE_0__.normalizeUserRole)(value ?? undefined);\nconst ensurePermissions = (permissions)=>Array.isArray(permissions) ? permissions.map(String) : [];\nconst applyClaimsToUser = (user, claims)=>{\n    if (!user || !claims) return;\n    const claimRole = resolveRole(claims.role ?? null);\n    if (claimRole) {\n        user.role = claimRole;\n    }\n    const restaurantId = coerceNumber(claims.restaurantId);\n    if (restaurantId !== null) {\n        user.restaurantId = restaurantId;\n    }\n    const branchId = coerceNumber(claims.branchId, null);\n    if (branchId !== null || claims.branchId === null) {\n        user.branchId = branchId;\n    }\n    if (claims.email) {\n        user.email = claims.email;\n    }\n    if (claims.restaurantName !== undefined) {\n        user.restaurantName = claims.restaurantName ?? null;\n    }\n    if (claims.permissions) {\n        user.permissions = ensurePermissions(claims.permissions);\n    }\n    if (!user.id && claims.userId) {\n        user.id = Number(claims.userId);\n    }\n};\nconst buildUserFromClaims = (claims)=>{\n    if (!claims) return undefined;\n    const role = resolveRole(claims.role ?? null);\n    if (!role) return undefined;\n    return {\n        id: coerceNumber(claims.userId, 0) ?? 0,\n        email: claims.email ?? \"\",\n        role,\n        restaurantId: coerceNumber(claims.restaurantId, 0) ?? 0,\n        branchId: coerceNumber(claims.branchId, null),\n        restaurantName: claims.restaurantName ?? null,\n        permissions: ensurePermissions(claims.permissions)\n    };\n};\nconst buildAuthUser = (payload, claims)=>{\n    if (!payload && !claims) return undefined;\n    let user;\n    if (payload) {\n        const role = resolveRole(payload.role ?? payload.authority ?? payload.authorities?.[0]?.authority ?? payload.authorities?.[0]?.role);\n        if (role) {\n            user = {\n                id: Number(payload.id ?? payload.userId ?? payload.user?.id ?? 0),\n                email: payload.email ?? payload.username ?? payload.user?.email ?? \"\",\n                role,\n                restaurantId: Number(payload.restaurantId ?? payload.restaurant?.id ?? payload.user?.restaurantId ?? 0) || 0,\n                branchId: coerceNumber(payload.branchId ?? payload.branch?.id ?? payload.user?.branchId ?? payload.user?.branch?.id, null),\n                restaurantName: payload.restaurantName ?? payload.restaurant?.name ?? null,\n                permissions: ensurePermissions(payload.permissions)\n            };\n        }\n    }\n    if (!user && claims) {\n        user = buildUserFromClaims(claims);\n    }\n    if (user && claims) {\n        applyClaimsToUser(user, claims);\n    }\n    if (user) {\n        user.permissions = Array.isArray(user.permissions) ? user.permissions : [];\n    }\n    return user;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVNLFNBQVM7Z0JBQ25FSDtnQkFDQUMsY0FDRWQsT0FBT3NCLFFBQVFSLFlBQVksSUFBSVEsUUFBUUksVUFBVSxFQUFFUixNQUFNSSxRQUFRWixJQUFJLEVBQUVJLGdCQUFnQixNQUFNO2dCQUMvRkMsVUFDRXBCLGFBQ0UyQixRQUFRUCxRQUFRLElBQ2RPLFFBQVFLLE1BQU0sRUFBRVQsTUFDaEJJLFFBQVFaLElBQUksRUFBRUssWUFDZE8sUUFBUVosSUFBSSxFQUFFaUIsUUFBUVQsSUFDeEI7Z0JBRUpELGdCQUFnQkssUUFBUUwsY0FBYyxJQUFJSyxRQUFRSSxVQUFVLEVBQUVFLFFBQVE7Z0JBQ3RFeEIsYUFBYUQsa0JBQWtCbUIsUUFBUWxCLFdBQVc7WUFDcEQ7UUFDRjtJQUNGO0lBRUEsSUFBSSxDQUFDTSxRQUFRQyxRQUFRO1FBQ25CRCxPQUFPVSxvQkFBb0JUO0lBQzdCO0lBRUEsSUFBSUQsUUFBUUMsUUFBUTtRQUNsQkYsa0JBQWtCQyxNQUFNQztJQUMxQjtJQUVBLElBQUlELE1BQU07UUFDUkEsS0FBS04sV0FBVyxHQUFHQyxNQUFNQyxPQUFPLENBQUNJLEtBQUtOLFdBQVcsSUFBSU0sS0FBS04sV0FBVyxHQUFHLEVBQUU7SUFDNUU7SUFFQSxPQUFPTTtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXV0aFVzZXIgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5pbXBvcnQgeyBub3JtYWxpemVVc2VyUm9sZSB9IGZyb20gJy4vcm9sZXMnO1xyXG5pbXBvcnQgdHlwZSB7IFRva2VuQ2xhaW1zIH0gZnJvbSAnLi90b2tlbic7XHJcblxyXG5jb25zdCBjb2VyY2VOdW1iZXIgPSAodmFsdWU6IHVua25vd24sIGZhbGxiYWNrOiBudW1iZXIgfCBudWxsID0gbnVsbCk6IG51bWJlciB8IG51bGwgPT4ge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm4gZmFsbGJhY2s7XHJcbiAgY29uc3QgbnVtID0gTnVtYmVyKHZhbHVlKTtcclxuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bSkgPyBudW0gOiBmYWxsYmFjaztcclxufTtcclxuXHJcbmNvbnN0IHJlc29sdmVSb2xlID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT4gbm9ybWFsaXplVXNlclJvbGUodmFsdWUgPz8gdW5kZWZpbmVkKTtcclxuXHJcbmNvbnN0IGVuc3VyZVBlcm1pc3Npb25zID0gKHBlcm1pc3Npb25zOiB1bmtub3duKTogc3RyaW5nW10gPT5cclxuICBBcnJheS5pc0FycmF5KHBlcm1pc3Npb25zKSA/IHBlcm1pc3Npb25zLm1hcChTdHJpbmcpIDogW107XHJcblxyXG5leHBvcnQgY29uc3QgYXBwbHlDbGFpbXNUb1VzZXIgPSAodXNlcjogQXV0aFVzZXIsIGNsYWltczogVG9rZW5DbGFpbXMpID0+IHtcclxuICBpZiAoIXVzZXIgfHwgIWNsYWltcykgcmV0dXJuO1xyXG4gIGNvbnN0IGNsYWltUm9sZSA9IHJlc29sdmVSb2xlKGNsYWltcy5yb2xlID8/IG51bGwpO1xyXG4gIGlmIChjbGFpbVJvbGUpIHtcclxuICAgIHVzZXIucm9sZSA9IGNsYWltUm9sZTtcclxuICB9XHJcbiAgY29uc3QgcmVzdGF1cmFudElkID0gY29lcmNlTnVtYmVyKGNsYWltcy5yZXN0YXVyYW50SWQpO1xyXG4gIGlmIChyZXN0YXVyYW50SWQgIT09IG51bGwpIHtcclxuICAgIHVzZXIucmVzdGF1cmFudElkID0gcmVzdGF1cmFudElkO1xyXG4gIH1cclxuICBjb25zdCBicmFuY2hJZCA9IGNvZXJjZU51bWJlcihjbGFpbXMuYnJhbmNoSWQsIG51bGwpO1xyXG4gIGlmIChicmFuY2hJZCAhPT0gbnVsbCB8fCBjbGFpbXMuYnJhbmNoSWQgPT09IG51bGwpIHtcclxuICAgIHVzZXIuYnJhbmNoSWQgPSBicmFuY2hJZDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5lbWFpbCkge1xyXG4gICAgdXNlci5lbWFpbCA9IGNsYWltcy5lbWFpbDtcclxuICB9XHJcbiAgaWYgKGNsYWltcy5yZXN0YXVyYW50TmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICB1c2VyLnJlc3RhdXJhbnROYW1lID0gY2xhaW1zLnJlc3RhdXJhbnROYW1lID8/IG51bGw7XHJcbiAgfVxyXG4gIGlmIChjbGFpbXMucGVybWlzc2lvbnMpIHtcclxuICAgIHVzZXIucGVybWlzc2lvbnMgPSBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpO1xyXG4gIH1cclxuICBpZiAoIXVzZXIuaWQgJiYgY2xhaW1zLnVzZXJJZCkge1xyXG4gICAgdXNlci5pZCA9IE51bWJlcihjbGFpbXMudXNlcklkKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRVc2VyRnJvbUNsYWltcyA9IChjbGFpbXM6IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShjbGFpbXMucm9sZSA/PyBudWxsKTtcclxuICBpZiAoIXJvbGUpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnVzZXJJZCwgMCkgPz8gMCxcclxuICAgIGVtYWlsOiBjbGFpbXMuZW1haWwgPz8gJycsXHJcbiAgICByb2xlLFxyXG4gICAgcmVzdGF1cmFudElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLnJlc3RhdXJhbnRJZCwgMCkgPz8gMCxcclxuICAgIGJyYW5jaElkOiBjb2VyY2VOdW1iZXIoY2xhaW1zLmJyYW5jaElkLCBudWxsKSxcclxuICAgIHJlc3RhdXJhbnROYW1lOiBjbGFpbXMucmVzdGF1cmFudE5hbWUgPz8gbnVsbCxcclxuICAgIHBlcm1pc3Npb25zOiBlbnN1cmVQZXJtaXNzaW9ucyhjbGFpbXMucGVybWlzc2lvbnMpLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYnVpbGRBdXRoVXNlciA9IChwYXlsb2FkOiBhbnksIGNsYWltcz86IFRva2VuQ2xhaW1zKTogQXV0aFVzZXIgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcGF5bG9hZCAmJiAhY2xhaW1zKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIGxldCB1c2VyOiBBdXRoVXNlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgaWYgKHBheWxvYWQpIHtcclxuICAgIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZShcclxuICAgICAgcGF5bG9hZC5yb2xlID8/XHJcbiAgICAgICAgcGF5bG9hZC5hdXRob3JpdHkgPz9cclxuICAgICAgICBwYXlsb2FkLmF1dGhvcml0aWVzPy5bMF0/LmF1dGhvcml0eSA/P1xyXG4gICAgICAgIHBheWxvYWQuYXV0aG9yaXRpZXM/LlswXT8ucm9sZVxyXG4gICAgKTtcclxuICAgIGlmIChyb2xlKSB7XHJcbiAgICAgIHVzZXIgPSB7XHJcbiAgICAgICAgaWQ6IE51bWJlcihwYXlsb2FkLmlkID8/IHBheWxvYWQudXNlcklkID8/IHBheWxvYWQudXNlcj8uaWQgPz8gMCksXHJcbiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwgPz8gcGF5bG9hZC51c2VybmFtZSA/PyBwYXlsb2FkLnVzZXI/LmVtYWlsID8/ICcnLFxyXG4gICAgICAgIHJvbGUsXHJcbiAgICAgICAgcmVzdGF1cmFudElkOlxyXG4gICAgICAgICAgTnVtYmVyKHBheWxvYWQucmVzdGF1cmFudElkID8/IHBheWxvYWQucmVzdGF1cmFudD8uaWQgPz8gcGF5bG9hZC51c2VyPy5yZXN0YXVyYW50SWQgPz8gMCkgfHwgMCxcclxuICAgICAgICBicmFuY2hJZDpcclxuICAgICAgICAgIGNvZXJjZU51bWJlcihcclxuICAgICAgICAgICAgcGF5bG9hZC5icmFuY2hJZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQuYnJhbmNoPy5pZCA/P1xyXG4gICAgICAgICAgICAgIHBheWxvYWQudXNlcj8uYnJhbmNoSWQgPz9cclxuICAgICAgICAgICAgICBwYXlsb2FkLnVzZXI/LmJyYW5jaD8uaWQsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgcmVzdGF1cmFudE5hbWU6IHBheWxvYWQucmVzdGF1cmFudE5hbWUgPz8gcGF5bG9hZC5yZXN0YXVyYW50Py5uYW1lID8/IG51bGwsXHJcbiAgICAgICAgcGVybWlzc2lvbnM6IGVuc3VyZVBlcm1pc3Npb25zKHBheWxvYWQucGVybWlzc2lvbnMpLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCF1c2VyICYmIGNsYWltcykge1xyXG4gICAgdXNlciA9IGJ1aWxkVXNlckZyb21DbGFpbXMoY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyICYmIGNsYWltcykge1xyXG4gICAgYXBwbHlDbGFpbXNUb1VzZXIodXNlciwgY2xhaW1zKTtcclxuICB9XHJcblxyXG4gIGlmICh1c2VyKSB7XHJcbiAgICB1c2VyLnBlcm1pc3Npb25zID0gQXJyYXkuaXNBcnJheSh1c2VyLnBlcm1pc3Npb25zKSA/IHVzZXIucGVybWlzc2lvbnMgOiBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiB1c2VyO1xyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVVzZXJSb2xlIiwiY29lcmNlTnVtYmVyIiwidmFsdWUiLCJmYWxsYmFjayIsInVuZGVmaW5lZCIsIm51bSIsIk51bWJlciIsImlzRmluaXRlIiwicmVzb2x2ZVJvbGUiLCJlbnN1cmVQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiU3RyaW5nIiwiYXBwbHlDbGFpbXNUb1VzZXIiLCJ1c2VyIiwiY2xhaW1zIiwiY2xhaW1Sb2xlIiwicm9sZSIsInJlc3RhdXJhbnRJZCIsImJyYW5jaElkIiwiZW1haWwiLCJyZXN0YXVyYW50TmFtZSIsImlkIiwidXNlcklkIiwiYnVpbGRVc2VyRnJvbUNsYWltcyIsImJ1aWxkQXV0aFVzZXIiLCJwYXlsb2FkIiwiYXV0aG9yaXR5IiwiYXV0aG9yaXRpZXMiLCJ1c2VybmFtZSIsInJlc3RhdXJhbnQiLCJicmFuY2giLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_BASE_URL: () => (/* binding */ API_BASE_URL),\n/* harmony export */   DASHBOARD_REDIRECTS: () => (/* binding */ DASHBOARD_REDIRECTS),\n/* harmony export */   USE_MOCK_DATA: () => (/* binding */ USE_MOCK_DATA)\n/* harmony export */ });\n/* harmony import */ var _roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roles */ \"(rsc)/./src/lib/roles.ts\");\nconst API_BASE_URL = \"http://localhost:8080/api\"?.replace(/\\/+$/, \"\") || 0 || 0;\n/**\r\n * Enable mock data mode for development without a backend.\r\n * Set NEXT_PUBLIC_USE_MOCK_DATA=true in .env.local to enable.\r\n * Defaults to true in production if not explicitly set.\r\n */ const USE_MOCK_DATA =  true || 0;\n\nconst DASHBOARD_REDIRECTS = _roles__WEBPACK_IMPORTED_MODULE_0__.rolePathMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU8sTUFBTUEsZUFDWEMsMkJBQW9DLEVBQUVHLFFBQVEsUUFBUSxPQUN0REgsQ0FBaUQsSUFDakQsRUFBNEI7QUFFOUI7Ozs7Q0FJQyxHQUNNLE1BQU1LLGdCQUNYTCxLQUEwQyxJQUN6Q0EsQ0FBbUYsQ0FBUztBQUd6RDtBQUUvQixNQUFNUSxzQkFBZ0RELCtDQUFXQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhdGVtZW51ZnJvbnQvLi9zcmMvbGliL2Vudi50cz84NDg1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBBUElfQkFTRV9VUkwgPVxyXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9CQVNFX1VSTD8ucmVwbGFjZSgvXFwvKyQvLCAnJykgfHxcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMPy5yZXBsYWNlKC9cXC8rJC8sICcnKSB8fFxyXG4gICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpJztcclxuXHJcbi8qKlxyXG4gKiBFbmFibGUgbW9jayBkYXRhIG1vZGUgZm9yIGRldmVsb3BtZW50IHdpdGhvdXQgYSBiYWNrZW5kLlxyXG4gKiBTZXQgTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQT10cnVlIGluIC5lbnYubG9jYWwgdG8gZW5hYmxlLlxyXG4gKiBEZWZhdWx0cyB0byB0cnVlIGluIHByb2R1Y3Rpb24gaWYgbm90IGV4cGxpY2l0bHkgc2V0LlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFVTRV9NT0NLX0RBVEEgPSBcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19VU0VfTU9DS19EQVRBID09PSAndHJ1ZScgfHwgXHJcbiAgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSAhPT0gJ2ZhbHNlJyk7XHJcblxyXG5pbXBvcnQgdHlwZSB7IFVzZXJSb2xlIH0gZnJvbSAnQC90eXBlcy9hdXRoJztcclxuaW1wb3J0IHsgcm9sZVBhdGhNYXAgfSBmcm9tICcuL3JvbGVzJztcclxuXHJcbmV4cG9ydCBjb25zdCBEQVNIQk9BUkRfUkVESVJFQ1RTOiBSZWNvcmQ8VXNlclJvbGUsIHN0cmluZz4gPSByb2xlUGF0aE1hcDtcclxuXHJcbiJdLCJuYW1lcyI6WyJBUElfQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX0JBU0VfVVJMIiwicmVwbGFjZSIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJVU0VfTU9DS19EQVRBIiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSIsInJvbGVQYXRoTWFwIiwiREFTSEJPQVJEX1JFRElSRUNUUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/roles.ts":
/*!**************************!*\
  !*** ./src/lib/roles.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeUserRole: () => (/* binding */ normalizeUserRole),\n/* harmony export */   rolePathMap: () => (/* binding */ rolePathMap)\n/* harmony export */ });\nconst ROLE_MAP = {\n    ROLE_SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ROLE_ADMIN: \"ROLE_ADMIN\",\n    ROLE_WAITER: \"ROLE_WAITER\",\n    ROLE_KITCHEN: \"ROLE_KITCHEN\",\n    SUPERADMIN: \"ROLE_SUPERADMIN\",\n    ADMIN: \"ROLE_ADMIN\",\n    WAITER: \"ROLE_WAITER\",\n    KITCHEN: \"ROLE_KITCHEN\"\n};\nconst normalizeUserRole = (role)=>{\n    if (!role) return undefined;\n    const key = role.toUpperCase();\n    return ROLE_MAP[key];\n};\nconst rolePathMap = {\n    ROLE_SUPERADMIN: \"/superadmin/dashboard\",\n    ROLE_ADMIN: \"/admin/dashboard\",\n    ROLE_WAITER: \"/login\",\n    ROLE_KITCHEN: \"/login\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JvbGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsTUFBTUEsV0FBcUM7SUFDekNDLGlCQUFpQjtJQUNqQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLGNBQWM7SUFDZEMsWUFBWTtJQUNaQyxPQUFPO0lBQ1BDLFFBQVE7SUFDUkMsU0FBUztBQUNYO0FBRU8sTUFBTUMsb0JBQW9CLENBQUNDO0lBQ2hDLElBQUksQ0FBQ0EsTUFBTSxPQUFPQztJQUNsQixNQUFNQyxNQUFNRixLQUFLRyxXQUFXO0lBQzVCLE9BQU9iLFFBQVEsQ0FBQ1ksSUFBSTtBQUN0QixFQUFFO0FBRUssTUFBTUUsY0FBd0M7SUFDbkRiLGlCQUFpQjtJQUNqQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLGNBQWM7QUFDaEIsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYXRlbWVudWZyb250Ly4vc3JjL2xpYi9yb2xlcy50cz83N2Y4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXNlclJvbGUgfSBmcm9tICdAL3R5cGVzL2F1dGgnO1xyXG5cclxuY29uc3QgUk9MRV9NQVA6IFJlY29yZDxzdHJpbmcsIFVzZXJSb2xlPiA9IHtcclxuICBST0xFX1NVUEVSQURNSU46ICdST0xFX1NVUEVSQURNSU4nLFxyXG4gIFJPTEVfQURNSU46ICdST0xFX0FETUlOJyxcclxuICBST0xFX1dBSVRFUjogJ1JPTEVfV0FJVEVSJyxcclxuICBST0xFX0tJVENIRU46ICdST0xFX0tJVENIRU4nLFxyXG4gIFNVUEVSQURNSU46ICdST0xFX1NVUEVSQURNSU4nLFxyXG4gIEFETUlOOiAnUk9MRV9BRE1JTicsXHJcbiAgV0FJVEVSOiAnUk9MRV9XQUlURVInLFxyXG4gIEtJVENIRU46ICdST0xFX0tJVENIRU4nLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVVzZXJSb2xlID0gKHJvbGU/OiBzdHJpbmcgfCBudWxsKTogVXNlclJvbGUgfCB1bmRlZmluZWQgPT4ge1xyXG4gIGlmICghcm9sZSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICBjb25zdCBrZXkgPSByb2xlLnRvVXBwZXJDYXNlKCk7XHJcbiAgcmV0dXJuIFJPTEVfTUFQW2tleV07XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgcm9sZVBhdGhNYXA6IFJlY29yZDxVc2VyUm9sZSwgc3RyaW5nPiA9IHtcclxuICBST0xFX1NVUEVSQURNSU46ICcvc3VwZXJhZG1pbi9kYXNoYm9hcmQnLFxyXG4gIFJPTEVfQURNSU46ICcvYWRtaW4vZGFzaGJvYXJkJyxcclxuICBST0xFX1dBSVRFUjogJy9sb2dpbicsXHJcbiAgUk9MRV9LSVRDSEVOOiAnL2xvZ2luJyxcclxufTtcclxuXHJcbiJdLCJuYW1lcyI6WyJST0xFX01BUCIsIlJPTEVfU1VQRVJBRE1JTiIsIlJPTEVfQURNSU4iLCJST0xFX1dBSVRFUiIsIlJPTEVfS0lUQ0hFTiIsIlNVUEVSQURNSU4iLCJBRE1JTiIsIldBSVRFUiIsIktJVENIRU4iLCJub3JtYWxpemVVc2VyUm9sZSIsInJvbGUiLCJ1bmRlZmluZWQiLCJrZXkiLCJ0b1VwcGVyQ2FzZSIsInJvbGVQYXRoTWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/roles.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/token.ts":
/*!**************************!*\
  !*** ./src/lib/token.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJwt: () => (/* binding */ parseJwt)\n/* harmony export */ });\nconst decodeBase64Url = (value)=>{\n    try {\n        const base64 = value.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        if (true) {\n            return Buffer.from(base64, \"base64\").toString(\"utf8\");\n        }\n        // Browser\n        return decodeURIComponent(atob(base64).split(\"\").map((c)=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(\"\"));\n    } catch  {\n        return \"\";\n    }\n};\nconst parseJwt = (token)=>{\n    if (!token) return {};\n    const parts = token.split(\".\");\n    if (parts.length < 2) return {};\n    const payloadRaw = decodeBase64Url(parts[1]);\n    if (!payloadRaw) return {};\n    try {\n        const payload = JSON.parse(payloadRaw);\n        return {\n            userId: payload.userId ?? payload.sub ?? payload.id ?? null,\n            role: payload.role ?? payload.authority ?? null,\n            restaurantId: payload.restaurantId ?? payload.restId ?? null,\n            branchId: payload.branchId ?? null,\n            email: payload.email ?? payload.username ?? null,\n            restaurantName: payload.restaurantName ?? null,\n            permissions: Array.isArray(payload.permissions) ? payload.permissions : undefined\n        };\n    } catch (error) {\n        console.error(\"[token] Unable to parse JWT payload\", error);\n        return {};\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Rva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFVQSxNQUFNQSxrQkFBa0IsQ0FBQ0M7SUFDdkIsSUFBSTtRQUNGLE1BQU1DLFNBQVNELE1BQU1FLE9BQU8sQ0FBQyxNQUFNLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO1FBQ3RELElBQUksSUFBa0IsRUFBYTtZQUNqQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNILFFBQVEsVUFBVUksUUFBUSxDQUFDO1FBQ2hEO1FBQ0EsVUFBVTtRQUNWLE9BQU9DLG1CQUNMQyxLQUFLTixRQUNGTyxLQUFLLENBQUMsSUFDTkMsR0FBRyxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVBLEVBQUVDLFVBQVUsQ0FBQyxHQUFHTixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUNPLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUM5REMsSUFBSSxDQUFDO0lBRVosRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxNQUFNQyxXQUFXLENBQUNDO0lBQ3ZCLElBQUksQ0FBQ0EsT0FBTyxPQUFPLENBQUM7SUFDcEIsTUFBTUMsUUFBUUQsTUFBTVAsS0FBSyxDQUFDO0lBQzFCLElBQUlRLE1BQU1DLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQztJQUM5QixNQUFNQyxhQUFhbkIsZ0JBQWdCaUIsS0FBSyxDQUFDLEVBQUU7SUFDM0MsSUFBSSxDQUFDRSxZQUFZLE9BQU8sQ0FBQztJQUN6QixJQUFJO1FBQ0YsTUFBTUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDSDtRQUMzQixPQUFPO1lBQ0xJLFFBQVFILFFBQVFHLE1BQU0sSUFBSUgsUUFBUUksR0FBRyxJQUFJSixRQUFRSyxFQUFFLElBQUk7WUFDdkRDLE1BQU1OLFFBQVFNLElBQUksSUFBSU4sUUFBUU8sU0FBUyxJQUFJO1lBQzNDQyxjQUFjUixRQUFRUSxZQUFZLElBQUlSLFFBQVFTLE1BQU0sSUFBSTtZQUN4REMsVUFBVVYsUUFBUVUsUUFBUSxJQUFJO1lBQzlCQyxPQUFPWCxRQUFRVyxLQUFLLElBQUlYLFFBQVFZLFFBQVEsSUFBSTtZQUM1Q0MsZ0JBQWdCYixRQUFRYSxjQUFjLElBQUk7WUFDMUNDLGFBQWFDLE1BQU1DLE9BQU8sQ0FBQ2hCLFFBQVFjLFdBQVcsSUFBSWQsUUFBUWMsV0FBVyxHQUFHRztRQUMxRTtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsdUNBQXVDQTtRQUNyRCxPQUFPLENBQUM7SUFDVjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGF0ZW1lbnVmcm9udC8uL3NyYy9saWIvdG9rZW4udHM/MDgzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFRva2VuQ2xhaW1zIHtcclxuICB1c2VySWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIHJvbGU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlc3RhdXJhbnRJZD86IG51bWJlciB8IG51bGw7XHJcbiAgYnJhbmNoSWQ/OiBudW1iZXIgfCBudWxsO1xyXG4gIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcclxuICByZXN0YXVyYW50TmFtZT86IHN0cmluZyB8IG51bGw7XHJcbiAgcGVybWlzc2lvbnM/OiBzdHJpbmdbXSB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGRlY29kZUJhc2U2NFVybCA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYmFzZTY0ID0gdmFsdWUucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4gQnVmZmVyLmZyb20oYmFzZTY0LCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0ZjgnKTtcclxuICAgIH1cclxuICAgIC8vIEJyb3dzZXJcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXHJcbiAgICAgIGF0b2IoYmFzZTY0KVxyXG4gICAgICAgIC5zcGxpdCgnJylcclxuICAgICAgICAubWFwKChjKSA9PiBgJSR7YDAwJHtjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfWAuc2xpY2UoLTIpfWApXHJcbiAgICAgICAgLmpvaW4oJycpXHJcbiAgICApO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZUp3dCA9ICh0b2tlbj86IHN0cmluZyB8IG51bGwpOiBUb2tlbkNsYWltcyA9PiB7XHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuIHt9O1xyXG4gIGNvbnN0IHBheWxvYWRSYXcgPSBkZWNvZGVCYXNlNjRVcmwocGFydHNbMV0pO1xyXG4gIGlmICghcGF5bG9hZFJhdykgcmV0dXJuIHt9O1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkUmF3KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZDogcGF5bG9hZC51c2VySWQgPz8gcGF5bG9hZC5zdWIgPz8gcGF5bG9hZC5pZCA/PyBudWxsLFxyXG4gICAgICByb2xlOiBwYXlsb2FkLnJvbGUgPz8gcGF5bG9hZC5hdXRob3JpdHkgPz8gbnVsbCxcclxuICAgICAgcmVzdGF1cmFudElkOiBwYXlsb2FkLnJlc3RhdXJhbnRJZCA/PyBwYXlsb2FkLnJlc3RJZCA/PyBudWxsLFxyXG4gICAgICBicmFuY2hJZDogcGF5bG9hZC5icmFuY2hJZCA/PyBudWxsLFxyXG4gICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCA/PyBwYXlsb2FkLnVzZXJuYW1lID8/IG51bGwsXHJcbiAgICAgIHJlc3RhdXJhbnROYW1lOiBwYXlsb2FkLnJlc3RhdXJhbnROYW1lID8/IG51bGwsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBBcnJheS5pc0FycmF5KHBheWxvYWQucGVybWlzc2lvbnMpID8gcGF5bG9hZC5wZXJtaXNzaW9ucyA6IHVuZGVmaW5lZCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1t0b2tlbl0gVW5hYmxlIHRvIHBhcnNlIEpXVCBwYXlsb2FkJywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHt9O1xyXG4gIH1cclxufTtcclxuXHJcbiJdLCJuYW1lcyI6WyJkZWNvZGVCYXNlNjRVcmwiLCJ2YWx1ZSIsImJhc2U2NCIsInJlcGxhY2UiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwic3BsaXQiLCJtYXAiLCJjIiwiY2hhckNvZGVBdCIsInNsaWNlIiwiam9pbiIsInBhcnNlSnd0IiwidG9rZW4iLCJwYXJ0cyIsImxlbmd0aCIsInBheWxvYWRSYXciLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwidXNlcklkIiwic3ViIiwiaWQiLCJyb2xlIiwiYXV0aG9yaXR5IiwicmVzdGF1cmFudElkIiwicmVzdElkIiwiYnJhbmNoSWQiLCJlbWFpbCIsInVzZXJuYW1lIiwicmVzdGF1cmFudE5hbWUiLCJwZXJtaXNzaW9ucyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/token.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fsession%2Froute&page=%2Fapi%2Fauth%2Fsession%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fsession%2Froute.ts&appDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cismayila%5Cplatefulmenufront&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();