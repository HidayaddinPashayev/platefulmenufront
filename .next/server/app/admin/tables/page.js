(()=>{var e={};e.id=658,e.ids=[658],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>b,tree:()=>o}),s(778),s(9457),s(4773),s(5866);var l=s(3191),a=s(8716),r=s(7922),n=s.n(r),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["admin",{children:["tables",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,778)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\admin\\tables\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4773)),"C:\\Users\\ismayila\\platefulmenufront\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ismayila\\platefulmenufront\\src\\app\\admin\\tables\\page.tsx"],u="/admin/tables/page",m={require:s,loadChunk:()=>Promise.resolve()},b=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/tables/page",pathname:"/admin/tables",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2139:(e,t,s)=>{Promise.resolve().then(s.bind(s,5264))},9999:(e,t,s)=>{Promise.resolve().then(s.bind(s,1148))},5264:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(326),a=s(7239);function r({children:e}){return l.jsx(a.I,{allowedRoles:["ROLE_ADMIN"],children:e})}},1148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var l=s(326),a=s(7577),r=s(4131),n=s(3916),i=s(926);let d={name:"",seatCount:"",tableNumber:"",active:!0};function o(){let{user:e}=(0,r.a)(),t=(0,n.h)(),[s,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[m,b]=(0,a.useState)(null),[x,p]=(0,a.useState)(d),[h,g]=(0,a.useState)(!1),[f,N]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[y,w]=(0,a.useState)({name:"",seatCount:"",tableNumber:"",active:!0}),[C,k]=(0,a.useState)(!1),[q,S]=(0,a.useState)(null),A=e?.branchId??null,P=e?.restaurantId??null,_=async()=>{if(P&&A)try{let e=await (0,i.Xn)(t,P,A);o(e)}catch(e){console.error("[AdminTables] refresh error",e),b("Failed to refresh table list.")}},T=async e=>{if(e.preventDefault(),P&&A){g(!0),b(null);try{let e=x.seatCount?Number(x.seatCount):null,s=x.tableNumber?Number(x.tableNumber):null;await (0,i.W_)(t,P,A,{name:x.name.trim()||`Table ${Date.now()}`,seatCount:e,tableNumber:s}),p(d),await _()}catch(e){console.error("[AdminTables] create error",e),b("Failed to create table.")}finally{g(!1)}}},I=e=>{N(e.id),j(e),w({name:e.name??"",seatCount:null!=e.seatCount?String(e.seatCount):"",tableNumber:null!=e.tableNumber?String(e.tableNumber):"",active:e.active??!0})},R=()=>{N(null),j(null),w({name:"",seatCount:"",tableNumber:"",active:!0})},E=async e=>{if(e.preventDefault(),null!=f&&v){k(!0),b(null);try{let e=y.seatCount?Number(y.seatCount):null,s=y.tableNumber?Number(y.tableNumber):null;await (0,i.T0)(t,f,{name:y.name.trim()||`Table ${f}`,seatCount:e,tableNumber:s,restaurantId:v.restaurantId,branchId:v.branchId}),R(),await _()}catch(e){console.error("[AdminTables] update error",e),b("Failed to update table.")}finally{k(!1)}}},D=async e=>{if(confirm("Remove this table?")){b(null);try{await (0,i.WQ)(t,e),await _()}catch(e){console.error("[AdminTables] delete error",e),b("Failed to delete table.")}}};return e?.role!=="ROLE_ADMIN"?l.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-6 py-4 text-sm text-amber-900",children:"Access restricted to Admin role."}):P&&A?(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("header",{className:"space-y-2",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Tables"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Manage the tables assigned to your branch, including capacity and numbering."})]}),m?l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:m}):null,(0,l.jsxs)("section",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Add table"}),(0,l.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-4",onSubmit:T,children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"table-name",children:"Table name"}),l.jsx("input",{id:"table-name",value:x.name,onChange:e=>p(t=>({...t,name:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"Window table"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"table-number",children:"Table number"}),l.jsx("input",{id:"table-number",value:x.tableNumber,onChange:e=>p(t=>({...t,tableNumber:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"Optional"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600",htmlFor:"table-seat",children:"Seat count"}),l.jsx("input",{id:"table-seat",value:x.seatCount,onChange:e=>p(t=>({...t,seatCount:e.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"4"})]}),l.jsx("div",{className:"md:col-span-2 lg:col-span-4 flex items-center gap-3",children:(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[l.jsx("input",{type:"checkbox",checked:x.active,onChange:e=>p(t=>({...t,active:e.target.checked})),className:"h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),"Active"]})}),(0,l.jsxs)("div",{className:"md:col-span-2 lg:col-span-4 flex items-center gap-3",children:[l.jsx("button",{type:"submit",disabled:h,className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:h?"Adding…":"Add table"}),l.jsx("button",{type:"button",onClick:()=>p(d),className:"text-sm font-medium text-slate-500 hover:text-slate-700",disabled:h,children:"Reset"})]})]})]}),(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Current tables"}),(0,l.jsxs)("span",{className:"text-xs font-medium text-slate-500",children:[s.length," ",1===s.length?"table":"tables"]})]}),c?l.jsx("div",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm text-slate-500",children:"Loading tables…"}):0===s.length?l.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-6 text-center text-sm text-slate-500",children:"No tables configured for this branch."}):l.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:s.map(e=>f===e.id?(0,l.jsxs)("form",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",onSubmit:E,children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-base font-semibold text-blue-900",children:["Editing Table ",e.tableNumber??e.id]}),(0,l.jsxs)("p",{className:"text-xs text-blue-700",children:["Table ID: ",e.id]})]}),l.jsx("button",{type:"button",className:"text-xs font-medium text-blue-700 hover:text-blue-900",onClick:R,disabled:C,children:"Cancel"})]}),(0,l.jsxs)("div",{className:"mt-3 grid gap-3 sm:grid-cols-3",children:[(0,l.jsxs)("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-medium text-blue-800",children:"Name"}),l.jsx("input",{value:y.name,onChange:e=>w(t=>({...t,name:e.target.value})),className:"mt-1 w-full rounded-lg border border-blue-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-blue-800",children:"Table number"}),l.jsx("input",{value:y.tableNumber,onChange:e=>w(t=>({...t,tableNumber:e.target.value})),className:"mt-1 w-full rounded-lg border border-blue-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-blue-800",children:"Seat count"}),l.jsx("input",{value:y.seatCount,onChange:e=>w(t=>({...t,seatCount:e.target.value})),className:"mt-1 w-full rounded-lg border border-blue-200 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none"})]})]}),(0,l.jsxs)("label",{className:"mt-3 flex items-center gap-2 text-sm text-blue-800",children:[l.jsx("input",{type:"checkbox",checked:y.active,onChange:e=>w(t=>({...t,active:e.target.checked})),className:"h-4 w-4 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),"Active"]}),l.jsx("div",{className:"mt-4 flex items-center gap-3",children:l.jsx("button",{type:"submit",disabled:C,className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:C?"Saving…":"Save changes"})})]},e.id):l.jsx("article",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-slate-900",children:["Table ",e.tableNumber??e.id]}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Seats ",e.seatCount??"N/A"," • ",e.active?"Active":"Inactive"]}),e.name?(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Label: ",e.name]}):null,e.qrCode?(0,l.jsxs)("p",{className:"text-xs text-slate-400 break-all",children:["QR: ",e.qrCode]}):null]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 text-xs font-medium text-slate-600",children:[l.jsx("button",{type:"button",onClick:()=>S(e),className:"inline-flex items-center rounded-lg border border-slate-200 px-3 py-1 text-slate-700 transition hover:bg-slate-50",children:"QR Code"}),l.jsx("button",{type:"button",onClick:()=>I(e),className:"inline-flex items-center rounded-lg border border-blue-200 px-3 py-1 text-blue-600 transition hover:bg-blue-50",children:"Edit"}),l.jsx("button",{type:"button",onClick:()=>D(e.id),className:"inline-flex items-center rounded-lg border border-red-200 px-3 py-1 text-red-600 transition hover:bg-red-50",children:"Delete"})]})]})},e.id))})]}),q&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm",children:l.jsx("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-xl",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("h3",{className:"text-lg font-bold text-slate-900",children:["Table ",q.tableNumber??q.id]}),l.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Scan to view menu & order"}),l.jsx("div",{className:"mx-auto bg-white p-4 rounded-xl border border-slate-100 shadow-inner inline-block",children:l.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(`${window.location.origin}/scan?table=${q.id}&branch=${q.branchId}`)}`,alt:"QR Code",className:"w-64 h-64"})}),(0,l.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[l.jsx("button",{onClick:()=>window.print(),className:"rounded-lg border border-slate-200 px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Print"}),l.jsx("button",{onClick:()=>S(null),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Close"})]})]})})})]}):l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-6 py-4 text-sm text-red-700",children:"Your administrator profile is missing restaurant or branch assignments. Please contact your SuperAdmin."})}},9457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\app\admin\layout.tsx#default`)},778:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(8570).createProxy)(String.raw`C:\Users\ismayila\platefulmenufront\src\app\admin\tables\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[276,985,434,160,508,292],()=>s(4809));module.exports=l})();